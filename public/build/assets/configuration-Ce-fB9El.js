import{r as n,U as tt,a as js,b as rt,j as e,c as Lt}from"./app-B4fkVL-W.js";import{M as vs,T as De,b as st,c as Ns,a as Ft,C as ws}from"./monitor-layout-X6KElx1m.js";import{l as lt,L as Dt}from"./leaflet-47NS-zU3.js";import{S as pe,C as fe}from"./server-DqELNAlQ.js";import{R as ys}from"./refresh-cw-vpVBQ_Bj.js";import{C as Cs}from"./check-BBAtQGxW.js";import{S as X,T as q,U as Ss,P as $t}from"./upload-apSv_Ahe.js";import{D as _s}from"./download-BBdqAOwr.js";import{S as ce}from"./search-lVQvEiEL.js";import{X as H,C as As}from"./x-BxlU8eWN.js";import{S as Bt}from"./save-DSWTMF-c.js";import{c as Tt}from"./createLucideIcon-dVGcEtEt.js";import{E as Es}from"./eye-Cs-H2QNF.js";import{U as It}from"./user-BsYZnLKv.js";import{C as Ls}from"./chevron-up-D7DcPQoO.js";import"./index-DqCvxCPs.js";import"./app-hK0G8rfC.js";import"./activity-6clVTxZj.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],zt=Tt("History",Ds);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],at=Tt("MessageCircle",zs);function Ms(s,l){const a=n.useRef(l);n.useEffect(function(){l!==a.current&&s.attributionControl!=null&&(a.current!=null&&s.attributionControl.removeAttribution(a.current),l!=null&&s.attributionControl.addAttribution(l)),a.current=l},[s,l])}const Fs=1;function $s(s){return Object.freeze({__version:Fs,map:s})}function Bs(s,l){return Object.freeze({...s,...l})}const nt=n.createContext(null);function Ot(){const s=n.use(nt);if(s==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return s}function Ts(s){function l(a,i){const{instance:c,context:r}=s(a).current;n.useImperativeHandle(i,()=>c);const{children:o}=a;return o==null?null:tt.createElement(nt,{value:r},o)}return n.forwardRef(l)}function Is(s){function l(a,i){const{instance:c}=s(a).current;return n.useImperativeHandle(i,()=>c),null}return n.forwardRef(l)}function Os(s,l){const a=n.useRef(void 0);n.useEffect(function(){return l!=null&&s.instance.on(l),a.current=l,function(){a.current!=null&&s.instance.off(a.current),a.current=null}},[s,l])}function Rt(s,l){const a=s.pane??l.pane;return a?{...s,pane:a}:s}function Vt(s,l,a){return Object.freeze({instance:s,context:l,container:a})}function Ut(s,l){return l==null?function(i,c){const r=n.useRef(void 0);return r.current||(r.current=s(i,c)),r}:function(i,c){const r=n.useRef(void 0);r.current||(r.current=s(i,c));const o=n.useRef(i),{instance:k}=r.current;return n.useEffect(function(){o.current!==i&&(l(k,i,o.current),o.current=i)},[k,i,l]),r}}function Rs(s,l){n.useEffect(function(){return(l.layerContainer??l.map).addLayer(s.instance),function(){l.layerContainer?.removeLayer(s.instance),l.map.removeLayer(s.instance)}},[l,s])}function qt(s){return function(a){const i=Ot(),c=s(Rt(a,i),i);return Ms(i.map,a.attribution),Os(c.current,a.eventHandlers),Rs(c.current,i),c}}function Vs(s,l){const a=Ut(s,l),i=qt(a);return Ts(i)}function Us(s,l){const a=Ut(s,l),i=qt(a);return Is(i)}function qs(s,l,a){const{opacity:i,zIndex:c}=l;i!=null&&i!==a.opacity&&s.setOpacity(i),c!=null&&c!==a.zIndex&&s.setZIndex(c)}function Ps(){return Ot().map}function Hs(s){const l=Ps();return n.useEffect(function(){return l.on(s),function(){l.off(s)}},[l,s]),l}function Ws({bounds:s,boundsOptions:l,center:a,children:i,className:c,id:r,placeholder:o,style:k,whenReady:h,zoom:g,...L},m){const[x]=n.useState({className:c,id:r,style:k}),[_,G]=n.useState(null),T=n.useRef(void 0);n.useImperativeHandle(m,()=>_?.map??null,[_]);const R=n.useCallback(W=>{if(W!==null&&!T.current){const A=new lt.Map(W,L);T.current=A,a!=null&&g!=null?A.setView(a,g):s!=null&&A.fitBounds(s,l),h!=null&&A.whenReady(h),G($s(A))}},[]);n.useEffect(()=>()=>{_?.map.remove()},[_]);const ae=_?tt.createElement(nt,{value:_},i):o??null;return tt.createElement("div",{...x,ref:R},ae)}const Ks=n.forwardRef(Ws),Js=Vs(function({position:l,...a},i){const c=new lt.Marker(l,a);return Vt(c,Bs(i,{overlayContainer:c}))},function(l,a,i){a.position!==i.position&&l.setLatLng(a.position),a.icon!=null&&a.icon!==i.icon&&l.setIcon(a.icon),a.zIndexOffset!=null&&a.zIndexOffset!==i.zIndexOffset&&l.setZIndexOffset(a.zIndexOffset),a.opacity!=null&&a.opacity!==i.opacity&&l.setOpacity(a.opacity),l.dragging!=null&&a.draggable!==i.draggable&&(a.draggable===!0?l.dragging.enable():l.dragging.disable())}),Xs=Us(function({url:l,...a},i){const c=new lt.TileLayer(l,Rt(a,i));return Vt(c,i)},function(l,a,i){qs(l,a,i);const{url:c}=a;c!=null&&c!==i.url&&l.setUrl(c)}),Pt=s=>({tas:"TAS",cctv:"CCTV",wifi:"WiFi",switches:"Switches",servers:"Servers"})[s.toLowerCase()]||s.charAt(0).toUpperCase()+s.slice(1),Ys=s=>{if(s===0)return"0m";const l=s,a=Math.floor(l/60),i=Math.floor(a/24),c=Math.floor(i/7);if(c>0){const r=i%7;return r>0?`${c}w ${r}d`:`${c}w`}else if(i>0){const r=a%24;return r>0?`${i}d ${r}h`:`${i}d`}else if(a>0){const r=l%60;return r>0?`${a}h ${r}m`:`${a}h`}else return`${l}m`},Zs=s=>{if(s===void 0||s<=0)return"0 minutes";const l=Math.ceil(s);if(l<60)return`${l} minute${l!==1?"s":""}`;const a=Math.floor(l/60),i=l%60;if(a<24)return i>0?`${a} hour${a!==1?"s":""} ${i} minute${i!==1?"s":""}`:`${a} hour${a!==1?"s":""}`;const c=Math.floor(a/24),r=a%24;return r>0?`${c} day${c!==1?"s":""} ${r} hour${r!==1?"s":""}`:`${c} day${c!==1?"s":""}`};function za(){const{t:s}=js(),{currentBranch:l}=rt().props,[a,i]=n.useState("devices"),[c,r]=n.useState(!1),[o,k]=n.useState("create"),[h,g]=n.useState(null),[L,m]=n.useState(!1),[x,_]=n.useState(null),[G,T]=n.useState([]),[R,ae]=n.useState([]),[W,A]=n.useState([]),[V,re]=n.useState([]),[le,Y]=n.useState([]),[p,B]=n.useState([]),[d,C]=n.useState([]),[v,Q]=n.useState([]),[Z,D]=n.useState([]),[U,I]=n.useState(!1),[ge,ie]=n.useState([]),[xe,ze]=n.useState(!1),[Me,Fe]=n.useState(!1),[K,$e]=n.useState(null),[N,u]=n.useState([]),[w,z]=n.useState("devices"),[F,ke]=n.useState("folders"),Ht=F==="folders"?"Manage Folders":"Manage Locations",Wt=F==="folders"?"Organize related locations into easily collapsible groups.":"Assign each location to a folder for the hierarchical grid view.",Kt=a.charAt(0).toUpperCase()+a.slice(1),Jt=a==="locations"?Ht:`Manage ${Kt}`,Xt=a==="locations"?Wt:`Create, edit, and manage your ${a}`,Yt=e.jsxs("div",{className:"flex flex-col items-center gap-3 rounded-xl border border-slate-200 bg-white px-4 py-3 text-center shadow-sm dark:border-slate-700 dark:bg-slate-900/70 sm:flex-row sm:justify-between lg:gap-4 lg:text-left",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400",children:"Location Management View"}),e.jsx("div",{className:"inline-flex rounded-lg bg-slate-100 p-1 shadow-inner dark:bg-slate-800/70",children:[{key:"folders",label:"Folders"},{key:"locations",label:"Locations"}].map(t=>e.jsx("button",{type:"button",onClick:()=>ke(t.key),className:`px-5 py-1.5 text-sm font-semibold rounded-lg transition-all ${F===t.key?"bg-gradient-to-r from-blue-500 to-indigo-500 text-white shadow":"text-slate-600 hover:text-slate-900 dark:text-slate-300 dark:hover:text-white"}`,children:t.label},t.key))})]}),Ke=n.useCallback(t=>{switch(t){case"devices":return"Device";case"alerts":return"Alert";case"locations":return"Location";case"location-folders":return"Location Folder";case"users":return"User";case"brands":return"Brand";case"models":return"Model";case"history":return"History Entry";case"branches":return"Branch";default:return typeof t=="string"?t.slice(0,-1):"Item"}},[]),[dt,it]=n.useState(!1),Zt=a==="locations"&&F==="folders"?"Add Folder":"Add New",Je=n.useCallback(t=>t||(a==="locations"&&F==="folders"?"location-folders":a),[a,F]),[Be,je]=n.useState(1),[Te,ot]=n.useState(300),[Ie,Gt]=n.useState(0),[ct,Qt]=n.useState(1),[Oe,xt]=n.useState(""),[ee,ut]=n.useState(""),Re=n.useRef(null),Xe=n.useRef(!1),[P,mt]=n.useState("all"),[te,ht]=n.useState("all"),[ne,bt]=n.useState("all"),[ue,pt]=n.useState(""),[Ve,ft]=n.useState("all"),[Ue,gt]=n.useState("all"),[ve,kt]=n.useState(""),[me,jt]=n.useState(""),[Ne,vt]=n.useState("all"),[he,Nt]=n.useState(""),[we,wt]=n.useState(""),[be,yt]=n.useState(""),[qe,es]=n.useState("name"),[Pe,Ct]=n.useState("asc"),[He,ts]=n.useState("triggered_at"),[Ye,St]=n.useState("desc");n.useEffect(()=>{je(1),J(),u([])},[a,l?.id]),n.useEffect(()=>{J()},[Be,Te]),n.useEffect(()=>{const t=setTimeout(()=>{Re.current===document.activeElement&&(Xe.current=!0),ut(Oe)},1e3);return()=>clearTimeout(t)},[Oe]),n.useEffect(()=>{a==="devices"&&(je(1),J())},[ee,P,te,ne,qe,Pe]),n.useEffect(()=>{!U&&Xe.current&&Re.current&&a==="devices"&&setTimeout(()=>{Re.current?.focus(),Xe.current=!1},0)},[U,a]),n.useEffect(()=>{a!=="locations"&&ke("folders")},[a]),n.useEffect(()=>{const t=setInterval(()=>{J()},3e4);return()=>clearInterval(t)},[a,l?.id]);const ss=n.useCallback(async()=>{try{const t=await fetch("/api/location-folders",{credentials:"same-origin",headers:{Accept:"application/json"}});if(t.status===401){console.warn("Not authorized to fetch location folders. Please ensure you are logged in.");return}if(t.ok){const f=await t.json();re(f)}else console.error("Failed to fetch location folders:",await t.text())}catch(t){console.error("Error fetching location folders:",t)}},[]),J=async()=>{I(!0);try{let f={branches:"/api/branches",devices:"/api/devices",alerts:"/api/alerts",locations:"/api/locations","location-folders":"/api/location-folders",users:"/api/users",brands:"/api/brands",models:"/api/models",history:"/api/activity-logs"}[a];if(!f){I(!1);return}const b=new URLSearchParams;if(l?.id&&["devices","alerts","locations","history"].includes(a)){const S=String(l.id);S!=="all"&&b.append("branch_id",S)}["devices","alerts","locations","users"].includes(a)&&(b.append("page",Be.toString()),b.append("per_page",Te.toString())),a==="devices"&&(b.append("include_inactive","true"),ee&&b.append("search",ee),te!=="all"&&b.append("category",te),P!=="all"&&b.append("status",P),ne!=="all"&&b.append("active_filter",ne),b.append("sort_by",qe),b.append("sort_order",Pe)),b.toString()&&(f+=`?${b.toString()}`),console.log("Fetching from:",f);const j=await fetch(f,{credentials:"same-origin",headers:{Accept:"application/json"}});if(console.log("Response status:",j.status),j.ok){const S=await j.json();console.log("Fetched data:",S);const E=S.pagination!==void 0,M=E?S.data:S;switch(E&&(Gt(S.pagination.total),Qt(S.pagination.last_page),je(S.pagination.current_page)),a){case"branches":console.log("Setting branches:",M),Y(M);break;case"devices":T(M);break;case"alerts":ae(M);break;case"locations":A(M);break;case"users":B(M);break;case"brands":C(M);break;case"models":Q(M);break;case"history":D(M);break}(a==="locations"||a==="location-folders")&&await ss()}else{console.error("Failed to fetch:",j.status,j.statusText);try{const S=await j.json();console.error("Error response:",S)}catch{console.error("Could not parse error response")}a==="devices"&&T([])}}catch(t){console.error("Error fetching data:",t),a==="devices"&&T([])}finally{I(!1)}},Ze=async()=>{const t=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");if(t)return t;try{if((await fetch("/sanctum/csrf-cookie",{credentials:"same-origin"})).ok)return document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}catch{console.log("CSRF cookie endpoint not available (this is normal for API routes)")}return""},as=t=>{const f=Je(t);k("create"),g(null),z(f),r(!0)},se=(t,f)=>{const b=Je(f);k("edit"),g(t),z(b),r(!0)},de=(t,f)=>{const b=Je(f);k("delete"),g(t),z(b),r(!0)},rs=t=>{k("acknowledge"),g(t),r(!0)},ls=()=>{if(N.length===0){alert("Please select devices to acknowledge");return}k("bulk_acknowledge"),r(!0)},ns=()=>{if(N.length===0){alert("Please select devices to edit");return}k("bulk_edit"),r(!0)},ds=t=>{_(t),m(!0)},is=async()=>{try{const t=new URLSearchParams;l?.id&&t.append("branch_id",l.id.toString()),te!=="all"&&t.append("category",te),P!=="all"&&t.append("status",P);const f=`/api/devices/export/csv${t.toString()?"?"+t.toString():""}`,b=await fetch(f,{credentials:"same-origin",headers:{Accept:"application/vnd.ms-excel"}});if(b.ok){const j=await b.blob(),S=document.createElement("a");S.href=URL.createObjectURL(j),S.download=`devices_export_${new Date().toISOString().split("T")[0]}.xls`,document.body.appendChild(S),S.click(),document.body.removeChild(S),URL.revokeObjectURL(S.href)}else{const j=await b.json().catch(()=>({error:"Unknown error"}));console.error("Export failed:",b.statusText,j),alert(`Failed to export devices: ${j.error||b.statusText}`)}}catch(t){console.error("Error exporting Excel:",t),alert("Failed to export devices. Please ensure PhpSpreadsheet is installed.")}},os=async()=>{try{const t=await fetch("/api/devices/import/csv/template",{credentials:"same-origin",headers:{Accept:"text/csv"}});if(t.ok){const f=await t.blob(),b=document.createElement("a");return b.href=URL.createObjectURL(f),b.download=`device_import_template_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(b),b.click(),document.body.removeChild(b),URL.revokeObjectURL(b.href),!0}else return alert("Failed to download template"),!1}catch(t){return console.error("Error downloading template:",t),alert("Failed to download template"),!1}},ye=n.useRef(null),cs=async()=>{confirm(`Do you want to download the CSV template first?

Click OK to download template
Click Cancel to proceed with file selection`)?(await os(),confirm(`Template downloaded!

Do you want to import a CSV file now?`)&&ye.current&&ye.current.click()):ye.current&&ye.current.click()},xs=async t=>{const f=t.target.files?.[0];if(!f)return;if(!f.name.endsWith(".csv")&&!f.name.endsWith(".txt")){alert("Please select a CSV file (.csv or .txt)");return}const b=confirm(`Import devices from CSV?

Click OK to update existing devices (by IP address or ID)
Click Cancel to skip existing devices`);try{I(!0);const j=new FormData;j.append("file",f),j.append("branch_id",l?.id?.toString()||""),j.append("update_existing",b?"1":"0");const S=await Ze(),E=await fetch("/api/devices/import/csv",{method:"POST",headers:{Accept:"application/json","X-CSRF-TOKEN":S},credentials:"same-origin",body:j});if(E.ok){const M=await E.json(),Qe=`Import completed!

âœ… Imported: ${M.results.imported}
ðŸ”„ Updated: ${M.results.updated}
â­ï¸ Skipped: ${M.results.skipped}`+(M.results.errors.length>0?`

âš ï¸ Errors:
${M.results.errors.slice(0,5).join(`
`)}${M.results.errors.length>5?`
... and ${M.results.errors.length-5} more`:""}`:"");alert(Qe),await J()}else{const M=await E.json();alert(`Import failed: ${M.error||"Unknown error"}`)}}catch(j){console.error("Error importing CSV:",j),alert("Failed to import devices. Please check the file format and try again.")}finally{I(!1),t.target.value=""}},us=async()=>{I(!0);try{const f={branches:"/api/branches",devices:"/api/devices",alerts:"/api/alerts",locations:"/api/locations","location-folders":"/api/location-folders",users:"/api/users",brands:"/api/brands",models:"/api/models"}[w];if(!f){console.error("No API endpoint for entity:",w);return}const b=o==="create"?f:`${f}/${h?.id}`,j=document.getElementById("entity-modal-form");if(!j){console.error("Entity form not found"),I(!1);return}const S=new FormData(j),E={};if(S.forEach((y,$)=>{const O=$.endsWith("[]")?$.slice(0,-2):$;if(!(O==="location_id"&&y==="")){if(O==="location_folder_id"&&y===""){E[O]=null;return}O==="hardware_detail_id"&&y===""||($.endsWith("[]")?(Array.isArray(E[O])||(E[O]=[]),y!==""&&E[O].push(y)):E[O]=y)}}),w==="devices"&&E.managed_by_ids_json)try{const y=JSON.parse(E.managed_by_ids_json);Array.isArray(y)&&(E.managed_by_ids=Array.from(new Set(y.map($=>Number($)).filter($=>!Number.isNaN($))))),delete E.managed_by_ids_json}catch(y){console.error("Failed to parse managed_by_ids_json:",y)}else Array.isArray(E.managed_by_ids)&&(E.managed_by_ids=Array.from(new Set(E.managed_by_ids.map(y=>Number(y)).filter(y=>!Number.isNaN(y)))));w==="devices"&&!E.managed_by_ids&&(E.managed_by_ids=[]),["is_active","acknowledged","resolved"].forEach(y=>{const $=j.querySelector(`input[name="${y}"]`);$&&(E[y]=$.checked)}),console.log("Saving data:",E);const Qe=await Ze(),ks="POST",Et=o==="create"?E:{...E,_method:"PUT"};console.log("Request data:",Et);const et=await fetch(b,{method:ks,headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":Qe},credentials:"same-origin",body:JSON.stringify(Et)});if(et.ok){const y=await et.json();if(console.log("Save response:",y),await J(),w==="location-folders")try{const $=await fetch("/api/location-folders",{credentials:"same-origin",headers:{Accept:"application/json"}});if($.ok){const O=await $.json();re(O)}}catch($){console.error("Error refreshing location folders:",$)}w==="models"&&y&&y.id&&Q($=>{const O=$.map(We=>We.id===y.id?y:We);return O.find(We=>We.id===y.id)||O.push(y),console.log("Updated models array with response data"),O}),r(!1),g(null)}else{const y=await et.json();console.error("Save error:",y),alert(`Failed to save: ${y.error||y.message||"Unknown error"}
${JSON.stringify(y.messages||{},null,2)}`)}}catch(t){console.error("Error saving:",t),alert("Failed to save. Please try again.")}finally{I(!1)}},ms=async()=>{I(!0);try{const f={branches:"/api/branches",devices:"/api/devices",alerts:"/api/alerts",locations:"/api/locations","location-folders":"/api/location-folders",users:"/api/users",brands:"/api/brands",models:"/api/models"}[w];if(!f){console.error("No API endpoint for entity:",w);return}const b=`${f}/${h?.id}`,j=await Ze(),S=await fetch(b,{method:"DELETE",headers:{Accept:"application/json","X-CSRF-TOKEN":j},credentials:"same-origin"});if(S.ok)await J(),r(!1),g(null);else{const E=await S.json();alert(E.error||"Failed to delete")}}catch(t){console.error("Error deleting:",t),alert("Failed to delete. Please try again.")}finally{I(!1)}},_t=async()=>{if(N.length===0){alert("Please select items to delete");return}if(confirm(`Are you sure you want to delete ${N.length} selected item(s)?`)){it(!0);try{const f={branches:"/api/branches",devices:"/api/devices",alerts:"/api/alerts",locations:"/api/locations",users:"/api/users",brands:"/api/brands",models:"/api/models",history:"/api/activity-logs"}[a];if(!f)return;const b=N.map(j=>fetch(`${f}/${j}`,{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}}));await Promise.all(b),await J(),u([]),alert(`Successfully deleted ${N.length} item(s)`)}catch(t){console.error("Error bulk deleting:",t),alert("Failed to delete some items. Please try again.")}finally{it(!1)}}},oe=t=>{u(f=>f.includes(t)?f.filter(b=>b!==t):[...f,t])},hs=()=>{const t=Ge();N.length===t.length?u([]):u(t.map(f=>f.id))},bs=G.filter(t=>{const f=ee===""||t.name.toLowerCase().includes(ee.toLowerCase())||t.ip_address.toLowerCase().includes(ee.toLowerCase())||t.mac_address&&t.mac_address.toLowerCase().includes(ee.toLowerCase())||t.barcode&&t.barcode.toLowerCase().includes(ee.toLowerCase())||t.serial_number&&t.serial_number.toLowerCase().includes(ee.toLowerCase()),b=P==="all"||P==="online"&&t.status==="online"||P==="warning"&&t.status==="warning"||P==="offline"&&t.status==="offline"&&!t.offline_acknowledged||P==="offline_ack"&&t.status==="offline"&&t.offline_acknowledged,j=te==="all"||t.type===te,S=ne==="all"||ne==="active"&&t.is_active||ne==="inactive"&&!t.is_active;return f&&b&&j&&S}),Ce=W.filter(t=>ve===""||t.name.toLowerCase().includes(ve.toLowerCase())||t.description&&t.description.toLowerCase().includes(ve.toLowerCase())),Se=le.filter(t=>{const f=me===""||t.name.toLowerCase().includes(me.toLowerCase())||t.code.toLowerCase().includes(me.toLowerCase())||t.description&&t.description.toLowerCase().includes(me.toLowerCase()),b=Ne==="all"||Ne==="active"&&t.is_active||Ne==="inactive"&&!t.is_active;return f&&b}),_e=p.filter(t=>he===""||t.name.toLowerCase().includes(he.toLowerCase())||t.email.toLowerCase().includes(he.toLowerCase())||t.role&&t.role.toLowerCase().includes(he.toLowerCase())),Ae=d.filter(t=>we===""||t.name.toLowerCase().includes(we.toLowerCase())||t.description&&t.description.toLowerCase().includes(we.toLowerCase())),Ee=v.filter(t=>be===""||t.name.toLowerCase().includes(be.toLowerCase())||t.description&&t.description.toLowerCase().includes(be.toLowerCase())||t.brand?.name&&t.brand.name.toLowerCase().includes(be.toLowerCase())),Ge=()=>{switch(a){case"branches":return Se;case"devices":return bs;case"alerts":return Le;case"locations":return Ce;case"users":return _e;case"brands":return Ae;case"models":return Ee;case"history":return Z;default:return[]}},At=async t=>{ze(!0);try{const f=await fetch(`/devices/${t}/comments`);if(f.ok){const b=await f.json();ie(b.comments)}}catch(f){console.error("Error fetching comments:",f)}finally{ze(!1)}},ps=t=>{$e(t),Fe(!0),At(t.id)},fs=()=>{Fe(!1),$e(null),ie([])},gs=async t=>{if(confirm("Are you sure you want to delete this comment?"))try{const f=await fetch(`/comments/${t}`,{method:"DELETE"});if(f.ok)ie(b=>b.filter(j=>j.id!==t));else{const b=await f.json();alert(`Failed to delete comment: ${b.error||"Unknown error"}`)}}catch(f){console.error("Error deleting comment:",f),alert("Network error while deleting comment")}};n.useEffect(()=>{const t=f=>{console.error("Configuration page error:",f)};return window.addEventListener("error",t),()=>window.removeEventListener("error",t)},[]),n.useEffect(()=>{c&&a==="devices"&&p.length===0&&fetch("/api/users",{credentials:"same-origin",headers:{Accept:"application/json"}}).then(t=>t.json()).then(t=>{B(t)}).catch(t=>console.error("Error fetching users:",t))},[c,a]);const Le=R.filter(t=>{const f=ue===""||t.title.toLowerCase().includes(ue.toLowerCase())||t.message.toLowerCase().includes(ue.toLowerCase())||t.device?.name&&t.device.name.toLowerCase().includes(ue.toLowerCase()),b=Ve==="all"||t.status===Ve,j=Ue==="all"||t.severity===Ue;return f&&b&&j}).sort((t,f)=>{let b=t[He],j=f[He];return b==null?1:j==null?-1:(b=String(b).toLowerCase(),j=String(j).toLowerCase(),Ye==="asc"?b<j?-1:b>j?1:0:b>j?-1:b<j?1:0)});return e.jsxs(vs,{title:s("config.title"),children:[e.jsxs("div",{className:"space-y-6",children:[l?.id&&e.jsx("div",{className:"rounded-xl border border-blue-200 bg-gradient-to-r from-blue-50 to-indigo-50 p-4 dark:border-blue-900/30 dark:from-blue-950/20 dark:to-indigo-950/20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-lg bg-gradient-to-br from-blue-500 to-indigo-600 p-2 shadow-lg",children:e.jsx(pe,{className:"size-5 text-white"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-blue-900 dark:text-blue-100",children:["Managing: ",l.name]}),e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[l.description," â€¢ Branch Code: ",l.code]})]})]})}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"bg-gradient-to-r from-slate-900 to-slate-700 bg-clip-text text-3xl font-bold text-transparent dark:from-white dark:to-slate-300",children:s("config.title")}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:s("config.subtitle")})]})}),e.jsx("div",{className:"flex gap-2 overflow-x-auto rounded-xl border border-slate-200/50 bg-white p-2 shadow-lg dark:border-slate-700/50 dark:bg-slate-800",children:["branches","devices","alerts","locations","brands","models","users","history"].map(t=>e.jsx("button",{onClick:()=>i(t),className:`whitespace-nowrap rounded-lg px-4 py-2 text-sm font-medium transition-all ${a===t?"bg-gradient-to-r from-blue-500 to-indigo-500 text-white shadow-lg":"text-slate-600 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-700"}`,children:t.charAt(0).toUpperCase()+t.slice(1)},t))}),a==="locations"&&e.jsx("div",{className:"mt-4",children:Yt}),e.jsxs("div",{className:"rounded-2xl border border-slate-200/50 bg-white shadow-lg dark:border-slate-700/50 dark:bg-slate-800",children:[e.jsxs("div",{className:"flex flex-col gap-4 border-b border-slate-200/50 bg-gradient-to-r from-slate-50 to-slate-100 p-6 dark:border-slate-700/50 dark:from-slate-900/50 dark:to-slate-800/50 xl:flex-row xl:items-center xl:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-xl bg-gradient-to-br from-purple-500 to-pink-600 p-3 shadow-lg",children:e.jsx(pe,{className:"size-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:Jt}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:Xt})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("button",{onClick:()=>J(),disabled:U,className:"flex items-center gap-2 rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 shadow-sm transition-all hover:bg-slate-50 disabled:opacity-50 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600",title:"Refresh data",children:[e.jsx(ys,{className:`size-4 ${U?"animate-spin":""}`}),"Refresh"]}),a!=="history"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:hs,className:"flex items-center gap-2 rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 shadow-sm transition-all hover:bg-slate-50 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600",title:N.length===Ge().length?"Deselect All":"Select All",children:[e.jsx(Cs,{className:"size-4"}),N.length===Ge().length?"Deselect All":"Select All"]}),N.length>0&&a==="devices"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:ls,className:"flex items-center gap-2 rounded-lg bg-gradient-to-r from-orange-500 to-orange-600 px-4 py-2 text-sm font-medium text-white shadow-lg transition-all hover:scale-105",title:`Acknowledge offline for ${N.length} selected device(s)`,children:[e.jsx(fe,{className:"size-4"}),"Acknowledge Offline (",N.length,")"]}),e.jsxs("button",{onClick:ns,className:"flex items-center gap-2 rounded-lg bg-gradient-to-r from-purple-500 to-purple-600 px-4 py-2 text-sm font-medium text-white shadow-lg transition-all hover:scale-105",title:`Edit ${N.length} selected device(s)`,children:[e.jsx(X,{className:"size-4"}),"Bulk Edit (",N.length,")"]}),e.jsxs("button",{onClick:_t,disabled:dt,className:"flex items-center gap-2 rounded-lg bg-gradient-to-r from-red-500 to-red-600 px-4 py-2 text-sm font-medium text-white shadow-lg transition-all hover:scale-105 disabled:opacity-50",title:`Delete ${N.length} selected item(s)`,children:[e.jsx(q,{className:"size-4"}),"Delete Selected (",N.length,")"]})]}),N.length>0&&a!=="devices"&&e.jsxs("button",{onClick:_t,disabled:dt,className:"flex items-center gap-2 rounded-lg bg-gradient-to-r from-red-500 to-red-600 px-4 py-2 text-sm font-medium text-white shadow-lg transition-all hover:scale-105 disabled:opacity-50",title:`Delete ${N.length} selected item(s)`,children:[e.jsx(q,{className:"size-4"}),"Delete Selected (",N.length,")"]}),a==="devices"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:is,className:"flex items-center gap-2 rounded-lg bg-gradient-to-r from-emerald-500 to-green-600 px-4 py-2 text-sm font-medium text-white shadow-lg transition-all hover:scale-105",title:"Export devices to Excel (.xls)",children:[e.jsx(_s,{className:"size-4"}),"Export Excel"]}),e.jsxs("button",{onClick:cs,className:"flex items-center gap-2 rounded-lg bg-gradient-to-r from-purple-500 to-pink-600 px-4 py-2 text-sm font-medium text-white shadow-lg transition-all hover:scale-105",title:"Import devices from CSV file",children:[e.jsx(Ss,{className:"size-4"}),"Import CSV"]}),e.jsx("input",{ref:ye,type:"file",accept:".csv,.txt",onChange:xs,className:"hidden"})]}),e.jsxs("button",{onClick:()=>as(),className:"flex items-center gap-2 rounded-lg bg-gradient-to-r from-blue-500 to-indigo-500 px-4 py-2 text-sm font-medium text-white shadow-lg transition-all hover:scale-105",children:[e.jsx($t,{className:"size-4"}),Zt]})]})]})]}),a==="devices"&&e.jsxs("div",{className:"border-b border-slate-200/50 bg-gradient-to-r from-slate-50 to-slate-100 p-4 dark:border-slate-700/50 dark:from-slate-900/50 dark:to-slate-800/50",children:[e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ce,{className:"absolute left-3 top-1/2 size-5 -translate-y-1/2 text-slate-400"}),e.jsx("input",{ref:Re,type:"text",placeholder:"Search by name, IP, MAC, barcode, or serial number...",value:Oe,onChange:t=>xt(t.target.value),className:"w-full rounded-xl border border-slate-300 bg-white py-2.5 pl-10 pr-4 text-sm font-medium text-slate-900 shadow-sm transition-all focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white dark:focus:border-blue-400"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("select",{value:te,onChange:t=>ht(t.target.value),className:"rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 shadow-sm transition-all hover:bg-slate-50 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600",children:[e.jsx("option",{value:"all",children:"All Categories"}),e.jsx("option",{value:"switches",children:"Switches"}),e.jsx("option",{value:"servers",children:"Servers"}),e.jsx("option",{value:"wifi",children:"WiFi"}),e.jsx("option",{value:"tas",children:"TAS"}),e.jsx("option",{value:"cctv",children:"CCTV"})]}),e.jsxs("select",{value:P,onChange:t=>mt(t.target.value),className:"rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 shadow-sm transition-all hover:bg-slate-50 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"online",children:"Online"}),e.jsx("option",{value:"warning",children:"Warning"}),e.jsx("option",{value:"offline",children:"Offline"}),e.jsx("option",{value:"offline_ack",children:"Acknowledged"})]}),e.jsxs("select",{value:ne,onChange:t=>bt(t.target.value),className:"rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 shadow-sm transition-all hover:bg-slate-50 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600",children:[e.jsx("option",{value:"all",children:"All Devices"}),e.jsx("option",{value:"active",children:"Active Only"}),e.jsx("option",{value:"inactive",children:"Inactive Only"})]}),(Oe||P!=="all"||te!=="all"||ne!=="all")&&e.jsxs("button",{onClick:()=>{xt(""),ut(""),mt("all"),ht("all"),bt("all")},className:"flex items-center gap-2 rounded-lg border border-red-300 bg-red-50 px-4 py-2 text-sm font-medium text-red-700 shadow-sm transition-all hover:bg-red-100 dark:border-red-700 dark:bg-red-900/20 dark:text-red-400 dark:hover:bg-red-900/30",children:[e.jsx(H,{className:"size-4"}),"Clear Filters"]})]})]}),e.jsxs("div",{className:"mt-3 text-xs font-medium text-slate-600 dark:text-slate-400",children:["Showing ",G.length," device(s) on this page",Ie>0&&e.jsxs("span",{className:"ml-2 text-blue-600 dark:text-blue-400",children:["(Total: ",Ie," device(s) matching filters across all pages)"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:U?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"mx-auto mb-4 size-12 animate-spin rounded-full border-4 border-slate-300 border-t-blue-600"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading..."})]}):e.jsxs(e.Fragment,{children:[a==="branches"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border-b border-slate-200/50 bg-gradient-to-r from-slate-50 to-slate-100 p-4 dark:border-slate-700/50 dark:from-slate-900/50 dark:to-slate-800/50",children:[e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ce,{className:"absolute left-3 top-1/2 size-5 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search by name, code, or description...",value:me,onChange:t=>jt(t.target.value),className:"w-full rounded-xl border border-slate-300 bg-white py-2.5 pl-10 pr-4 text-sm font-medium text-slate-900 shadow-sm transition-all focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white dark:focus:border-blue-400"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("select",{value:Ne,onChange:t=>vt(t.target.value),className:"rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 shadow-sm transition-all hover:bg-slate-50 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600",children:[e.jsx("option",{value:"all",children:"All Branches"}),e.jsx("option",{value:"active",children:"Active Only"}),e.jsx("option",{value:"inactive",children:"Inactive Only"})]}),(me||Ne!=="all")&&e.jsxs("button",{onClick:()=>{jt(""),vt("all")},className:"flex items-center gap-2 rounded-lg border border-red-300 bg-red-50 px-4 py-2 text-sm font-medium text-red-700 shadow-sm transition-all hover:bg-red-100 dark:border-red-700 dark:bg-red-900/20 dark:text-red-400 dark:hover:bg-red-900/30",children:[e.jsx(H,{className:"size-4"}),"Clear Filters"]})]})]}),e.jsxs("div",{className:"mt-3 text-xs font-medium text-slate-600 dark:text-slate-400",children:["Showing ",Se.length," of ",le.length," branch(es)",Se.length!==le.length&&e.jsxs("span",{className:"ml-2 text-blue-600 dark:text-blue-400",children:["(",le.length-Se.length," hidden by filters)"]})]})]}),e.jsx(ra,{branches:Se,onEdit:se,onDelete:de,selectedIds:N,onToggleSelection:oe})]}),a==="devices"&&e.jsxs(e.Fragment,{children:[e.jsx(ea,{devices:G,onView:ds,onEdit:se,onDelete:de,onAcknowledgeOffline:rs,onComments:ps,sortField:qe,sortDirection:Pe,onSort:t=>{qe===t?Ct(Pe==="asc"?"desc":"asc"):(es(t),Ct("asc"))},selectedIds:N,onToggleSelection:oe}),e.jsx(Mt,{currentPage:Be,totalPages:ct,totalItems:Ie,perPage:Te,onPageChange:je,onPerPageChange:ot})]}),a==="alerts"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border-b border-slate-200/50 bg-gradient-to-r from-slate-50 to-slate-100 p-4 dark:border-slate-700/50 dark:from-slate-900/50 dark:to-slate-800/50",children:[e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ce,{className:"absolute left-3 top-1/2 size-5 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search by title, message, or device name...",value:ue,onChange:t=>pt(t.target.value),className:"w-full rounded-xl border border-slate-300 bg-white py-2.5 pl-10 pr-4 text-sm font-medium text-slate-900 shadow-sm transition-all focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white dark:focus:border-blue-400"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("select",{value:Ue,onChange:t=>gt(t.target.value),className:"rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 shadow-sm transition-all hover:bg-slate-50 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600",children:[e.jsx("option",{value:"all",children:"All Severities"}),e.jsx("option",{value:"critical",children:"Critical"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"low",children:"Low"})]}),e.jsxs("select",{value:Ve,onChange:t=>ft(t.target.value),className:"rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 shadow-sm transition-all hover:bg-slate-50 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"acknowledged",children:"Acknowledged"}),e.jsx("option",{value:"resolved",children:"Resolved"})]}),(ue||Ve!=="all"||Ue!=="all")&&e.jsxs("button",{onClick:()=>{pt(""),ft("all"),gt("all")},className:"flex items-center gap-2 rounded-lg border border-red-300 bg-red-50 px-4 py-2 text-sm font-medium text-red-700 shadow-sm transition-all hover:bg-red-100 dark:border-red-700 dark:bg-red-900/20 dark:text-red-400 dark:hover:bg-red-900/30",children:[e.jsx(H,{className:"size-4"}),"Clear Filters"]})]})]}),e.jsxs("div",{className:"mt-3 text-xs font-medium text-slate-600 dark:text-slate-400",children:["Showing ",Le.length," of ",R.length," alert(s)",Le.length!==R.length&&e.jsxs("span",{className:"ml-2 text-blue-600 dark:text-blue-400",children:["(",R.length-Le.length," hidden by filters)"]})]})]}),e.jsx(ta,{alerts:Le,onEdit:se,onDelete:de,sortField:He,sortDirection:Ye,onSort:t=>{He===t?St(Ye==="asc"?"desc":"asc"):(ts(t),St("asc"))},selectedIds:N,onToggleSelection:oe}),e.jsx(Mt,{currentPage:Be,totalPages:ct,totalItems:Ie,perPage:Te,onPageChange:je,onPerPageChange:ot})]}),a==="locations"&&e.jsx("div",{className:"space-y-6",children:F==="folders"?e.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white shadow-lg dark:border-slate-700 dark:bg-slate-900/60",children:e.jsx(sa,{folders:V,onEdit:t=>se(t,"location-folders"),onDelete:t=>de(t,"location-folders")})}):e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white shadow-lg dark:border-slate-700 dark:bg-slate-900/60",children:[e.jsx("div",{className:"flex flex-col gap-3 border-b border-slate-100 px-4 py-4 dark:border-slate-800 lg:flex-row lg:items-center lg:justify-between",children:e.jsxs("div",{className:"flex w-full flex-col gap-3 sm:flex-row sm:items-center",children:[e.jsxs("div",{className:"relative w-full sm:max-w-sm",children:[e.jsx(ce,{className:"absolute left-3 top-1/2 size-5 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search by name or description...",value:ve,onChange:t=>kt(t.target.value),className:"w-full rounded-full border border-slate-300 bg-white py-2.5 pl-10 pr-4 text-sm font-medium text-slate-900 shadow-sm transition-all focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-800 dark:text-white dark:focus:border-blue-400"})]}),ve&&e.jsxs("button",{type:"button",onClick:()=>kt(""),className:"inline-flex items-center gap-2 rounded-full border border-red-200 bg-red-50 px-4 py-2 text-sm font-semibold text-red-700 transition hover:bg-red-100 dark:border-red-800 dark:bg-red-900/20 dark:text-red-300",children:[e.jsx(H,{className:"size-4"}),"Clear Search"]})]})}),e.jsxs("div",{className:"border-b border-slate-100 px-4 py-2.5 text-xs font-medium text-slate-600 dark:border-slate-800 dark:text-slate-400",children:["Showing ",Ce.length," of ",W.length," location(s)",Ce.length!==W.length&&e.jsxs("span",{className:"ml-2 text-blue-600 dark:text-blue-400",children:["(",W.length-Ce.length," hidden by filters)"]})]}),e.jsx(aa,{locations:Ce,onEdit:se,onDelete:de,selectedIds:N,onToggleSelection:oe})]})}),a==="users"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border-b border-slate-200/50 bg-gradient-to-r from-slate-50 to-slate-100 p-4 dark:border-slate-700/50 dark:from-slate-900/50 dark:to-slate-800/50",children:[e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ce,{className:"absolute left-3 top-1/2 size-5 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search by name, email, or role...",value:he,onChange:t=>Nt(t.target.value),className:"w-full rounded-xl border border-slate-300 bg-white py-2.5 pl-10 pr-4 text-sm font-medium text-slate-900 shadow-sm transition-all focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white dark:focus:border-blue-400"})]}),he&&e.jsxs("button",{onClick:()=>Nt(""),className:"flex items-center gap-2 rounded-lg border border-red-300 bg-red-50 px-4 py-2 text-sm font-medium text-red-700 shadow-sm transition-all hover:bg-red-100 dark:border-red-700 dark:bg-red-900/20 dark:text-red-400 dark:hover:bg-red-900/30",children:[e.jsx(H,{className:"size-4"}),"Clear Search"]})]}),e.jsxs("div",{className:"mt-3 text-xs font-medium text-slate-600 dark:text-slate-400",children:["Showing ",_e.length," of ",p.length," user(s)",_e.length!==p.length&&e.jsxs("span",{className:"ml-2 text-blue-600 dark:text-blue-400",children:["(",p.length-_e.length," hidden by filters)"]})]})]}),e.jsx(la,{users:_e,onEdit:se,onDelete:de,selectedIds:N,onToggleSelection:oe})]}),a==="brands"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border-b border-slate-200/50 bg-gradient-to-r from-slate-50 to-slate-100 p-4 dark:border-slate-700/50 dark:from-slate-900/50 dark:to-slate-800/50",children:[e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ce,{className:"absolute left-3 top-1/2 size-5 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search by name or description...",value:we,onChange:t=>wt(t.target.value),className:"w-full rounded-xl border border-slate-300 bg-white py-2.5 pl-10 pr-4 text-sm font-medium text-slate-900 shadow-sm transition-all focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white dark:focus:border-blue-400"})]}),we&&e.jsxs("button",{onClick:()=>wt(""),className:"flex items-center gap-2 rounded-lg border border-red-300 bg-red-50 px-4 py-2 text-sm font-medium text-red-700 shadow-sm transition-all hover:bg-red-100 dark:border-red-700 dark:bg-red-900/20 dark:text-red-400 dark:hover:bg-red-900/30",children:[e.jsx(H,{className:"size-4"}),"Clear Search"]})]}),e.jsxs("div",{className:"mt-3 text-xs font-medium text-slate-600 dark:text-slate-400",children:["Showing ",Ae.length," of ",d.length," brand(s)",Ae.length!==d.length&&e.jsxs("span",{className:"ml-2 text-blue-600 dark:text-blue-400",children:["(",d.length-Ae.length," hidden by filters)"]})]})]}),e.jsx(na,{brands:Ae,onEdit:se,onDelete:de,selectedIds:N,onToggleSelection:oe})]}),a==="models"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border-b border-slate-200/50 bg-gradient-to-r from-slate-50 to-slate-100 p-4 dark:border-slate-700/50 dark:from-slate-900/50 dark:to-slate-800/50",children:[e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ce,{className:"absolute left-3 top-1/2 size-5 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search by name, description, or brand...",value:be,onChange:t=>yt(t.target.value),className:"w-full rounded-xl border border-slate-300 bg-white py-2.5 pl-10 pr-4 text-sm font-medium text-slate-900 shadow-sm transition-all focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white dark:focus:border-blue-400"})]}),be&&e.jsxs("button",{onClick:()=>yt(""),className:"flex items-center gap-2 rounded-lg border border-red-300 bg-red-50 px-4 py-2 text-sm font-medium text-red-700 shadow-sm transition-all hover:bg-red-100 dark:border-red-700 dark:bg-red-900/20 dark:text-red-400 dark:hover:bg-red-900/30",children:[e.jsx(H,{className:"size-4"}),"Clear Search"]})]}),e.jsxs("div",{className:"mt-3 text-xs font-medium text-slate-600 dark:text-slate-400",children:["Showing ",Ee.length," of ",v.length," model(s)",Ee.length!==v.length&&e.jsxs("span",{className:"ml-2 text-blue-600 dark:text-blue-400",children:["(",v.length-Ee.length," hidden by filters)"]})]})]}),e.jsx(da,{models:Ee,onEdit:se,onDelete:de,selectedIds:N,onToggleSelection:oe})]}),a==="history"&&e.jsx(xa,{activities:Z})]})})]})]}),c&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"w-full max-w-4xl my-8 rounded-2xl border border-slate-200 bg-white shadow-2xl dark:border-slate-700 dark:bg-slate-800",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200 p-6 dark:border-slate-700",children:[e.jsxs("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:[o==="create"&&`Create New ${Ke(w)}`,o==="edit"&&`Edit ${Ke(w)}`,o==="delete"&&`Delete ${Ke(w)}`,o==="acknowledge"&&"Acknowledge Offline Device",o==="bulk_acknowledge"&&`Bulk Acknowledge Offline (${N.length} devices)`,o==="bulk_edit"&&`Bulk Edit Devices (${N.length} devices)`]}),e.jsx("button",{onClick:()=>r(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:e.jsx(H,{className:"size-6"})})]}),e.jsx("div",{className:"max-h-[calc(100vh-250px)] overflow-y-auto p-6",children:o==="delete"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 rounded-lg bg-red-50 p-4 dark:bg-red-900/20",children:[e.jsx(De,{className:"size-6 text-red-600 dark:text-red-400"}),e.jsx("p",{className:"text-sm text-red-800 dark:text-red-400",children:"Are you sure you want to delete this item? This action cannot be undone."})]}),h&&e.jsx("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-4 dark:border-slate-700 dark:bg-slate-900",children:e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:"title"in h?h.title:"name"in h?h.name:`ID: ${h.id}`})})]}):o==="acknowledge"?e.jsx(ca,{device:h}):o==="bulk_acknowledge"?e.jsx(ia,{deviceIds:N,onSuccess:()=>{r(!1),u([]),J()}}):o==="bulk_edit"?e.jsx(oa,{deviceIds:N,onSuccess:()=>{r(!1),u([]),J()}}):e.jsx(ua,{entity:w,mode:o,data:h,users:p,locationFolders:V})}),e.jsxs("div",{className:"flex justify-end gap-3 border-t border-slate-200 p-6 dark:border-slate-700",children:[e.jsx("button",{onClick:()=>r(!1),disabled:U,className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-medium text-slate-700 transition-colors hover:bg-slate-50 dark:border-slate-600 dark:text-slate-300 dark:hover:bg-slate-700 disabled:opacity-50",children:"Cancel"}),o==="delete"?e.jsxs("button",{onClick:ms,disabled:U,className:"flex items-center gap-2 rounded-lg bg-red-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-red-700 disabled:opacity-50",children:[e.jsx(q,{className:"size-4"}),U?"Deleting...":"Delete"]}):e.jsxs("button",{onClick:us,disabled:U,className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-blue-700 disabled:opacity-50",children:[e.jsx(Bt,{className:"size-4"}),U?"Saving...":"Save"]})]})]})}),L&&x&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:e.jsxs("div",{className:"w-full max-w-4xl rounded-2xl bg-white shadow-2xl dark:bg-slate-800",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200 p-6 dark:border-slate-700",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Device Details"}),e.jsx("button",{onClick:()=>m(!1),className:"rounded-lg p-2 text-slate-500 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-700",children:e.jsx(H,{className:"size-5"})})]}),e.jsx("div",{className:"max-h-[70vh] overflow-y-auto p-6",children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Basic Information"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Device Name"}),e.jsx("p",{className:"mt-1 text-slate-900 dark:text-white",children:x.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"IP Address"}),e.jsx("p",{className:"mt-1 font-mono text-slate-900 dark:text-white",children:x.ip_address})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"MAC Address"}),e.jsx("p",{className:"mt-1 font-mono text-slate-900 dark:text-white",children:x.mac_address||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Barcode"}),e.jsx("p",{className:"mt-1 text-slate-900 dark:text-white",children:x.barcode})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Serial Number"}),e.jsx("p",{className:"mt-1 text-slate-900 dark:text-white",children:x.serial_number||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Category"}),e.jsx("p",{className:"mt-1 text-slate-900 dark:text-white",children:Pt(x.category)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Status"}),e.jsx("p",{className:"mt-1",children:e.jsx("span",{className:`inline-flex rounded-full px-2 py-1 text-xs font-medium ${x.status==="online"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":x.status==="warning"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}`,children:x.status})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Location & Management"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Branch"}),e.jsx("p",{className:"mt-1 text-slate-900 dark:text-white",children:x.branch?.name||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Location"}),e.jsx("p",{className:"mt-1 text-slate-900 dark:text-white",children:x.location?.name||x.location_name||"-"}),x.location?.id&&e.jsx("div",{className:"mt-2",children:e.jsx("a",{href:`/monitor/plan?location_id=${x.location.id}&deviceId=${x.id}&mode=config`,className:"inline-flex items-center gap-2 rounded-lg bg-blue-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-blue-700",children:"Open Floor Plan (Edit)"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Managed By"}),x.managed_by_user?e.jsxs("div",{className:"mt-1",children:[e.jsx("p",{className:"text-slate-900 dark:text-white",children:x.managed_by_user.name}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:x.managed_by_user.email}),e.jsx("span",{className:`mt-1 inline-flex rounded-full px-2 py-0.5 text-xs font-medium ${x.managed_by_user.role==="admin"?"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400"}`,children:x.managed_by_user.role}),Array.isArray(x.managed_by_users)&&x.managed_by_users.length>0&&e.jsxs("div",{className:"mt-3 space-y-1",children:[e.jsx("div",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Additional Managers"}),e.jsx("ul",{className:"space-y-1",children:x.managed_by_users.map(t=>e.jsxs("li",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-900 dark:text-white",children:t.name}),e.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:t.email})]},t.id))})]})]}):e.jsx("p",{className:"mt-1 text-slate-400 dark:text-slate-600",children:"Not assigned"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Hardware"}),x.hardware_detail?e.jsxs("div",{className:"mt-1",children:[e.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:x.hardware_detail.brand}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:x.hardware_detail.model})]}):e.jsx("p",{className:"mt-1 text-slate-400 dark:text-slate-600",children:"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Uptime"}),e.jsx("p",{className:"mt-1 text-slate-900 dark:text-white",children:Ys(x.uptime_minutes)})]}),x.response_time&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Response Time"}),e.jsxs("p",{className:"mt-1 text-slate-900 dark:text-white",children:[x.response_time,"ms"]})]}),x.status==="offline_ack"&&x.offline_reason&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Offline Reason"}),e.jsxs("div",{className:"mt-1 rounded-lg border border-blue-200 bg-blue-50 p-3 dark:border-blue-900/30 dark:bg-blue-950/30",children:[e.jsx("p",{className:"text-sm text-blue-900 dark:text-blue-200",children:x.offline_reason}),x.offline_acknowledged_by&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-blue-600 dark:text-blue-400",children:[e.jsxs("span",{children:["Acknowledged by ",x.offline_acknowledged_by]}),x.offline_acknowledged_at&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:new Date(x.offline_acknowledged_at).toLocaleString()})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(at,{className:"size-5"}),"Comments"]}),e.jsx(Gs,{deviceId:x.id})]})]})}),e.jsxs("div",{className:"flex justify-end gap-3 border-t border-slate-200 p-6 dark:border-slate-700",children:[e.jsx("button",{onClick:()=>{m(!1),se(x)},className:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700",children:"Edit Device"}),e.jsx("button",{onClick:()=>m(!1),className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 dark:border-slate-600 dark:text-slate-300 dark:hover:bg-slate-700",children:"Close"})]})]})}),Me&&K&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"w-full max-w-2xl my-8 rounded-2xl border border-slate-200 bg-white shadow-2xl dark:border-slate-700 dark:bg-slate-800",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200 p-6 dark:border-slate-700",children:[e.jsxs("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(at,{className:"size-5"}),"Comments - ",K.name]}),e.jsx("button",{onClick:fs,className:"rounded-lg p-2 text-slate-500 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-700",children:e.jsx(H,{className:"size-5"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-4 p-3 bg-slate-50 rounded-lg dark:bg-slate-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:K.name}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-mono",children:K.ip_address})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${K.status==="online"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":K.status==="warning"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}`,children:K.status})]})}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto mb-4",children:xe?e.jsx("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:"Loading comments..."}):ge.length===0?e.jsx("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:"No comments yet. Add the first comment!"}):ge.map(t=>e.jsxs("div",{className:"rounded-lg bg-slate-50 p-4 border border-slate-200 dark:bg-slate-700 dark:border-slate-600",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${t.type==="maintenance"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":t.type==="issue"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":t.type==="note"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}`,children:t.type}),e.jsx("span",{className:"font-medium text-sm text-slate-900 dark:text-white",children:t.author})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:new Date(t.created_at).toLocaleString()}),e.jsx("button",{onClick:()=>gs(t.id),className:"text-slate-400 hover:text-red-600 dark:text-slate-500 dark:hover:text-red-400 transition-colors",title:"Delete comment",children:e.jsx(q,{className:"size-3"})})]})]}),e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:t.comment})]},t.id))}),e.jsx("div",{className:"border-t border-slate-200 pt-4 dark:border-slate-700",children:e.jsx(Qs,{deviceId:K.id,onCommentAdded:()=>At(K.id)})})]})]})})]})}function Gs({deviceId:s}){const[l,a]=n.useState([]),[i,c]=n.useState(!1),r=n.useCallback(async()=>{c(!0);try{const o=await fetch(`/devices/${s}/comments`);if(o.ok){const k=await o.json();a(k.comments)}}catch(o){console.error("Error fetching comments:",o)}finally{c(!1)}},[s]);return n.useEffect(()=>{r()},[r]),i?e.jsx("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:"Loading comments..."}):l.length===0?e.jsx("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:"No comments yet for this device."}):e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:l.map(o=>e.jsxs("div",{className:"rounded-lg bg-slate-50 p-4 border border-slate-200 dark:bg-slate-700 dark:border-slate-600",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${o.type==="maintenance"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":o.type==="issue"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":o.type==="note"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}`,children:o.type}),e.jsx("span",{className:"font-medium text-sm text-slate-900 dark:text-white",children:o.author})]}),e.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:new Date(o.created_at).toLocaleString()})]}),e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:o.comment})]},o.id))})}function Qs({deviceId:s,onCommentAdded:l}){const[a,i]=n.useState(""),[c,r]=n.useState(""),[o,k]=n.useState("general"),[h,g]=n.useState(!1),L=async m=>{if(m.preventDefault(),!!a.trim()){g(!0);try{const x=await fetch(`/devices/${s}/comments`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({comment:a.trim(),author:c.trim()||"Admin",type:o})});if(x.ok)i(""),r(""),l();else{const _=await x.json();alert(`Failed to add comment: ${_.error||"Unknown error"}`)}}catch(x){console.error("Error adding comment:",x),alert("Network error while adding comment")}finally{g(!1)}}};return e.jsxs("form",{onSubmit:L,className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Your name (optional)",value:c,onChange:m=>r(m.target.value),className:"flex-1 rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white"}),e.jsxs("select",{value:o,onChange:m=>k(m.target.value),className:"rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white",children:[e.jsx("option",{value:"general",children:"General"}),e.jsx("option",{value:"maintenance",children:"Maintenance"}),e.jsx("option",{value:"issue",children:"Issue"}),e.jsx("option",{value:"note",children:"Note"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("textarea",{placeholder:"Add a comment...",value:a,onChange:m=>i(m.target.value),className:"flex-1 rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white",rows:3}),e.jsx("button",{type:"submit",disabled:!a.trim()||h,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors h-fit",children:h?"Adding...":"Add"})]})]})}function ea({devices:s,onView:l,onEdit:a,onDelete:i,onAcknowledgeOffline:c,onComments:r,sortField:o,sortDirection:k,onSort:h,selectedIds:g,onToggleSelection:L}){return s.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(pe,{className:"mx-auto mb-4 size-12 text-slate-400"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No devices found"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-500",children:'Click "Add New" to create your first device'})]}):e.jsx("div",{className:"overflow-x-auto -mx-4 sm:mx-0 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:e.jsxs("table",{className:"w-full min-w-[1200px] sm:min-w-0",children:[e.jsx("thead",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 border-b-2 border-slate-200 dark:border-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300 w-12",children:e.jsx("input",{type:"checkbox",checked:g.length===s.length&&s.length>0,onChange:()=>{g.length===s.length?s.forEach(m=>L(m.id)):s.forEach(m=>{g.includes(m.id)||L(m.id)})},className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsx("th",{onClick:()=>h("name"),className:"cursor-pointer px-3 sm:px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-800 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-1",children:["Name",o==="name"&&e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:k==="asc"?"â†‘":"â†“"})]})}),e.jsx("th",{onClick:()=>h("ip_address"),className:"cursor-pointer px-3 sm:px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-800",children:e.jsxs("div",{className:"flex items-center gap-1",children:["IP Address",o==="ip_address"&&e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:k==="asc"?"â†‘":"â†“"})]})}),e.jsx("th",{onClick:()=>h("category"),className:"cursor-pointer px-3 sm:px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-800",children:e.jsxs("div",{className:"flex items-center gap-1",children:["Category",o==="category"&&e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:k==="asc"?"â†‘":"â†“"})]})}),e.jsx("th",{onClick:()=>h("status"),className:"cursor-pointer px-3 sm:px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-800",children:e.jsxs("div",{className:"flex items-center gap-1",children:["Status",o==="status"&&e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:k==="asc"?"â†‘":"â†“"})]})}),e.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Active"}),e.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Branch"}),e.jsx("th",{className:"px-3 sm:px-6 py-3 text-right text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700 bg-white dark:bg-slate-800",children:s.map(m=>e.jsxs("tr",{className:`transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/50 ${m.is_active?"":"opacity-60 bg-slate-50/50 dark:bg-slate-800/50"}`,children:[e.jsx("td",{className:"px-3 sm:px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:g.includes(m.id),onChange:()=>L(m.id),className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsx("td",{className:"px-3 sm:px-6 py-4 text-sm font-medium text-slate-900 dark:text-white",children:m.name}),e.jsx("td",{className:"px-3 sm:px-6 py-4 text-sm text-slate-600 dark:text-slate-400 font-mono",children:m.ip_address}),e.jsx("td",{className:"px-3 sm:px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:e.jsx("span",{className:"rounded-full bg-slate-100 px-2 py-1 text-xs font-medium dark:bg-slate-700",children:Pt(m.category)})}),e.jsx("td",{className:"px-3 sm:px-6 py-4",children:e.jsx("span",{className:`inline-flex rounded-full px-2 py-1 text-xs font-medium ${m.status==="online"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":m.status==="warning"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":m.status==="maintenance"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}`,children:m.status})}),e.jsx("td",{className:"px-3 sm:px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center gap-1.5 rounded-full px-2.5 py-1 text-xs font-semibold ${m.is_active?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-slate-200 text-slate-600 dark:bg-slate-700 dark:text-slate-400"}`,children:m.is_active?e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"size-3"}),"Active"]}):e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"size-3"}),"Inactive"]})})}),e.jsx("td",{className:"px-3 sm:px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(st,{className:"size-3.5 text-slate-400"}),e.jsx("span",{children:m.branch?.name||"-"})]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[m.status==="offline"&&e.jsx("button",{onClick:()=>c(m),className:"rounded-lg p-2 text-orange-600 hover:bg-orange-50 dark:text-orange-400 dark:hover:bg-orange-900/30",title:"Acknowledge Offline",children:e.jsx(fe,{className:"size-4"})}),e.jsx("button",{onClick:()=>l(m),className:"rounded-lg p-2 text-green-600 hover:bg-green-50 dark:text-green-400 dark:hover:bg-green-900/30",title:"View Details",children:e.jsx(Es,{className:"size-4"})}),e.jsx("button",{onClick:()=>r(m),className:"rounded-lg p-2 text-purple-600 hover:bg-purple-50 dark:text-purple-400 dark:hover:bg-purple-900/30",title:"Manage Comments",children:e.jsx(at,{className:"size-4"})}),e.jsx("button",{onClick:()=>a(m),className:"rounded-lg p-2 text-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/30",children:e.jsx(X,{className:"size-4"})}),e.jsx("button",{onClick:()=>i(m),className:"rounded-lg p-2 text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/30",children:e.jsx(q,{className:"size-4"})})]})})]},m.id))})]})})}function ta({alerts:s,onEdit:l,onDelete:a,sortField:i,sortDirection:c,onSort:r,selectedIds:o,onToggleSelection:k}){return s.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(De,{className:"mx-auto mb-4 size-12 text-slate-400"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No alerts found"})]}):e.jsx("div",{className:"overflow-x-auto rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:e.jsxs("table",{className:"w-full min-w-[1000px]",children:[e.jsx("thead",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 border-b-2 border-slate-200 dark:border-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300 w-12",children:e.jsx("input",{type:"checkbox",checked:o.length===s.length&&s.length>0,onChange:()=>{o.length===s.length?s.forEach(h=>k(h.id)):s.forEach(h=>{o.includes(h.id)||k(h.id)})},className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Device"}),e.jsx("th",{onClick:()=>r("title"),className:"cursor-pointer px-3 sm:px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-800",children:e.jsxs("div",{className:"flex items-center gap-1",children:["Title",i==="title"&&e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:c==="asc"?"â†‘":"â†“"})]})}),e.jsx("th",{onClick:()=>r("severity"),className:"cursor-pointer px-3 sm:px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-800",children:e.jsxs("div",{className:"flex items-center gap-1",children:["Severity",i==="severity"&&e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:c==="asc"?"â†‘":"â†“"})]})}),e.jsx("th",{onClick:()=>r("status"),className:"cursor-pointer px-3 sm:px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-800",children:e.jsxs("div",{className:"flex items-center gap-1",children:["Status",i==="status"&&e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:c==="asc"?"â†‘":"â†“"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Acknowledged"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700 bg-white dark:bg-slate-800",children:s.map(h=>e.jsxs("tr",{className:"transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[e.jsx("td",{className:"px-3 sm:px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:o.includes(h.id),onChange:()=>k(h.id),className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsx("td",{className:"px-3 sm:px-6 py-4 text-sm font-medium text-slate-900 dark:text-white",children:h.device?.name||`Device #${h.device_id}`}),e.jsx("td",{className:"px-3 sm:px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:h.title}),e.jsx("td",{className:"px-3 sm:px-6 py-4",children:e.jsx("span",{className:`inline-flex rounded-full px-2 py-1 text-xs font-medium ${h.severity==="critical"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":h.severity==="warning"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400"}`,children:h.severity})}),e.jsx("td",{className:"px-3 sm:px-6 py-4",children:e.jsx("span",{className:`inline-flex rounded-full px-2 py-1 text-xs font-medium ${h.resolved?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":h.status==="active"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}`,children:h.resolved?"Resolved":h.status})}),e.jsx("td",{className:"px-3 sm:px-6 py-4",children:e.jsx("span",{className:`inline-flex rounded-full px-2 py-1 text-xs font-medium ${h.acknowledged?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}`,children:h.acknowledged?"Yes":"No"})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>l(h),className:"rounded-lg p-2 text-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/30",children:e.jsx(X,{className:"size-4"})}),e.jsx("button",{onClick:()=>a(h),className:"rounded-lg p-2 text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/30",children:e.jsx(q,{className:"size-4"})})]})})]},h.id))})]})})}function sa({folders:s,onEdit:l,onDelete:a}){return s.length===0?e.jsx("div",{className:"p-10 text-center text-sm text-slate-500 dark:text-slate-400",children:'No folders yet. Use the "Add New" button above to create one.'}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-[700px]",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 border-b border-slate-200 dark:border-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Folder Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Branch"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300 w-32",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700 bg-white dark:bg-slate-800",children:s.map(i=>e.jsxs("tr",{className:"transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-slate-900 dark:text-white",children:i.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:i.branch?.name||i.branch_id}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:i.description||"â€”"}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>l(i),className:"rounded-lg p-2 text-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/30",children:e.jsx(X,{className:"size-4"})}),e.jsx("button",{type:"button",onClick:()=>a(i),className:"rounded-lg p-2 text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/30",children:e.jsx(q,{className:"size-4"})})]})})]},i.id))})]})})}function aa({locations:s,onEdit:l,onDelete:a,selectedIds:i,onToggleSelection:c}){return s.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(pe,{className:"mx-auto mb-4 size-12 text-slate-400"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No locations found"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-500",children:'Click "Add New" to create your first location'})]}):e.jsx("div",{className:"overflow-x-auto rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:e.jsxs("table",{className:"w-full min-w-[800px]",children:[e.jsx("thead",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 border-b-2 border-slate-200 dark:border-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300 w-12",children:e.jsx("input",{type:"checkbox",checked:i.length===s.length&&s.length>0,onChange:()=>{i.length===s.length?s.forEach(r=>c(r.id)):s.forEach(r=>{i.includes(r.id)||c(r.id)})},className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Location Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Branch"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Folder"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700 bg-white dark:bg-slate-800",children:s.map(r=>{const o=r.location_folder?.name||r.main_block||"Ungrouped";return e.jsxs("tr",{className:"transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[e.jsx("td",{className:"px-3 sm:px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:i.includes(r.id),onChange:()=>c(r.id),className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsx("td",{className:"px-3 sm:px-6 py-4 text-sm font-medium text-slate-900 dark:text-white",children:r.name}),e.jsx("td",{className:"px-3 sm:px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:r.branch_id}),e.jsx("td",{className:"px-3 sm:px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:o}),e.jsx("td",{className:"px-3 sm:px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:r.description||"-"}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("a",{href:`/monitor/plan?location_id=${r.id}&mode=config`,className:"rounded-lg p-2 text-green-600 hover:bg-green-50 dark:text-green-400 dark:hover:bg-green-900/30",title:"Open Floor Plan (Edit)",children:e.jsx(Ft,{className:"size-4"})}),e.jsx("button",{onClick:()=>l(r),className:"rounded-lg p-2 text-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/30",children:e.jsx(X,{className:"size-4"})}),e.jsx("button",{onClick:()=>a(r),className:"rounded-lg p-2 text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/30",children:e.jsx(q,{className:"size-4"})})]})})]},r.id)})})]})})}function ra({branches:s,onEdit:l,onDelete:a,selectedIds:i,onToggleSelection:c}){return s.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(st,{className:"mx-auto mb-4 size-12 text-slate-400"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No branches found"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-500",children:'Click "Add New" to create your first branch'})]}):e.jsx("div",{className:"overflow-x-auto rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:e.jsxs("table",{className:"w-full min-w-[900px]",children:[e.jsx("thead",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 border-b-2 border-slate-200 dark:border-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300 w-12",children:e.jsx("input",{type:"checkbox",checked:i.length===s.length&&s.length>0,onChange:()=>{i.length===s.length?s.forEach(r=>c(r.id)):s.forEach(r=>{i.includes(r.id)||c(r.id)})},className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"#"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Address"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Active"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700 bg-white dark:bg-slate-800",children:s.map((r,o)=>e.jsxs("tr",{className:`transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/50 ${r.is_active?"":"opacity-60 bg-slate-50/50 dark:bg-slate-800/50"}`,children:[e.jsx("td",{className:"px-3 sm:px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:i.includes(r.id),onChange:()=>c(r.id),className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsxs("td",{className:"px-3 sm:px-6 py-4 text-sm font-medium text-slate-900 dark:text-white",children:["#",o+1]}),e.jsx("td",{className:"px-3 sm:px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"rounded-lg bg-gradient-to-br from-blue-500 to-indigo-600 p-2",children:e.jsx(st,{className:"size-4 text-white"})}),e.jsx("span",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:r.name})]})}),e.jsx("td",{className:"px-3 sm:px-6 py-4",children:e.jsx("span",{className:"rounded-full bg-slate-100 px-3 py-1 text-xs font-bold text-slate-700 dark:bg-slate-700 dark:text-slate-300",children:r.code})}),e.jsx("td",{className:"px-3 sm:px-6 py-4 text-sm text-slate-600 dark:text-slate-400 max-w-xs truncate",children:r.description||"-"}),e.jsx("td",{className:"px-3 sm:px-6 py-4 text-sm text-slate-600 dark:text-slate-400 max-w-xs truncate",children:r.address||"-"}),e.jsx("td",{className:"px-3 sm:px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center gap-1.5 rounded-full px-2.5 py-1 text-xs font-semibold ${r.is_active?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-slate-200 text-slate-600 dark:bg-slate-700 dark:text-slate-400"}`,children:r.is_active?e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"size-3"}),"Active"]}):e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"size-3"}),"Inactive"]})})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>l(r),className:"rounded-lg p-2 text-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/30 transition-colors",title:"Edit branch",children:e.jsx(X,{className:"size-4"})}),e.jsx("button",{onClick:()=>a(r),className:"rounded-lg p-2 text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/30 transition-colors",title:"Delete branch",children:e.jsx(q,{className:"size-4"})})]})})]},r.id))})]})})}function la({users:s,onEdit:l,onDelete:a,selectedIds:i,onToggleSelection:c}){return s.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(It,{className:"mx-auto mb-4 size-12 text-slate-400"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No users found"})]}):e.jsx("div",{className:"overflow-x-auto rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:e.jsxs("table",{className:"w-full min-w-[800px]",children:[e.jsx("thead",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 border-b-2 border-slate-200 dark:border-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300 w-12",children:e.jsx("input",{type:"checkbox",checked:i.length===s.length&&s.length>0,onChange:()=>{i.length===s.length?s.forEach(r=>c(r.id)):s.forEach(r=>{i.includes(r.id)||c(r.id)})},className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700 bg-white dark:bg-slate-800",children:s.map(r=>e.jsxs("tr",{className:"transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[e.jsx("td",{className:"px-3 sm:px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:i.includes(r.id),onChange:()=>c(r.id),className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsx("td",{className:"px-3 sm:px-6 py-4 text-sm font-medium text-slate-900 dark:text-white",children:r.name}),e.jsx("td",{className:"px-3 sm:px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:r.email}),e.jsx("td",{className:"px-3 sm:px-6 py-4",children:e.jsx("span",{className:`inline-flex rounded-full px-2 py-1 text-xs font-medium ${r.role==="admin"?"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400"}`,children:r.role})}),e.jsx("td",{className:"px-3 sm:px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:new Date(r.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>l(r),className:"rounded-lg p-2 text-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/30",children:e.jsx(X,{className:"size-4"})}),e.jsx("button",{onClick:()=>a(r),className:"rounded-lg p-2 text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/30",children:e.jsx(q,{className:"size-4"})})]})})]},r.id))})]})})}function na({brands:s,onEdit:l,onDelete:a,selectedIds:i,onToggleSelection:c}){return s.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(pe,{className:"mx-auto mb-4 size-12 text-slate-400"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No brands found"})]}):e.jsx("div",{className:"overflow-x-auto rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:e.jsxs("table",{className:"w-full min-w-[700px]",children:[e.jsx("thead",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 border-b-2 border-slate-200 dark:border-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300 w-12",children:e.jsx("input",{type:"checkbox",checked:i.length===s.length&&s.length>0,onChange:()=>{i.length===s.length?s.forEach(r=>c(r.id)):s.forEach(r=>{i.includes(r.id)||c(r.id)})},className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"#"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700 bg-white dark:bg-slate-800",children:s.map((r,o)=>e.jsxs("tr",{className:"transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[e.jsx("td",{className:"px-3 sm:px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:i.includes(r.id),onChange:()=>c(r.id),className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsxs("td",{className:"px-3 sm:px-6 py-4 text-sm font-medium text-slate-900 dark:text-white",children:["#",o+1]}),e.jsx("td",{className:"px-3 sm:px-6 py-4 text-sm font-semibold text-slate-900 dark:text-white",children:r.name}),e.jsx("td",{className:"px-3 sm:px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:r.description||"-"}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>l(r),className:"rounded-lg p-2 text-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/30",children:e.jsx(X,{className:"size-4"})}),e.jsx("button",{onClick:()=>a(r),className:"rounded-lg p-2 text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/30",children:e.jsx(q,{className:"size-4"})})]})})]},r.id))})]})})}function da({models:s,onEdit:l,onDelete:a,selectedIds:i,onToggleSelection:c}){return s.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(pe,{className:"mx-auto mb-4 size-12 text-slate-400"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No models found"})]}):e.jsx("div",{className:"overflow-x-auto rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:e.jsxs("table",{className:"w-full min-w-[800px]",children:[e.jsx("thead",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 border-b-2 border-slate-200 dark:border-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300 w-12",children:e.jsx("input",{type:"checkbox",checked:i.length===s.length&&s.length>0,onChange:()=>{i.length===s.length?s.forEach(r=>c(r.id)):s.forEach(r=>{i.includes(r.id)||c(r.id)})},className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"#"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Brand"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700 bg-white dark:bg-slate-800",children:s.map((r,o)=>e.jsxs("tr",{className:"transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[e.jsx("td",{className:"px-3 sm:px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:i.includes(r.id),onChange:()=>c(r.id),className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsxs("td",{className:"px-3 sm:px-6 py-4 text-sm font-medium text-slate-900 dark:text-white",children:["#",o+1]}),e.jsx("td",{className:"px-3 sm:px-6 py-4 text-sm font-semibold text-slate-900 dark:text-white",children:r.name}),e.jsx("td",{className:"px-3 sm:px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:r.brand?.name||"-"}),e.jsx("td",{className:"px-3 sm:px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:r.description||"-"}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>l(r),className:"rounded-lg p-2 text-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/30",children:e.jsx(X,{className:"size-4"})}),e.jsx("button",{onClick:()=>a(r),className:"rounded-lg p-2 text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/30",children:e.jsx(q,{className:"size-4"})})]})})]},r.id))})]})})}function ia({deviceIds:s,onSuccess:l}){const[a,i]=n.useState(""),[c,r]=n.useState(""),[o,k]=n.useState(!1),h=async g=>{g.preventDefault(),k(!0);try{const L=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"",m=await fetch("/api/devices/bulk-acknowledge-offline",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":L},credentials:"same-origin",body:JSON.stringify({device_ids:s,reason:a,acknowledged_by:c})});if(m.ok){const x=await m.json();alert(`Successfully acknowledged ${x.acknowledged_count} offline device(s)`),l()}else{const x=await m.json();alert(x.error||"Failed to acknowledge offline devices")}}catch(L){console.error("Error bulk acknowledging offline devices:",L),alert("Network error while acknowledging devices")}finally{k(!1)}};return e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsx("div",{className:"rounded-lg bg-orange-50 p-4 dark:bg-orange-950/20",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(De,{className:"size-5 text-orange-600 dark:text-orange-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-orange-900 dark:text-orange-300",children:"Bulk Acknowledge Offline Devices"}),e.jsxs("p",{className:"mt-1 text-sm text-orange-700 dark:text-orange-400",children:["This will acknowledge ",s.length,' selected offline device(s). Only devices with "offline" status will be updated.']})]})]})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Acknowledged By ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:c,onChange:g=>r(g.target.value),required:!0,className:"w-full rounded-lg border border-slate-300 px-4 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Your name"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Reason ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:a,onChange:g=>i(g.target.value),required:!0,rows:4,className:"w-full rounded-lg border border-slate-300 px-4 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Explain why these devices are offline (e.g., scheduled maintenance, hardware replacement, etc.)"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>l(),className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 dark:border-slate-600 dark:text-slate-300 dark:hover:bg-slate-700",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:o,className:"flex items-center gap-2 rounded-lg bg-orange-600 px-4 py-2 text-sm font-medium text-white hover:bg-orange-700 disabled:opacity-50",children:[e.jsx(fe,{className:"size-4"}),o?"Acknowledging...":`Acknowledge ${s.length} Device(s)`]})]})]})}function oa({deviceIds:s,onSuccess:l}){const{currentBranch:a}=rt().props,[i,c]=n.useState(""),[r,o]=n.useState(""),[k,h]=n.useState(null),[g,L]=n.useState(null),[m,x]=n.useState(null),[_,G]=n.useState(null),[T,R]=n.useState(!1),[ae,W]=n.useState([]),[A,V]=n.useState([]),[re,le]=n.useState([]);n.useEffect(()=>{fetch("/api/branches",{credentials:"same-origin",headers:{Accept:"application/json"}}).then(p=>p.ok?p.json():[]).then(p=>W(p)).catch(p=>console.error("Error loading branches:",p)),fetch("/api/users",{credentials:"same-origin",headers:{Accept:"application/json"}}).then(p=>p.ok?p.json():[]).then(p=>le(p)).catch(p=>console.error("Error loading users:",p))},[]),n.useEffect(()=>{k?fetch(`/api/locations?branch_id=${k}`,{credentials:"same-origin",headers:{Accept:"application/json"}}).then(p=>p.ok?p.json():[]).then(p=>V(p)).catch(p=>console.error("Error loading locations:",p)):V([])},[k]);const Y=async p=>{p.preventDefault(),R(!0);try{const B={};if(i&&(B.status=i),r&&(B.category=r),k&&(B.branch_id=k),g!==null&&(B.location_id=g),m!==null&&(B.is_active=m),_!==null&&(B.managed_by=_),Object.keys(B).length===0){alert("Please select at least one field to update"),R(!1);return}const d=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"",C=await fetch("/api/devices/bulk-update",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":d},credentials:"same-origin",body:JSON.stringify({device_ids:s,...B})});if(C.ok){const v=await C.json();alert(`Successfully updated ${v.updated_count} device(s)`),l()}else{const v=await C.json();alert(v.error||"Failed to update devices")}}catch(B){console.error("Error bulk updating devices:",B),alert("Network error while updating devices")}finally{R(!1)}};return e.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[e.jsx("div",{className:"rounded-lg bg-blue-50 p-4 dark:bg-blue-950/20",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(X,{className:"size-5 text-blue-600 dark:text-blue-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-blue-900 dark:text-blue-300",children:"Bulk Edit Devices"}),e.jsxs("p",{className:"mt-1 text-sm text-blue-700 dark:text-blue-400",children:["Update ",s.length," selected device(s). Leave fields empty to keep current values."]})]})]})}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Status"}),e.jsxs("select",{value:i,onChange:p=>c(p.target.value),className:"w-full rounded-lg border border-slate-300 px-4 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-white",children:[e.jsx("option",{value:"",children:"Keep current"}),e.jsx("option",{value:"online",children:"Online"}),e.jsx("option",{value:"offline",children:"Offline"}),e.jsx("option",{value:"warning",children:"Warning"}),e.jsx("option",{value:"maintenance",children:"Maintenance"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Category"}),e.jsxs("select",{value:r,onChange:p=>o(p.target.value),className:"w-full rounded-lg border border-slate-300 px-4 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-white",children:[e.jsx("option",{value:"",children:"Keep current"}),e.jsx("option",{value:"switches",children:"Switches"}),e.jsx("option",{value:"servers",children:"Servers"}),e.jsx("option",{value:"wifi",children:"WiFi"}),e.jsx("option",{value:"tas",children:"TAS"}),e.jsx("option",{value:"cctv",children:"CCTV"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Branch"}),e.jsxs("select",{value:k||"",onChange:p=>h(p.target.value?Number(p.target.value):null),className:"w-full rounded-lg border border-slate-300 px-4 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-white",children:[e.jsx("option",{value:"",children:"Keep current"}),ae.map(p=>e.jsx("option",{value:p.id,children:p.name},p.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Location"}),e.jsxs("select",{value:g||"",onChange:p=>L(p.target.value?Number(p.target.value):null),disabled:!k,className:"w-full rounded-lg border border-slate-300 px-4 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"Keep current"}),A.map(p=>e.jsx("option",{value:p.id,children:p.name},p.id))]}),!k&&e.jsx("p",{className:"mt-1 text-xs text-amber-600 dark:text-amber-400",children:"Select a branch first"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Managed By"}),e.jsxs("select",{value:_||"",onChange:p=>G(p.target.value?Number(p.target.value):null),className:"w-full rounded-lg border border-slate-300 px-4 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-white",children:[e.jsx("option",{value:"",children:"Keep current"}),e.jsx("option",{value:"0",children:"Not Assigned"}),re.map(p=>e.jsxs("option",{value:p.id,children:[p.name," (",p.role,")"]},p.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Active Status"}),e.jsxs("select",{value:m===null?"":m?"true":"false",onChange:p=>x(p.target.value===""?null:p.target.value==="true"),className:"w-full rounded-lg border border-slate-300 px-4 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-white",children:[e.jsx("option",{value:"",children:"Keep current"}),e.jsx("option",{value:"true",children:"Active"}),e.jsx("option",{value:"false",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>l(),className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 dark:border-slate-600 dark:text-slate-300 dark:hover:bg-slate-700",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:T,className:"flex items-center gap-2 rounded-lg bg-purple-600 px-4 py-2 text-sm font-medium text-white hover:bg-purple-700 disabled:opacity-50",children:[e.jsx(Bt,{className:"size-4"}),T?"Updating...":`Update ${s.length} Device(s)`]})]})]})}function ca({device:s}){const[l,a]=n.useState(""),[i,c]=n.useState(""),[r,o]=n.useState(!1),k=async h=>{h.preventDefault(),o(!0);try{const g=await fetch(`/api/devices/${s.id}/acknowledge-offline`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({reason:l,acknowledged_by:i})});if(g.ok)Lt.reload();else{const L=await g.json();alert(L.error||"Failed to acknowledge offline device")}}catch(g){console.error("Error acknowledging offline device:",g),alert("Failed to acknowledge offline device")}finally{o(!1)}};return e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsx("div",{className:"rounded-lg bg-orange-50 p-4 dark:bg-orange-950/20",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(De,{className:"size-5 text-orange-600 dark:text-orange-400 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-orange-900 dark:text-orange-300",children:["Device: ",s.name]}),e.jsxs("p",{className:"mt-1 text-sm text-orange-700 dark:text-orange-400",children:["IP: ",s.ip_address]}),s.offline_duration_minutes!==void 0&&s.offline_duration_minutes>0&&e.jsxs("p",{className:"mt-1 text-sm text-orange-700 dark:text-orange-400",children:["Offline for: ",Zs(s.offline_duration_minutes)]})]})]})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Acknowledged By ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:i,onChange:h=>c(h.target.value),required:!0,className:"w-full rounded-lg border border-slate-300 px-4 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Your name"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Reason ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:l,onChange:h=>a(h.target.value),required:!0,rows:4,className:"w-full rounded-lg border border-slate-300 px-4 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Explain why this device is offline (e.g., scheduled maintenance, hardware replacement, etc.)"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>Lt.reload(),className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 dark:border-slate-600 dark:text-slate-300 dark:hover:bg-slate-700",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:r,className:"flex items-center gap-2 rounded-lg bg-orange-600 px-4 py-2 text-sm font-medium text-white hover:bg-orange-700 disabled:opacity-50",children:[e.jsx(fe,{className:"size-4"}),r?"Acknowledging...":"Acknowledge Offline"]})]})]})}function xa({activities:s}){const[l,a]=n.useState(null),i=o=>{switch(o){case"created":return"bg-green-500";case"updated":return"bg-blue-500";case"deleted":return"bg-red-500";default:return"bg-slate-500"}},c=o=>{switch(o){case"created":return e.jsx($t,{className:"size-4"});case"updated":return e.jsx(X,{className:"size-4"});case"deleted":return e.jsx(q,{className:"size-4"});default:return e.jsx(zt,{className:"size-4"})}},r=o=>o.split("_").map(k=>k.charAt(0).toUpperCase()+k.slice(1)).join(" ");return s.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(zt,{className:"mx-auto mb-4 size-12 text-slate-400"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No activity history found"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-500",children:"Changes made to devices, locations, brands, and models will appear here"})]}):e.jsx("div",{className:"space-y-3",children:s.map(o=>{const k=l===o.id,h=o.details?.device_name||o.details?.location_name||o.details?.brand_name||o.details?.model_name||"Unknown",g=o.details?.changes?Object.fromEntries(Object.entries(o.details.changes).filter(([m])=>m!=="hardware_detail_id")):{},L=Object.keys(g).length>0;return e.jsx("div",{className:"rounded-lg border border-slate-200 bg-white p-4 shadow-sm transition-all hover:shadow-md dark:border-slate-700 dark:bg-slate-800",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`flex-shrink-0 rounded-full p-2 text-white ${i(o.action)}`,children:c(o.action)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"font-semibold text-slate-900 dark:text-white",children:[h," ",o.action]}),e.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(It,{className:"size-3"}),o.user]}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{className:"capitalize",children:o.entity_type}),o.ip_address&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{className:"font-mono text-xs",children:o.ip_address})]})]})]}),e.jsx("span",{className:"flex-shrink-0 text-xs text-slate-500 dark:text-slate-400",children:o.time_ago})]}),L&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("button",{onClick:()=>a(k?null:o.id),className:"flex items-center gap-2 text-sm font-medium text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:[k?e.jsx(Ls,{className:"size-4"}):e.jsx(ws,{className:"size-4"}),k?"Hide":"Show"," Changes (",Object.keys(g).length,")"]}),k&&e.jsx("div",{className:"mt-3 space-y-3 rounded-lg bg-slate-50 p-4 dark:bg-slate-900/50",children:Object.entries(o.details.changes).filter(([m])=>m!=="hardware_detail_id").map(([m,x])=>{const _=typeof x=="object"&&x!==null&&"old"in x&&"new"in x;return e.jsxs("div",{className:"border-l-2 border-blue-500 pl-3",children:[e.jsx("div",{className:"font-medium text-slate-700 dark:text-slate-300 mb-1",children:r(m)}),_?e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-red-600 dark:text-red-400 font-medium",children:"Before:"}),e.jsx("span",{className:"font-mono text-slate-600 dark:text-slate-400 bg-red-50 dark:bg-red-950/20 px-2 py-0.5 rounded",children:x.old===null?"null":String(x.old)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-green-600 dark:text-green-400 font-medium",children:"After:"}),e.jsx("span",{className:"font-mono text-slate-600 dark:text-slate-400 bg-green-50 dark:bg-green-950/20 px-2 py-0.5 rounded",children:x.new===null?"null":String(x.new)})]})]}):e.jsx("span",{className:"font-mono text-sm text-slate-600 dark:text-slate-400",children:typeof x=="object"?JSON.stringify(x):String(x)})]},m)})})]})]})]})},o.id)})})}function ua({entity:s,mode:l,data:a,users:i,locationFolders:c}){const{currentBranch:r}=rt().props,o="entity-modal-form",[k,h]=n.useState(()=>s==="locations"&&a?a.latitude?.toString()||"":s==="locations"&&l==="create"?"1.8655":""),[g,L]=n.useState(()=>s==="locations"&&a?a.longitude?.toString()||"":s==="locations"&&l==="create"?"103.0850":""),[m,x]=n.useState([]),[_,G]=n.useState(()=>s==="alerts"&&r?.id?r.id:null);n.useEffect(()=>{s==="alerts"&&fetch("/api/branches",{credentials:"same-origin",headers:{Accept:"application/json"}}).then(d=>d.ok?d.json():[]).then(d=>R(d)).catch(d=>console.error("Error loading branches:",d))},[s]),n.useEffect(()=>{s==="alerts"&&_&&fetch(`/api/devices?branch_id=${_}`,{credentials:"same-origin",headers:{Accept:"application/json"}}).then(d=>d.ok?d.json():[]).then(d=>x(d)).catch(d=>console.error("Error loading devices:",d))},[s,_]),n.useEffect(()=>{delete Dt.Icon.Default.prototype._getIconUrl,Dt.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"})},[]);const[T,R]=n.useState([]),[ae,W]=n.useState([]),[A,V]=n.useState(()=>a&&"branch_id"in a&&a.branch_id?a.branch_id:null),[re,le]=n.useState([]),[Y,p]=n.useState([]);n.useEffect(()=>{(s==="devices"||s==="locations"||s==="location-folders")&&fetch("/api/branches",{credentials:"same-origin",headers:{Accept:"application/json"}}).then(d=>d.ok?d.json():[]).then(d=>{R(d),l==="create"&&r?.id&&!A&&V(r.id)}).catch(d=>console.error("Error loading branches:",d)),s==="devices"&&(fetch("/api/locations",{credentials:"same-origin",headers:{Accept:"application/json"}}).then(d=>d.ok?d.json():[]).then(d=>W(d)).catch(d=>console.error("Error loading locations:",d)),fetch("/api/brands",{credentials:"same-origin",headers:{Accept:"application/json"}}).then(d=>d.ok?d.json():[]).then(d=>le(d)).catch(d=>console.error("Error loading brands:",d)),fetch("/api/models",{credentials:"same-origin",headers:{Accept:"application/json"}}).then(d=>d.ok?d.json():[]).then(d=>p(d)).catch(d=>console.error("Error loading models:",d)))},[s,r,l,A]);const B=A?ae.filter(d=>d.branch_id===A):ae;if(s==="branches"){const d=a;return c.filter(C=>!A||C.branch_id===A),e.jsxs("form",{id:o,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4 text-sm font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Branch Information"}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:["Branch Name *",e.jsx("span",{className:"ml-1 text-xs text-slate-500",children:"(e.g., UTHM Kampus Parit Raja)"})]}),e.jsx("input",{type:"text",name:"name",defaultValue:d?.name||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Enter branch name",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:["Branch Code *",e.jsx("span",{className:"ml-1 text-xs text-slate-500",children:"(e.g., PR, PG)"})]}),e.jsx("input",{type:"text",name:"code",defaultValue:d?.code||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Enter branch code",required:!0})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Description"}),e.jsx("input",{type:"text",name:"description",defaultValue:d?.description||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Brief description of the branch"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Address"}),e.jsx("textarea",{name:"address",defaultValue:d?.address||"",rows:3,className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Full branch address"})]}),e.jsx("div",{className:"sm:col-span-2",children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"is_active",defaultChecked:d?.is_active??!0,className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700"}),e.jsxs("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:["Branch is active",e.jsx("span",{className:"ml-2 text-xs text-slate-500",children:"(Active branches are visible in the branch selector)"})]})]})})]})]}),l==="edit"&&d&&e.jsxs("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-4 dark:border-blue-900/30 dark:bg-blue-950/20",children:[e.jsx("h5",{className:"mb-2 text-sm font-semibold text-blue-900 dark:text-blue-100",children:"Branch Statistics"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700 dark:text-blue-300",children:"Branch ID:"}),e.jsx("span",{className:"ml-2 font-bold text-blue-900 dark:text-blue-100",children:d.id})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700 dark:text-blue-300",children:"Status:"}),e.jsx("span",{className:"ml-2 font-bold text-blue-900 dark:text-blue-100",children:d.is_active?"Active":"Inactive"})]})]})]}),l==="edit"&&e.jsx("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4 dark:border-amber-900/30 dark:bg-amber-950/20",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(De,{className:"size-5 text-amber-600 dark:text-amber-400 mt-0.5"}),e.jsxs("div",{className:"text-sm text-amber-800 dark:text-amber-300",children:[e.jsx("p",{className:"font-semibold",children:"Important Notes:"}),e.jsxs("ul",{className:"mt-2 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Deleting a branch will also delete all associated devices, locations, and alerts"}),e.jsx("li",{children:"Deactivating a branch hides it from the branch selector but preserves all data"}),e.jsx("li",{children:"Consider deactivating instead of deleting for data preservation"})]})]})]})})]})}if(s==="devices"){const d=a,[C,v]=n.useState(()=>d?.location_id?d.location_id:null),[Q,Z]=n.useState(null),[D,U]=n.useState(null);n.useEffect(()=>{if(l==="edit"&&d&&Y.length>0&&d.hardware_detail_id){const u=d.hardware_detail?.brand,w=d.hardware_detail?.model;if(u&&w){const z=re.find(F=>F.name===u);if(z){U(z.id);const F=Y.find(ke=>ke.name===w&&ke.brand_id===z.id);F&&Z(F.id)}}}},[l,d,Y,re]);const I=Y.find(u=>u.id===Q),ge=I?.brand,[ie,xe]=n.useState(()=>{const u=Array.isArray(d?.managed_by_users)?d.managed_by_users.map(w=>Number(w.id)):[];return u.length?u:[]}),[ze,Me]=n.useState(d?.managed_by??"");n.useEffect(()=>{Me(d?.managed_by??"");const u=Array.isArray(d?.managed_by_users)?d.managed_by_users.map(w=>Number(w.id)):[];xe(u)},[d]);const Fe=()=>xe(u=>[...u,null]),K=u=>xe(w=>w.filter((z,F)=>F!==u)),$e=(u,w)=>xe(z=>{const F=[...z];return F[u]=w?Number(w):null,F}),N=D?Y.filter(u=>u.brand_id===D):Y;return n.useEffect(()=>{l==="edit"&&d?.branch_id?V(d.branch_id):l==="create"&&r?.id&&!A&&V(r.id)},[d,r,l]),n.useEffect(()=>{l==="create"&&A!==d?.branch_id&&v(null)},[A,l,d?.branch_id]),e.jsxs("form",{id:o,className:"space-y-6",children:[e.jsx("input",{type:"hidden",name:"managed_by_ids_json",value:JSON.stringify(ie.filter(u=>u!==null&&!Number.isNaN(u)))}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4 text-sm font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Basic Information"}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Device Name *"}),e.jsx("input",{type:"text",name:"name",defaultValue:d?.name||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Enter device name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Barcode"}),e.jsx("input",{type:"text",name:"barcode",defaultValue:d?.barcode||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Enter barcode"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Serial Number"}),e.jsx("input",{type:"text",name:"serial_number",defaultValue:d?.serial_number||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Enter serial number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Managed By"}),e.jsxs("select",{name:"managed_by",value:ze,onChange:u=>Me(u.target.value?Number(u.target.value):""),className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",children:[e.jsx("option",{value:"",children:"Not Assigned"}),i&&i.length>0&&i.map(u=>e.jsxs("option",{value:u.id,children:[u.name," (",u.role,")"]},u.id))]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Additional Managers"}),e.jsx("button",{type:"button",onClick:Fe,className:"rounded-md bg-blue-600 px-2.5 py-1 text-xs font-semibold text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500/20",children:"+ Add Manager"})]}),e.jsxs("div",{className:"space-y-2",children:[ie.length===0&&e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"No additional managers. Click â€œAdd Managerâ€."}),ie.map((u,w)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("select",{name:"managed_by_ids[]",value:u??"",onChange:z=>$e(w,z.target.value),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white truncate",children:[e.jsx("option",{value:"",children:"Select user"}),i&&i.length>0&&i.map(z=>{const F=z.name.length>25?`${z.name.substring(0,25)}...`:z.name;return e.jsxs("option",{value:z.id,title:`${z.name} (${z.role})`,children:[F," (",z.role,")"]},z.id)})]})}),e.jsx("button",{type:"button",onClick:()=>K(w),className:"rounded-md border border-slate-300 px-2.5 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:text-slate-200 dark:hover:bg-slate-700 flex-shrink-0",title:"Remove",children:"Remove"})]},w))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"IP Address *"}),e.jsx("input",{type:"text",name:"ip_address",defaultValue:d?.ip_address||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",pattern:"^(?:[0-9]{1,3}\\.){3}[0-9]{1,3}$",placeholder:"192.168.1.1",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"MAC Address"}),e.jsx("input",{type:"text",name:"mac_address",defaultValue:d?.mac_address||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"00:1A:2B:3C:4D:5E"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Category *"}),e.jsxs("select",{name:"category",defaultValue:d?.category||"switches",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:!0,children:[e.jsx("option",{value:"switches",children:"Switches"}),e.jsx("option",{value:"servers",children:"Servers"}),e.jsx("option",{value:"wifi",children:"WiFi"}),e.jsx("option",{value:"tas",children:"TAS"}),e.jsx("option",{value:"cctv",children:"CCTV"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Status *"}),e.jsxs("select",{name:"status",defaultValue:d?.status||"offline",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:!0,children:[e.jsx("option",{value:"online",children:"Online"}),e.jsx("option",{value:"offline",children:"Offline"}),e.jsx("option",{value:"warning",children:"Warning"}),e.jsx("option",{value:"maintenance",children:"Maintenance"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4 text-sm font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Location Information"}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Branch *"}),e.jsxs("select",{name:"branch_id",value:A||"",onChange:u=>{const w=u.target.value?Number(u.target.value):null;V(w),l==="create"&&v(null)},className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:!0,children:[e.jsx("option",{value:"",children:"Select Branch"}),T.map(u=>e.jsx("option",{value:u.id,children:u.name},u.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Location *"}),e.jsxs("select",{name:"location_id",value:C||"",onChange:u=>v(u.target.value?Number(u.target.value):null),className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",disabled:!A,required:!0,children:[e.jsx("option",{value:"",children:"Select Location"}),B.map(u=>e.jsx("option",{value:u.id,children:u.name},u.id))]}),!A&&e.jsx("p",{className:"mt-1 text-xs text-amber-600 dark:text-amber-400",children:"Select a branch first"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4 text-sm font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Hardware Details"}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Brand *"}),e.jsxs("select",{value:D||"",onChange:u=>{const w=u.target.value?Number(u.target.value):null;U(w),Z(null)},className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:!0,children:[e.jsx("option",{value:"",children:"Select Brand"}),re.map(u=>e.jsx("option",{value:u.id,children:u.name},u.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Model *"}),e.jsxs("select",{name:"model_id",value:Q||"",onChange:u=>Z(u.target.value?Number(u.target.value):null),className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",disabled:!D,required:!0,children:[e.jsx("option",{value:"",children:"Select Model"}),N.map(u=>e.jsx("option",{value:u.id,children:u.name},u.id))]}),!D&&e.jsx("p",{className:"mt-1 text-xs text-amber-600 dark:text-amber-400",children:"Select a brand first"})]})]}),ge&&I&&e.jsxs("div",{className:"mt-3 rounded-lg border border-blue-200 bg-blue-50 p-3 dark:border-blue-900/30 dark:bg-blue-950/20",children:[e.jsx("p",{className:"text-xs font-semibold text-blue-700 dark:text-blue-300",children:"Selected Hardware:"}),e.jsxs("p",{className:"mt-1 text-sm font-medium text-blue-900 dark:text-blue-100",children:[ge.name," - ",I.name]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"is_active",defaultChecked:d?.is_active??!0,className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Device is active"})]})})]}),e.jsxs("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-4 dark:border-blue-900/30 dark:bg-blue-950/20",children:[e.jsx("h5",{className:"mb-2 text-sm font-semibold text-blue-900 dark:text-blue-100",children:"Device Requirements"}),e.jsxs("ul",{className:"space-y-1 text-sm text-blue-800 dark:text-blue-300",children:[e.jsx("li",{children:"â€¢ IP address and barcode must be unique across all devices"}),e.jsx("li",{children:"â€¢ Branch and location are required - location is filtered by selected branch"}),e.jsx("li",{children:"â€¢ Hardware: Select brand first, then choose model from that brand"}),e.jsx("li",{children:"â€¢ Add brands and models in their respective tabs before creating devices"})]})]})]})}if(s==="alerts"){const d=a;return e.jsxs("form",{id:o,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4 text-sm font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Alert Information"}),e.jsx("div",{className:"grid gap-4",children:e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Branch *"}),e.jsxs("select",{value:_||"",onChange:C=>G(C.target.value?Number(C.target.value):null),className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:!0,disabled:l==="edit",children:[e.jsx("option",{value:"",children:"Select Branch"}),T.map(C=>e.jsx("option",{value:C.id,children:C.name},C.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Device *"}),e.jsxs("select",{name:"device_id",defaultValue:d?.device_id||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",disabled:!_||l==="edit",required:!0,children:[e.jsx("option",{value:"",children:"Select Device"}),m.map(C=>e.jsxs("option",{value:C.id,children:[C.name," (",C.ip_address,")"]},C.id))]}),!_&&e.jsx("p",{className:"mt-1 text-xs text-amber-600 dark:text-amber-400",children:"Select a branch first"})]})]})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4 text-sm font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Alert Details"}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Category *"}),e.jsxs("select",{name:"category",defaultValue:d?.category||"manual",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:!0,children:[e.jsx("option",{value:"manual",children:"Manual"}),e.jsx("option",{value:"offline",children:"Offline"}),e.jsx("option",{value:"performance",children:"Performance"}),e.jsx("option",{value:"security",children:"Security"}),e.jsx("option",{value:"maintenance",children:"Maintenance"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Severity"}),e.jsxs("select",{name:"severity",defaultValue:d?.severity||"medium",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"critical",children:"Critical"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Title"}),e.jsx("input",{type:"text",name:"title",defaultValue:d?.title||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Alert title"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Message"}),e.jsx("textarea",{name:"message",defaultValue:d?.message||"",rows:3,className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Alert message or description"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4 text-sm font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Alert Management"}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Status"}),e.jsxs("select",{name:"status",defaultValue:d?.status||"active",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"acknowledged",children:"Acknowledged"}),e.jsx("option",{value:"dismissed",children:"Dismissed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Acknowledged By"}),e.jsx("input",{type:"text",name:"acknowledged_by",defaultValue:d?.acknowledged_by||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Reason/Action Taken"}),e.jsx("textarea",{name:"reason",defaultValue:d?.reason||"",rows:3,className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Describe the action taken or reason for acknowledgment"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"acknowledged",defaultChecked:d?.acknowledged??!1,className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Mark as acknowledged"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"resolved",defaultChecked:d?.resolved??!1,className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Mark as resolved"})]})]})]})]})]})}if(s==="location-folders"){const d=a;return e.jsx("form",{id:o,className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4 text-sm font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Folder Information"}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Folder Name *"}),e.jsx("input",{type:"text",name:"name",defaultValue:d?.name||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"e.g., Blok ABC",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Branch *"}),e.jsxs("select",{name:"branch_id",defaultValue:d?.branch_id?String(d.branch_id):r?.id?String(r.id):"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:!0,children:[e.jsx("option",{value:"",children:"Select Branch"}),T.map(C=>e.jsx("option",{value:C.id,children:C.name},C.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Description"}),e.jsx("textarea",{name:"description",defaultValue:d?.description||"",rows:3,className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Optional description for this folder"})]})]})]})})}if(s==="locations"){const d=a;n.useEffect(()=>{l==="edit"&&d?.branch_id?V(d.branch_id):l==="create"&&r?.id&&!A&&V(r.id)},[d,r,l]);const C=(c??[]).filter(v=>!A||v.branch_id===A);return e.jsxs("form",{id:o,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4 text-sm font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Location Information"}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Location Name *"}),e.jsx("input",{type:"text",name:"name",defaultValue:d?.name||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"e.g., Server Room A, Floor 3 West Wing",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Folder"}),e.jsxs("select",{name:"location_folder_id",defaultValue:d?.location_folder_id??"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",disabled:!A,children:[e.jsx("option",{value:"",children:"No Folder (Ungrouped)"}),C.map(v=>e.jsx("option",{value:v.id,children:v.name},v.id))]}),e.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"Assign this location to a folder/main block for hierarchical grouping."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Branch *"}),e.jsxs("select",{name:"branch_id",value:A||"",onChange:v=>V(v.target.value?Number(v.target.value):null),className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:!0,children:[e.jsx("option",{value:"",children:"Select Branch"}),T.map(v=>e.jsx("option",{value:v.id,children:v.name},v.id))]})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Latitude *"}),e.jsx("input",{type:"number",step:"any",name:"latitude",value:k,onChange:v=>h(v.target.value),className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"1.853639",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Longitude *"}),e.jsx("input",{type:"number",step:"any",name:"longitude",value:g,onChange:v=>L(v.target.value),className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"103.080925",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Click on map to set location"}),e.jsx("div",{className:"h-96 overflow-hidden rounded-lg border border-slate-300 dark:border-slate-600",children:e.jsx(ma,{latitude:k?parseFloat(k):3.139,longitude:g?parseFloat(g):101.6869,onLocationSelect:(v,Q)=>{h(v.toFixed(6)),L(Q.toFixed(6))}})}),e.jsx("p",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:"Click anywhere on the map to set the location coordinates"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Description"}),e.jsx("textarea",{name:"description",defaultValue:d?.description||"",rows:3,className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Additional details about this location"})]})]})]}),l==="edit"&&d?.id&&e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("h4",{className:"mb-4 text-sm font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Floor Plans"}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("a",{href:`/monitor/plan?location_id=${d.id}&mode=config`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-semibold text-white hover:bg-blue-700",children:[e.jsx(Ft,{className:"size-4"}),"Open Floor Plan Editor"]}),e.jsx("p",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:"Create floors and place devices on floor plans. Click to open in a new tab."})]})]}),e.jsxs("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-4 dark:border-blue-900/30 dark:bg-blue-950/20",children:[e.jsx("h5",{className:"mb-2 text-sm font-semibold text-blue-900 dark:text-blue-100",children:"Location Requirements"}),e.jsxs("ul",{className:"space-y-1 text-sm text-blue-800 dark:text-blue-300",children:[e.jsx("li",{children:"â€¢ Latitude and longitude are required for map display"}),e.jsx("li",{children:"â€¢ Use decimal degrees format (e.g., 1.853639, 103.080925)"}),e.jsx("li",{children:"â€¢ Locations are filtered by branch in the device form"}),l==="edit"&&d?.id&&e.jsx("li",{children:"â€¢ Use the Floor Plan Editor to create floors and place devices"})]})]})]})}if(s==="users"){const d=a;return e.jsx("form",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4 text-sm font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"User Information"}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Name *"}),e.jsx("input",{type:"text",name:"name",defaultValue:d?.name||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Email *"}),e.jsx("input",{type:"email",name:"email",defaultValue:d?.email||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Role *"}),e.jsxs("select",{name:"role",defaultValue:d?.role||"staff",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:!0,children:[e.jsx("option",{value:"staff",children:"Staff"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Password (Optional)"}),e.jsx("input",{type:"password",name:"password",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Leave blank for no password"}),e.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"Users can be created without a password"})]})]})]})})}if(s==="brands"){const d=a;return e.jsx("form",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4 text-sm font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Brand Information"}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Brand Name *"}),e.jsx("input",{type:"text",name:"name",defaultValue:d?.name||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"e.g., Cisco, HP, Dell",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Description"}),e.jsx("textarea",{name:"description",defaultValue:d?.description||"",rows:3,className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Brief description"})]})]})]})})}if(s==="models"){const d=a,[C,v]=n.useState([]),[Q,Z]=n.useState(()=>d?.brand_id||null);return n.useEffect(()=>{fetch("/api/brands",{credentials:"same-origin",headers:{Accept:"application/json"}}).then(D=>D.ok?D.json():[]).then(D=>v(D)).catch(D=>console.error("Error loading brands:",D))},[]),n.useEffect(()=>{d?.brand_id?Z(d.brand_id):Z(null)},[d?.brand_id]),e.jsx("form",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4 text-sm font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Model Information"}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Brand *"}),e.jsxs("select",{name:"brand_id",value:Q||"",onChange:D=>Z(D.target.value?Number(D.target.value):null),className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:!0,children:[e.jsx("option",{value:"",children:"Select Brand"}),C.map(D=>e.jsx("option",{value:D.id,children:D.name},D.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Model Name *"}),e.jsx("input",{type:"text",name:"name",defaultValue:d?.name||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"e.g., Catalyst 2960, ProLiant DL380",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Description"}),e.jsx("textarea",{name:"description",defaultValue:d?.description||"",rows:3,className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Brief description"})]})]})]})},`model_form_${d?.id||"new"}`)}return e.jsxs("div",{className:"p-8 text-center text-slate-600 dark:text-slate-400",children:["Form for ",s," coming soon"]})}function ma({latitude:s,longitude:l,onLocationSelect:a}){function i(){return Hs({click(c){a(c.latlng.lat,c.latlng.lng)}}),null}return e.jsxs(Ks,{center:[s,l],zoom:13,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[e.jsx(Xs,{attribution:'Â© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(Js,{position:[s,l]}),e.jsx(i,{})]})}function Mt({currentPage:s,totalPages:l,totalItems:a,perPage:i,onPageChange:c,onPerPageChange:r}){const o=(s-1)*i+1,k=Math.min(s*i,a),h=()=>{const g=[];if(l<=5)for(let m=1;m<=l;m++)g.push(m);else{g.push(1),s>3&&g.push("...");const m=Math.max(2,s-1),x=Math.min(l-1,s+1);for(let _=m;_<=x;_++)g.push(_);s<l-2&&g.push("..."),g.push(l)}return g};return l<=1?null:e.jsxs("div",{className:"flex items-center justify-between border-t border-slate-200 bg-white px-4 py-3 dark:border-slate-700 dark:bg-slate-800 sm:px-6",children:[e.jsxs("div",{className:"flex flex-1 justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>c(s-1),disabled:s===1,className:"relative inline-flex items-center rounded-md border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 disabled:opacity-50 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-200",children:"Previous"}),e.jsx("button",{onClick:()=>c(s+1),disabled:s===l,className:"relative ml-3 inline-flex items-center rounded-md border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 disabled:opacity-50 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-200",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:["Showing ",e.jsx("span",{className:"font-medium",children:o})," to ",e.jsx("span",{className:"font-medium",children:k})," of"," ",e.jsx("span",{className:"font-medium",children:a})," results"]}),e.jsxs("select",{value:i,onChange:g=>r(Number(g.target.value)),className:"rounded-md border border-slate-300 bg-white px-3 py-1.5 text-sm dark:border-slate-600 dark:bg-slate-700 dark:text-slate-200",children:[e.jsx("option",{value:300,children:"300 per page"}),e.jsx("option",{value:500,children:"500 per page"}),e.jsx("option",{value:800,children:"800 per page"}),e.jsx("option",{value:1e3,children:"1000 per page"})]})]}),e.jsx("div",{children:e.jsxs("nav",{className:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination",children:[e.jsxs("button",{onClick:()=>c(s-1),disabled:s===1,className:"relative inline-flex items-center rounded-l-md px-2 py-2 text-slate-400 ring-1 ring-inset ring-slate-300 hover:bg-slate-50 disabled:opacity-50 dark:ring-slate-600 dark:hover:bg-slate-700",children:[e.jsx("span",{className:"sr-only",children:"Previous"}),e.jsx(Ns,{className:"size-5"})]}),h().map((g,L)=>g==="..."?e.jsx("span",{className:"relative inline-flex items-center px-4 py-2 text-sm font-semibold text-slate-700 ring-1 ring-inset ring-slate-300 dark:text-slate-300 dark:ring-slate-600",children:"..."},`ellipsis-${L}`):e.jsx("button",{onClick:()=>c(g),className:`relative inline-flex items-center px-4 py-2 text-sm font-semibold ring-1 ring-inset ring-slate-300 dark:ring-slate-600 ${s===g?"z-10 bg-blue-600 text-white focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600":"text-slate-900 hover:bg-slate-50 dark:text-slate-100 dark:hover:bg-slate-700"}`,children:g},g)),e.jsxs("button",{onClick:()=>c(s+1),disabled:s===l,className:"relative inline-flex items-center rounded-r-md px-2 py-2 text-slate-400 ring-1 ring-inset ring-slate-300 hover:bg-slate-50 disabled:opacity-50 dark:ring-slate-600 dark:hover:bg-slate-700",children:[e.jsx("span",{className:"sr-only",children:"Next"}),e.jsx(As,{className:"size-5"})]})]})})]})]})}export{za as default};

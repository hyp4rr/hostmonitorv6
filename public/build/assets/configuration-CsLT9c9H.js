import{r as d,U as We,a as Qt,b as Xe,j as e,c as jt}from"./app-so_3s6IB.js";import{M as es,T as _e,b as Je,c as ts,a as yt,C as ss}from"./monitor-layout-BRXoWMc2.js";import{l as Ye,L as vt}from"./leaflet-tMCuh-HN.js";import{S as he,C as ge}from"./server-BmtO3NRX.js";import{R as as}from"./refresh-cw-Xc2iX819.js";import{C as ls}from"./check--EnMhb5a.js";import{S as G,T as R,P as Ct}from"./trash-2-iz0rtbjU.js";import{S as ie}from"./search-DCB1nR6r.js";import{X as I,C as rs}from"./x-D9l108OW.js";import{S as St}from"./save-CRnqec2H.js";import{c as _t}from"./createLucideIcon-yWkQp2xk.js";import{E as ns}from"./eye-B2kNSJUX.js";import{U as At,C as ds}from"./user-DpAODTCe.js";import"./index-BX902Jdj.js";import"./app-C4xCnywQ.js";import"./activity-C72jcQKz.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Nt=_t("History",is);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],Ke=_t("MessageCircle",os);function cs(t,n){const a=d.useRef(n);d.useEffect(function(){n!==a.current&&t.attributionControl!=null&&(a.current!=null&&t.attributionControl.removeAttribution(a.current),n!=null&&t.attributionControl.addAttribution(n)),a.current=n},[t,n])}const xs=1;function us(t){return Object.freeze({__version:xs,map:t})}function ms(t,n){return Object.freeze({...t,...n})}const Ze=d.createContext(null);function Et(){const t=d.use(Ze);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function bs(t){function n(a,i){const{instance:o,context:r}=t(a).current;d.useImperativeHandle(i,()=>o);const{children:c}=a;return c==null?null:We.createElement(Ze,{value:r},c)}return d.forwardRef(n)}function hs(t){function n(a,i){const{instance:o}=t(a).current;return d.useImperativeHandle(i,()=>o),null}return d.forwardRef(n)}function gs(t,n){const a=d.useRef(void 0);d.useEffect(function(){return n!=null&&t.instance.on(n),a.current=n,function(){a.current!=null&&t.instance.off(a.current),a.current=null}},[t,n])}function Lt(t,n){const a=t.pane??n.pane;return a?{...t,pane:a}:t}function Dt(t,n,a){return Object.freeze({instance:t,context:n,container:a})}function zt(t,n){return n==null?function(i,o){const r=d.useRef(void 0);return r.current||(r.current=t(i,o)),r}:function(i,o){const r=d.useRef(void 0);r.current||(r.current=t(i,o));const c=d.useRef(i),{instance:h}=r.current;return d.useEffect(function(){c.current!==i&&(n(h,i,c.current),c.current=i)},[h,i,n]),r}}function ps(t,n){d.useEffect(function(){return(n.layerContainer??n.map).addLayer(t.instance),function(){n.layerContainer?.removeLayer(t.instance),n.map.removeLayer(t.instance)}},[n,t])}function Mt(t){return function(a){const i=Et(),o=t(Lt(a,i),i);return cs(i.map,a.attribution),gs(o.current,a.eventHandlers),ps(o.current,i),o}}function fs(t,n){const a=zt(t,n),i=Mt(a);return bs(i)}function ks(t,n){const a=zt(t,n),i=Mt(a);return hs(i)}function js(t,n,a){const{opacity:i,zIndex:o}=n;i!=null&&i!==a.opacity&&t.setOpacity(i),o!=null&&o!==a.zIndex&&t.setZIndex(o)}function vs(){return Et().map}function Ns(t){const n=vs();return d.useEffect(function(){return n.on(t),function(){n.off(t)}},[n,t]),n}function ws({bounds:t,boundsOptions:n,center:a,children:i,className:o,id:r,placeholder:c,style:h,whenReady:b,zoom:g,...w},x){const[u]=d.useState({className:o,id:r,style:h}),[y,P]=d.useState(null),H=d.useRef(void 0);d.useImperativeHandle(x,()=>y?.map??null,[y]);const O=d.useCallback(L=>{if(L!==null&&!H.current){const F=new Ye.Map(L,w);H.current=F,a!=null&&g!=null?F.setView(a,g):t!=null&&F.fitBounds(t,n),b!=null&&F.whenReady(b),P(us(F))}},[]);d.useEffect(()=>()=>{y?.map.remove()},[y]);const E=y?We.createElement(Ze,{value:y},i):c??null;return We.createElement("div",{...u,ref:O},E)}const ys=d.forwardRef(ws),Cs=fs(function({position:n,...a},i){const o=new Ye.Marker(n,a);return Dt(o,ms(i,{overlayContainer:o}))},function(n,a,i){a.position!==i.position&&n.setLatLng(a.position),a.icon!=null&&a.icon!==i.icon&&n.setIcon(a.icon),a.zIndexOffset!=null&&a.zIndexOffset!==i.zIndexOffset&&n.setZIndexOffset(a.zIndexOffset),a.opacity!=null&&a.opacity!==i.opacity&&n.setOpacity(a.opacity),n.dragging!=null&&a.draggable!==i.draggable&&(a.draggable===!0?n.dragging.enable():n.dragging.disable())}),Ss=ks(function({url:n,...a},i){const o=new Ye.TileLayer(n,Lt(a,i));return Dt(o,i)},function(n,a,i){js(n,a,i);const{url:o}=a;o!=null&&o!==i.url&&n.setUrl(o)}),Bt=t=>({tas:"TAS",cctv:"CCTV",wifi:"WiFi",switches:"Switches",servers:"Servers"})[t.toLowerCase()]||t.charAt(0).toUpperCase()+t.slice(1),_s=t=>{if(t===0)return"0m";const n=t,a=Math.floor(n/60),i=Math.floor(a/24),o=Math.floor(i/7);if(o>0){const r=i%7;return r>0?`${o}w ${r}d`:`${o}w`}else if(i>0){const r=a%24;return r>0?`${i}d ${r}h`:`${i}d`}else if(a>0){const r=n%60;return r>0?`${a}h ${r}m`:`${a}h`}else return`${n}m`};function ra(){const{t}=Qt(),{currentBranch:n}=Xe().props,[a,i]=d.useState("devices"),[o,r]=d.useState(!1),[c,h]=d.useState("create"),[b,g]=d.useState(null),[w,x]=d.useState(!1),[u,y]=d.useState(null),[P,H]=d.useState([]),[O,E]=d.useState([]),[L,F]=d.useState([]),[Q,W]=d.useState([]),[J,oe]=d.useState([]),[s,k]=d.useState([]),[M,V]=d.useState([]),[B,_]=d.useState([]),[T,q]=d.useState(!1),[pe,le]=d.useState([]),[ce,Ae]=d.useState(!1),[Ee,Le]=d.useState(!1),[U,De]=d.useState(null),[j,m]=d.useState([]),[C,A]=d.useState(!1),[z,te]=d.useState(1),[ze,Ge]=d.useState(300),[Me,Ft]=d.useState(0),[Qe,Tt]=d.useState(1),[Be,et]=d.useState(""),[ee,tt]=d.useState(""),Fe=d.useRef(null),qe=d.useRef(!1),[K,st]=d.useState("all"),[re,at]=d.useState("all"),[se,lt]=d.useState("all"),[xe,rt]=d.useState(""),[Te,nt]=d.useState("all"),[$e,dt]=d.useState("all"),[fe,it]=d.useState(""),[ue,ot]=d.useState(""),[ke,ct]=d.useState("all"),[me,xt]=d.useState(""),[je,ut]=d.useState(""),[be,mt]=d.useState(""),[Oe,$t]=d.useState("name"),[Ie,bt]=d.useState("asc"),[Re,Ot]=d.useState("triggered_at"),[Ue,ht]=d.useState("desc");d.useEffect(()=>{te(1),X(),m([])},[a,n?.id]),d.useEffect(()=>{X()},[z,ze]),d.useEffect(()=>{const l=setTimeout(()=>{Fe.current===document.activeElement&&(qe.current=!0),tt(Be)},1e3);return()=>clearTimeout(l)},[Be]),d.useEffect(()=>{a==="devices"&&(te(1),X())},[ee,K,re,se,Oe,Ie]),d.useEffect(()=>{!T&&qe.current&&Fe.current&&a==="devices"&&setTimeout(()=>{Fe.current?.focus(),qe.current=!1},0)},[T,a]),d.useEffect(()=>{const l=setInterval(()=>{X()},3e4);return()=>clearInterval(l)},[a,n?.id]);const X=async()=>{q(!0);try{let p={branches:"/api/branches",devices:"/api/devices",alerts:"/api/alerts",locations:"/api/locations",users:"/api/users",brands:"/api/brands",models:"/api/models",history:"/api/activity-logs"}[a];if(!p){q(!1);return}const f=new URLSearchParams;if(n?.id&&["devices","alerts","locations","history"].includes(a)){const D=String(n.id);D!=="all"&&f.append("branch_id",D)}["devices","alerts","locations","users"].includes(a)&&(f.append("page",z.toString()),f.append("per_page",ze.toString())),a==="devices"&&(f.append("include_inactive","true"),ee&&f.append("search",ee),re!=="all"&&f.append("category",re),K!=="all"&&f.append("status",K),se!=="all"&&f.append("active_filter",se),f.append("sort_by",Oe),f.append("sort_order",Ie)),f.toString()&&(p+=`?${f.toString()}`),console.log("Fetching from:",p);const N=await fetch(p,{credentials:"same-origin",headers:{Accept:"application/json"}});if(console.log("Response status:",N.status),N.ok){const D=await N.json();console.log("Fetched data:",D);const S=D.pagination!==void 0,Y=S?D.data:D;switch(S&&(Ft(D.pagination.total),Tt(D.pagination.last_page),te(D.pagination.current_page)),a){case"branches":console.log("Setting branches:",Y),W(Y);break;case"devices":H(Y);break;case"alerts":E(Y);break;case"locations":F(Y);break;case"users":oe(Y);break;case"brands":k(Y);break;case"models":V(Y);break;case"history":_(Y);break}}else console.error("Failed to fetch:",N.statusText)}catch(l){console.error("Error fetching data:",l)}finally{q(!1)}},gt=async()=>{const l=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");if(l)return l;try{if((await fetch("/sanctum/csrf-cookie",{credentials:"same-origin"})).ok)return document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}catch{console.log("CSRF cookie endpoint not available (this is normal for API routes)")}return""},It=()=>{h("create"),g(null),r(!0)},ae=l=>{h("edit"),g(l),r(!0)},ne=l=>{h("delete"),g(l),r(!0)},Rt=l=>{h("acknowledge"),g(l),r(!0)},Vt=()=>{if(j.length===0){alert("Please select devices to acknowledge");return}h("bulk_acknowledge"),r(!0)},qt=()=>{if(j.length===0){alert("Please select devices to edit");return}h("bulk_edit"),r(!0)},Ut=l=>{y(l),x(!0)},Pt=async()=>{q(!0);try{const p={branches:"/api/branches",devices:"/api/devices",alerts:"/api/alerts",locations:"/api/locations",users:"/api/users",brands:"/api/brands",models:"/api/models"}[a];if(!p){console.error("No API endpoint for entity:",a);return}const f=c==="create"?p:`${p}/${b?.id}`,N=document.querySelector("form"),D=new FormData(N),S={};if(D.forEach((v,$)=>{const Z=$.endsWith("[]")?$.slice(0,-2):$;Z==="location_id"&&v===""||Z==="hardware_detail_id"&&v===""||($.endsWith("[]")?(Array.isArray(S[Z])||(S[Z]=[]),v!==""&&S[Z].push(v)):S[Z]=v)}),a==="devices"&&S.managed_by_ids_json)try{const v=JSON.parse(S.managed_by_ids_json);Array.isArray(v)&&(S.managed_by_ids=Array.from(new Set(v.map($=>Number($)).filter($=>!Number.isNaN($))))),delete S.managed_by_ids_json}catch(v){console.error("Failed to parse managed_by_ids_json:",v)}else Array.isArray(S.managed_by_ids)&&(S.managed_by_ids=Array.from(new Set(S.managed_by_ids.map(v=>Number(v)).filter(v=>!Number.isNaN(v)))));a==="devices"&&!S.managed_by_ids&&(S.managed_by_ids=[]),["is_active","acknowledged","resolved"].forEach(v=>{const $=N.querySelector(`input[name="${v}"]`);$&&(S[v]=$.checked)}),console.log("Saving data:",S);const Zt=await gt(),Gt="POST",kt=c==="create"?S:{...S,_method:"PUT"};console.log("Request data:",kt);const He=await fetch(f,{method:Gt,headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":Zt},credentials:"same-origin",body:JSON.stringify(kt)});if(He.ok){const v=await He.json();console.log("Save response:",v),await X(),a==="models"&&v&&v.id&&V($=>{const Z=$.map(Ve=>Ve.id===v.id?v:Ve);return Z.find(Ve=>Ve.id===v.id)||Z.push(v),console.log("Updated models array with response data"),Z}),r(!1),g(null)}else{const v=await He.json();console.error("Save error:",v),alert(`Failed to save: ${v.error||v.message||"Unknown error"}
${JSON.stringify(v.messages||{},null,2)}`)}}catch(l){console.error("Error saving:",l),alert("Failed to save. Please try again.")}finally{q(!1)}},Ht=async()=>{q(!0);try{const p={branches:"/api/branches",devices:"/api/devices",alerts:"/api/alerts",locations:"/api/locations",users:"/api/users",brands:"/api/brands",models:"/api/models"}[a];if(!p){console.error("No API endpoint for entity:",a);return}const f=`${p}/${b?.id}`,N=await gt(),D=await fetch(f,{method:"DELETE",headers:{Accept:"application/json","X-CSRF-TOKEN":N},credentials:"same-origin"});if(D.ok)await X(),r(!1);else{const S=await D.json();alert(S.error||"Failed to delete")}}catch(l){console.error("Error deleting:",l),alert("Failed to delete. Please try again.")}finally{q(!1)}},pt=async()=>{if(j.length===0){alert("Please select items to delete");return}if(confirm(`Are you sure you want to delete ${j.length} selected item(s)?`)){A(!0);try{const p={branches:"/api/branches",devices:"/api/devices",alerts:"/api/alerts",locations:"/api/locations",users:"/api/users",brands:"/api/brands",models:"/api/models",history:"/api/activity-logs"}[a];if(!p)return;const f=j.map(N=>fetch(`${p}/${N}`,{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}}));await Promise.all(f),await X(),m([]),alert(`Successfully deleted ${j.length} item(s)`)}catch(l){console.error("Error bulk deleting:",l),alert("Failed to delete some items. Please try again.")}finally{A(!1)}}},de=l=>{m(p=>p.includes(l)?p.filter(f=>f!==l):[...p,l])},Wt=()=>{const l=Pe();j.length===l.length?m([]):m(l.map(p=>p.id))},Jt=P.filter(l=>{const p=ee===""||l.name.toLowerCase().includes(ee.toLowerCase())||l.ip_address.toLowerCase().includes(ee.toLowerCase())||l.mac_address&&l.mac_address.toLowerCase().includes(ee.toLowerCase())||l.barcode&&l.barcode.toLowerCase().includes(ee.toLowerCase())||l.serial_number&&l.serial_number.toLowerCase().includes(ee.toLowerCase()),f=K==="all"||K==="online"&&l.status==="online"||K==="warning"&&l.status==="warning"||K==="offline"&&l.status==="offline"&&!l.offline_acknowledged||K==="offline_ack"&&l.status==="offline"&&l.offline_acknowledged,N=re==="all"||l.type===re,D=se==="all"||se==="active"&&l.is_active||se==="inactive"&&!l.is_active;return p&&f&&N&&D}),ve=L.filter(l=>fe===""||l.name.toLowerCase().includes(fe.toLowerCase())||l.description&&l.description.toLowerCase().includes(fe.toLowerCase())),Ne=Q.filter(l=>{const p=ue===""||l.name.toLowerCase().includes(ue.toLowerCase())||l.code.toLowerCase().includes(ue.toLowerCase())||l.description&&l.description.toLowerCase().includes(ue.toLowerCase()),f=ke==="all"||ke==="active"&&l.is_active||ke==="inactive"&&!l.is_active;return p&&f}),we=J.filter(l=>me===""||l.name.toLowerCase().includes(me.toLowerCase())||l.email.toLowerCase().includes(me.toLowerCase())||l.role&&l.role.toLowerCase().includes(me.toLowerCase())),ye=s.filter(l=>je===""||l.name.toLowerCase().includes(je.toLowerCase())||l.description&&l.description.toLowerCase().includes(je.toLowerCase())),Ce=M.filter(l=>be===""||l.name.toLowerCase().includes(be.toLowerCase())||l.description&&l.description.toLowerCase().includes(be.toLowerCase())||l.brand?.name&&l.brand.name.toLowerCase().includes(be.toLowerCase())),Pe=()=>{switch(a){case"branches":return Ne;case"devices":return Jt;case"alerts":return Se;case"locations":return ve;case"users":return we;case"brands":return ye;case"models":return Ce;case"history":return B;default:return[]}},ft=async l=>{Ae(!0);try{const p=await fetch(`/devices/${l}/comments`);if(p.ok){const f=await p.json();le(f.comments)}}catch(p){console.error("Error fetching comments:",p)}finally{Ae(!1)}},Kt=l=>{De(l),Le(!0),ft(l.id)},Xt=()=>{Le(!1),De(null),le([])},Yt=async l=>{if(confirm("Are you sure you want to delete this comment?"))try{const p=await fetch(`/comments/${l}`,{method:"DELETE"});if(p.ok)le(f=>f.filter(N=>N.id!==l));else{const f=await p.json();alert(`Failed to delete comment: ${f.error||"Unknown error"}`)}}catch(p){console.error("Error deleting comment:",p),alert("Network error while deleting comment")}};d.useEffect(()=>{const l=p=>{console.error("Configuration page error:",p)};return window.addEventListener("error",l),()=>window.removeEventListener("error",l)},[]),d.useEffect(()=>{o&&a==="devices"&&J.length===0&&fetch("/api/users",{credentials:"same-origin",headers:{Accept:"application/json"}}).then(l=>l.json()).then(l=>{oe(l)}).catch(l=>console.error("Error fetching users:",l))},[o,a]);const Se=O.filter(l=>{const p=xe===""||l.title.toLowerCase().includes(xe.toLowerCase())||l.message.toLowerCase().includes(xe.toLowerCase())||l.device?.name&&l.device.name.toLowerCase().includes(xe.toLowerCase()),f=Te==="all"||l.status===Te,N=$e==="all"||l.severity===$e;return p&&f&&N}).sort((l,p)=>{let f=l[Re],N=p[Re];return f==null?1:N==null?-1:(f=String(f).toLowerCase(),N=String(N).toLowerCase(),Ue==="asc"?f<N?-1:f>N?1:0:f>N?-1:f<N?1:0)});return e.jsxs(es,{title:t("config.title"),children:[e.jsxs("div",{className:"space-y-6",children:[n?.id&&e.jsx("div",{className:"rounded-xl border border-blue-200 bg-gradient-to-r from-blue-50 to-indigo-50 p-4 dark:border-blue-900/30 dark:from-blue-950/20 dark:to-indigo-950/20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-lg bg-gradient-to-br from-blue-500 to-indigo-600 p-2 shadow-lg",children:e.jsx(he,{className:"size-5 text-white"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-blue-900 dark:text-blue-100",children:["Managing: ",n.name]}),e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[n.description," • Branch Code: ",n.code]})]})]})}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"bg-gradient-to-r from-slate-900 to-slate-700 bg-clip-text text-3xl font-bold text-transparent dark:from-white dark:to-slate-300",children:t("config.title")}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:t("config.subtitle")})]})}),e.jsx("div",{className:"flex gap-2 overflow-x-auto rounded-xl border border-slate-200/50 bg-white p-2 shadow-lg dark:border-slate-700/50 dark:bg-slate-800",children:["branches","devices","alerts","locations","brands","models","users","history"].map(l=>e.jsx("button",{onClick:()=>i(l),className:`whitespace-nowrap rounded-lg px-4 py-2 text-sm font-medium transition-all ${a===l?"bg-gradient-to-r from-blue-500 to-indigo-500 text-white shadow-lg":"text-slate-600 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-700"}`,children:l.charAt(0).toUpperCase()+l.slice(1)},l))}),e.jsxs("div",{className:"rounded-2xl border border-slate-200/50 bg-white shadow-lg dark:border-slate-700/50 dark:bg-slate-800",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200/50 bg-gradient-to-r from-slate-50 to-slate-100 p-6 dark:border-slate-700/50 dark:from-slate-900/50 dark:to-slate-800/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-xl bg-gradient-to-br from-purple-500 to-pink-600 p-3 shadow-lg",children:e.jsx(he,{className:"size-6 text-white"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:["Manage ",a.charAt(0).toUpperCase()+a.slice(1)]}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Create, edit, and manage your ",a]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>X(),disabled:T,className:"flex items-center gap-2 rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 shadow-sm transition-all hover:bg-slate-50 disabled:opacity-50 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600",title:"Refresh data",children:[e.jsx(as,{className:`size-4 ${T?"animate-spin":""}`}),"Refresh"]}),a!=="history"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:Wt,className:"flex items-center gap-2 rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 shadow-sm transition-all hover:bg-slate-50 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600",title:j.length===Pe().length?"Deselect All":"Select All",children:[e.jsx(ls,{className:"size-4"}),j.length===Pe().length?"Deselect All":"Select All"]}),j.length>0&&a==="devices"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:Vt,className:"flex items-center gap-2 rounded-lg bg-gradient-to-r from-orange-500 to-orange-600 px-4 py-2 text-sm font-medium text-white shadow-lg transition-all hover:scale-105",title:`Acknowledge offline for ${j.length} selected device(s)`,children:[e.jsx(ge,{className:"size-4"}),"Acknowledge Offline (",j.length,")"]}),e.jsxs("button",{onClick:qt,className:"flex items-center gap-2 rounded-lg bg-gradient-to-r from-purple-500 to-purple-600 px-4 py-2 text-sm font-medium text-white shadow-lg transition-all hover:scale-105",title:`Edit ${j.length} selected device(s)`,children:[e.jsx(G,{className:"size-4"}),"Bulk Edit (",j.length,")"]}),e.jsxs("button",{onClick:pt,disabled:C,className:"flex items-center gap-2 rounded-lg bg-gradient-to-r from-red-500 to-red-600 px-4 py-2 text-sm font-medium text-white shadow-lg transition-all hover:scale-105 disabled:opacity-50",title:`Delete ${j.length} selected item(s)`,children:[e.jsx(R,{className:"size-4"}),"Delete Selected (",j.length,")"]})]}),j.length>0&&a!=="devices"&&e.jsxs("button",{onClick:pt,disabled:C,className:"flex items-center gap-2 rounded-lg bg-gradient-to-r from-red-500 to-red-600 px-4 py-2 text-sm font-medium text-white shadow-lg transition-all hover:scale-105 disabled:opacity-50",title:`Delete ${j.length} selected item(s)`,children:[e.jsx(R,{className:"size-4"}),"Delete Selected (",j.length,")"]}),e.jsxs("button",{onClick:It,className:"flex items-center gap-2 rounded-lg bg-gradient-to-r from-blue-500 to-indigo-500 px-4 py-2 text-sm font-medium text-white shadow-lg transition-all hover:scale-105",children:[e.jsx(Ct,{className:"size-4"}),"Add New"]})]})]})]}),a==="devices"&&e.jsxs("div",{className:"border-b border-slate-200/50 bg-gradient-to-r from-slate-50 to-slate-100 p-4 dark:border-slate-700/50 dark:from-slate-900/50 dark:to-slate-800/50",children:[e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ie,{className:"absolute left-3 top-1/2 size-5 -translate-y-1/2 text-slate-400"}),e.jsx("input",{ref:Fe,type:"text",placeholder:"Search by name, IP, MAC, barcode, or serial number...",value:Be,onChange:l=>et(l.target.value),className:"w-full rounded-xl border border-slate-300 bg-white py-2.5 pl-10 pr-4 text-sm font-medium text-slate-900 shadow-sm transition-all focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white dark:focus:border-blue-400"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("select",{value:re,onChange:l=>at(l.target.value),className:"rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 shadow-sm transition-all hover:bg-slate-50 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600",children:[e.jsx("option",{value:"all",children:"All Categories"}),e.jsx("option",{value:"switches",children:"Switches"}),e.jsx("option",{value:"servers",children:"Servers"}),e.jsx("option",{value:"wifi",children:"WiFi"}),e.jsx("option",{value:"tas",children:"TAS"}),e.jsx("option",{value:"cctv",children:"CCTV"})]}),e.jsxs("select",{value:K,onChange:l=>st(l.target.value),className:"rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 shadow-sm transition-all hover:bg-slate-50 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"online",children:"Online"}),e.jsx("option",{value:"warning",children:"Warning"}),e.jsx("option",{value:"offline",children:"Offline"}),e.jsx("option",{value:"offline_ack",children:"Acknowledged"})]}),e.jsxs("select",{value:se,onChange:l=>lt(l.target.value),className:"rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 shadow-sm transition-all hover:bg-slate-50 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600",children:[e.jsx("option",{value:"all",children:"All Devices"}),e.jsx("option",{value:"active",children:"Active Only"}),e.jsx("option",{value:"inactive",children:"Inactive Only"})]}),(Be||K!=="all"||re!=="all"||se!=="all")&&e.jsxs("button",{onClick:()=>{et(""),tt(""),st("all"),at("all"),lt("all")},className:"flex items-center gap-2 rounded-lg border border-red-300 bg-red-50 px-4 py-2 text-sm font-medium text-red-700 shadow-sm transition-all hover:bg-red-100 dark:border-red-700 dark:bg-red-900/20 dark:text-red-400 dark:hover:bg-red-900/30",children:[e.jsx(I,{className:"size-4"}),"Clear Filters"]})]})]}),e.jsxs("div",{className:"mt-3 text-xs font-medium text-slate-600 dark:text-slate-400",children:["Showing ",P.length," device(s) on this page",Me>0&&e.jsxs("span",{className:"ml-2 text-blue-600 dark:text-blue-400",children:["(Total: ",Me," device(s) matching filters across all pages)"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:T?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"mx-auto mb-4 size-12 animate-spin rounded-full border-4 border-slate-300 border-t-blue-600"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading..."})]}):e.jsxs(e.Fragment,{children:[a==="branches"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border-b border-slate-200/50 bg-gradient-to-r from-slate-50 to-slate-100 p-4 dark:border-slate-700/50 dark:from-slate-900/50 dark:to-slate-800/50",children:[e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ie,{className:"absolute left-3 top-1/2 size-5 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search by name, code, or description...",value:ue,onChange:l=>ot(l.target.value),className:"w-full rounded-xl border border-slate-300 bg-white py-2.5 pl-10 pr-4 text-sm font-medium text-slate-900 shadow-sm transition-all focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white dark:focus:border-blue-400"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("select",{value:ke,onChange:l=>ct(l.target.value),className:"rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 shadow-sm transition-all hover:bg-slate-50 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600",children:[e.jsx("option",{value:"all",children:"All Branches"}),e.jsx("option",{value:"active",children:"Active Only"}),e.jsx("option",{value:"inactive",children:"Inactive Only"})]}),(ue||ke!=="all")&&e.jsxs("button",{onClick:()=>{ot(""),ct("all")},className:"flex items-center gap-2 rounded-lg border border-red-300 bg-red-50 px-4 py-2 text-sm font-medium text-red-700 shadow-sm transition-all hover:bg-red-100 dark:border-red-700 dark:bg-red-900/20 dark:text-red-400 dark:hover:bg-red-900/30",children:[e.jsx(I,{className:"size-4"}),"Clear Filters"]})]})]}),e.jsxs("div",{className:"mt-3 text-xs font-medium text-slate-600 dark:text-slate-400",children:["Showing ",Ne.length," of ",Q.length," branch(es)",Ne.length!==Q.length&&e.jsxs("span",{className:"ml-2 text-blue-600 dark:text-blue-400",children:["(",Q.length-Ne.length," hidden by filters)"]})]})]}),e.jsx(Ms,{branches:Ne,onEdit:ae,onDelete:ne,selectedIds:j,onToggleSelection:de})]}),a==="devices"&&e.jsxs(e.Fragment,{children:[e.jsx(Ls,{devices:P,onView:Ut,onEdit:ae,onDelete:ne,onAcknowledgeOffline:Rt,onComments:Kt,sortField:Oe,sortDirection:Ie,onSort:l=>{Oe===l?bt(Ie==="asc"?"desc":"asc"):($t(l),bt("asc"))},selectedIds:j,onToggleSelection:de}),e.jsx(wt,{currentPage:z,totalPages:Qe,totalItems:Me,perPage:ze,onPageChange:te,onPerPageChange:Ge})]}),a==="alerts"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border-b border-slate-200/50 bg-gradient-to-r from-slate-50 to-slate-100 p-4 dark:border-slate-700/50 dark:from-slate-900/50 dark:to-slate-800/50",children:[e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ie,{className:"absolute left-3 top-1/2 size-5 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search by title, message, or device name...",value:xe,onChange:l=>rt(l.target.value),className:"w-full rounded-xl border border-slate-300 bg-white py-2.5 pl-10 pr-4 text-sm font-medium text-slate-900 shadow-sm transition-all focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white dark:focus:border-blue-400"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("select",{value:$e,onChange:l=>dt(l.target.value),className:"rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 shadow-sm transition-all hover:bg-slate-50 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600",children:[e.jsx("option",{value:"all",children:"All Severities"}),e.jsx("option",{value:"critical",children:"Critical"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"low",children:"Low"})]}),e.jsxs("select",{value:Te,onChange:l=>nt(l.target.value),className:"rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 shadow-sm transition-all hover:bg-slate-50 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"acknowledged",children:"Acknowledged"}),e.jsx("option",{value:"resolved",children:"Resolved"})]}),(xe||Te!=="all"||$e!=="all")&&e.jsxs("button",{onClick:()=>{rt(""),nt("all"),dt("all")},className:"flex items-center gap-2 rounded-lg border border-red-300 bg-red-50 px-4 py-2 text-sm font-medium text-red-700 shadow-sm transition-all hover:bg-red-100 dark:border-red-700 dark:bg-red-900/20 dark:text-red-400 dark:hover:bg-red-900/30",children:[e.jsx(I,{className:"size-4"}),"Clear Filters"]})]})]}),e.jsxs("div",{className:"mt-3 text-xs font-medium text-slate-600 dark:text-slate-400",children:["Showing ",Se.length," of ",O.length," alert(s)",Se.length!==O.length&&e.jsxs("span",{className:"ml-2 text-blue-600 dark:text-blue-400",children:["(",O.length-Se.length," hidden by filters)"]})]})]}),e.jsx(Ds,{alerts:Se,onEdit:ae,onDelete:ne,sortField:Re,sortDirection:Ue,onSort:l=>{Re===l?ht(Ue==="asc"?"desc":"asc"):(Ot(l),ht("asc"))},selectedIds:j,onToggleSelection:de}),e.jsx(wt,{currentPage:z,totalPages:Qe,totalItems:Me,perPage:ze,onPageChange:te,onPerPageChange:Ge})]}),a==="locations"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border-b border-slate-200/50 bg-gradient-to-r from-slate-50 to-slate-100 p-4 dark:border-slate-700/50 dark:from-slate-900/50 dark:to-slate-800/50",children:[e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ie,{className:"absolute left-3 top-1/2 size-5 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search by name or description...",value:fe,onChange:l=>it(l.target.value),className:"w-full rounded-xl border border-slate-300 bg-white py-2.5 pl-10 pr-4 text-sm font-medium text-slate-900 shadow-sm transition-all focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white dark:focus:border-blue-400"})]}),fe&&e.jsxs("button",{onClick:()=>it(""),className:"flex items-center gap-2 rounded-lg border border-red-300 bg-red-50 px-4 py-2 text-sm font-medium text-red-700 shadow-sm transition-all hover:bg-red-100 dark:border-red-700 dark:bg-red-900/20 dark:text-red-400 dark:hover:bg-red-900/30",children:[e.jsx(I,{className:"size-4"}),"Clear Search"]})]}),e.jsxs("div",{className:"mt-3 text-xs font-medium text-slate-600 dark:text-slate-400",children:["Showing ",ve.length," of ",L.length," location(s)",ve.length!==L.length&&e.jsxs("span",{className:"ml-2 text-blue-600 dark:text-blue-400",children:["(",L.length-ve.length," hidden by filters)"]})]})]}),e.jsx(zs,{locations:ve,onEdit:ae,onDelete:ne,selectedIds:j,onToggleSelection:de})]}),a==="users"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border-b border-slate-200/50 bg-gradient-to-r from-slate-50 to-slate-100 p-4 dark:border-slate-700/50 dark:from-slate-900/50 dark:to-slate-800/50",children:[e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ie,{className:"absolute left-3 top-1/2 size-5 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search by name, email, or role...",value:me,onChange:l=>xt(l.target.value),className:"w-full rounded-xl border border-slate-300 bg-white py-2.5 pl-10 pr-4 text-sm font-medium text-slate-900 shadow-sm transition-all focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white dark:focus:border-blue-400"})]}),me&&e.jsxs("button",{onClick:()=>xt(""),className:"flex items-center gap-2 rounded-lg border border-red-300 bg-red-50 px-4 py-2 text-sm font-medium text-red-700 shadow-sm transition-all hover:bg-red-100 dark:border-red-700 dark:bg-red-900/20 dark:text-red-400 dark:hover:bg-red-900/30",children:[e.jsx(I,{className:"size-4"}),"Clear Search"]})]}),e.jsxs("div",{className:"mt-3 text-xs font-medium text-slate-600 dark:text-slate-400",children:["Showing ",we.length," of ",J.length," user(s)",we.length!==J.length&&e.jsxs("span",{className:"ml-2 text-blue-600 dark:text-blue-400",children:["(",J.length-we.length," hidden by filters)"]})]})]}),e.jsx(Bs,{users:we,onEdit:ae,onDelete:ne,selectedIds:j,onToggleSelection:de})]}),a==="brands"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border-b border-slate-200/50 bg-gradient-to-r from-slate-50 to-slate-100 p-4 dark:border-slate-700/50 dark:from-slate-900/50 dark:to-slate-800/50",children:[e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ie,{className:"absolute left-3 top-1/2 size-5 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search by name or description...",value:je,onChange:l=>ut(l.target.value),className:"w-full rounded-xl border border-slate-300 bg-white py-2.5 pl-10 pr-4 text-sm font-medium text-slate-900 shadow-sm transition-all focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white dark:focus:border-blue-400"})]}),je&&e.jsxs("button",{onClick:()=>ut(""),className:"flex items-center gap-2 rounded-lg border border-red-300 bg-red-50 px-4 py-2 text-sm font-medium text-red-700 shadow-sm transition-all hover:bg-red-100 dark:border-red-700 dark:bg-red-900/20 dark:text-red-400 dark:hover:bg-red-900/30",children:[e.jsx(I,{className:"size-4"}),"Clear Search"]})]}),e.jsxs("div",{className:"mt-3 text-xs font-medium text-slate-600 dark:text-slate-400",children:["Showing ",ye.length," of ",s.length," brand(s)",ye.length!==s.length&&e.jsxs("span",{className:"ml-2 text-blue-600 dark:text-blue-400",children:["(",s.length-ye.length," hidden by filters)"]})]})]}),e.jsx(Fs,{brands:ye,onEdit:ae,onDelete:ne,selectedIds:j,onToggleSelection:de})]}),a==="models"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border-b border-slate-200/50 bg-gradient-to-r from-slate-50 to-slate-100 p-4 dark:border-slate-700/50 dark:from-slate-900/50 dark:to-slate-800/50",children:[e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ie,{className:"absolute left-3 top-1/2 size-5 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search by name, description, or brand...",value:be,onChange:l=>mt(l.target.value),className:"w-full rounded-xl border border-slate-300 bg-white py-2.5 pl-10 pr-4 text-sm font-medium text-slate-900 shadow-sm transition-all focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white dark:focus:border-blue-400"})]}),be&&e.jsxs("button",{onClick:()=>mt(""),className:"flex items-center gap-2 rounded-lg border border-red-300 bg-red-50 px-4 py-2 text-sm font-medium text-red-700 shadow-sm transition-all hover:bg-red-100 dark:border-red-700 dark:bg-red-900/20 dark:text-red-400 dark:hover:bg-red-900/30",children:[e.jsx(I,{className:"size-4"}),"Clear Search"]})]}),e.jsxs("div",{className:"mt-3 text-xs font-medium text-slate-600 dark:text-slate-400",children:["Showing ",Ce.length," of ",M.length," model(s)",Ce.length!==M.length&&e.jsxs("span",{className:"ml-2 text-blue-600 dark:text-blue-400",children:["(",M.length-Ce.length," hidden by filters)"]})]})]}),e.jsx(Ts,{models:Ce,onEdit:ae,onDelete:ne,selectedIds:j,onToggleSelection:de})]}),a==="history"&&e.jsx(Rs,{activities:B})]})})]})]}),o&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"w-full max-w-4xl my-8 rounded-2xl border border-slate-200 bg-white shadow-2xl dark:border-slate-700 dark:bg-slate-800",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200 p-6 dark:border-slate-700",children:[e.jsxs("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:[c==="create"&&`Create New ${a.slice(0,-1)}`,c==="edit"&&`Edit ${a.slice(0,-1)}`,c==="delete"&&`Delete ${a.slice(0,-1)}`,c==="acknowledge"&&"Acknowledge Offline Device",c==="bulk_acknowledge"&&`Bulk Acknowledge Offline (${j.length} devices)`,c==="bulk_edit"&&`Bulk Edit Devices (${j.length} devices)`]}),e.jsx("button",{onClick:()=>r(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:e.jsx(I,{className:"size-6"})})]}),e.jsx("div",{className:"max-h-[calc(100vh-250px)] overflow-y-auto p-6",children:c==="delete"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 rounded-lg bg-red-50 p-4 dark:bg-red-900/20",children:[e.jsx(_e,{className:"size-6 text-red-600 dark:text-red-400"}),e.jsx("p",{className:"text-sm text-red-800 dark:text-red-400",children:"Are you sure you want to delete this item? This action cannot be undone."})]}),b&&e.jsx("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-4 dark:border-slate-700 dark:bg-slate-900",children:e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:"title"in b?b.title:"name"in b?b.name:`ID: ${b.id}`})})]}):c==="acknowledge"?e.jsx(Is,{device:b}):c==="bulk_acknowledge"?e.jsx($s,{deviceIds:j,onSuccess:()=>{r(!1),m([]),X()}}):c==="bulk_edit"?e.jsx(Os,{deviceIds:j,onSuccess:()=>{r(!1),m([]),X()}}):e.jsx(Vs,{entity:a,mode:c,data:b,users:J})}),e.jsxs("div",{className:"flex justify-end gap-3 border-t border-slate-200 p-6 dark:border-slate-700",children:[e.jsx("button",{onClick:()=>r(!1),disabled:T,className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-medium text-slate-700 transition-colors hover:bg-slate-50 dark:border-slate-600 dark:text-slate-300 dark:hover:bg-slate-700 disabled:opacity-50",children:"Cancel"}),c==="delete"?e.jsxs("button",{onClick:Ht,disabled:T,className:"flex items-center gap-2 rounded-lg bg-red-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-red-700 disabled:opacity-50",children:[e.jsx(R,{className:"size-4"}),T?"Deleting...":"Delete"]}):e.jsxs("button",{onClick:Pt,disabled:T,className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-blue-700 disabled:opacity-50",children:[e.jsx(St,{className:"size-4"}),T?"Saving...":"Save"]})]})]})}),w&&u&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:e.jsxs("div",{className:"w-full max-w-4xl rounded-2xl bg-white shadow-2xl dark:bg-slate-800",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200 p-6 dark:border-slate-700",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Device Details"}),e.jsx("button",{onClick:()=>x(!1),className:"rounded-lg p-2 text-slate-500 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-700",children:e.jsx(I,{className:"size-5"})})]}),e.jsx("div",{className:"max-h-[70vh] overflow-y-auto p-6",children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Basic Information"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Device Name"}),e.jsx("p",{className:"mt-1 text-slate-900 dark:text-white",children:u.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"IP Address"}),e.jsx("p",{className:"mt-1 font-mono text-slate-900 dark:text-white",children:u.ip_address})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"MAC Address"}),e.jsx("p",{className:"mt-1 font-mono text-slate-900 dark:text-white",children:u.mac_address||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Barcode"}),e.jsx("p",{className:"mt-1 text-slate-900 dark:text-white",children:u.barcode})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Serial Number"}),e.jsx("p",{className:"mt-1 text-slate-900 dark:text-white",children:u.serial_number||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Category"}),e.jsx("p",{className:"mt-1 text-slate-900 dark:text-white",children:Bt(u.category)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Status"}),e.jsx("p",{className:"mt-1",children:e.jsx("span",{className:`inline-flex rounded-full px-2 py-1 text-xs font-medium ${u.status==="online"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":u.status==="warning"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}`,children:u.status})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Location & Management"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Branch"}),e.jsx("p",{className:"mt-1 text-slate-900 dark:text-white",children:u.branch?.name||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Location"}),e.jsx("p",{className:"mt-1 text-slate-900 dark:text-white",children:u.location?.name||u.location_name||"-"}),u.location?.id&&e.jsx("div",{className:"mt-2",children:e.jsx("a",{href:`/monitor/plan?location_id=${u.location.id}&deviceId=${u.id}&mode=config`,className:"inline-flex items-center gap-2 rounded-lg bg-blue-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-blue-700",children:"Open Floor Plan (Edit)"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Managed By"}),u.managed_by_user?e.jsxs("div",{className:"mt-1",children:[e.jsx("p",{className:"text-slate-900 dark:text-white",children:u.managed_by_user.name}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:u.managed_by_user.email}),e.jsx("span",{className:`mt-1 inline-flex rounded-full px-2 py-0.5 text-xs font-medium ${u.managed_by_user.role==="admin"?"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400"}`,children:u.managed_by_user.role}),Array.isArray(u.managed_by_users)&&u.managed_by_users.length>0&&e.jsxs("div",{className:"mt-3 space-y-1",children:[e.jsx("div",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Additional Managers"}),e.jsx("ul",{className:"space-y-1",children:u.managed_by_users.map(l=>e.jsxs("li",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-900 dark:text-white",children:l.name}),e.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:l.email})]},l.id))})]})]}):e.jsx("p",{className:"mt-1 text-slate-400 dark:text-slate-600",children:"Not assigned"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Hardware"}),u.hardware_detail?e.jsxs("div",{className:"mt-1",children:[e.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:u.hardware_detail.brand}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:u.hardware_detail.model})]}):e.jsx("p",{className:"mt-1 text-slate-400 dark:text-slate-600",children:"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Uptime"}),e.jsx("p",{className:"mt-1 text-slate-900 dark:text-white",children:_s(u.uptime_minutes)})]}),u.response_time&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Response Time"}),e.jsxs("p",{className:"mt-1 text-slate-900 dark:text-white",children:[u.response_time,"ms"]})]}),u.status==="offline_ack"&&u.offline_reason&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Offline Reason"}),e.jsxs("div",{className:"mt-1 rounded-lg border border-blue-200 bg-blue-50 p-3 dark:border-blue-900/30 dark:bg-blue-950/30",children:[e.jsx("p",{className:"text-sm text-blue-900 dark:text-blue-200",children:u.offline_reason}),u.offline_acknowledged_by&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-blue-600 dark:text-blue-400",children:[e.jsxs("span",{children:["Acknowledged by ",u.offline_acknowledged_by]}),u.offline_acknowledged_at&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx("span",{children:new Date(u.offline_acknowledged_at).toLocaleString()})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(Ke,{className:"size-5"}),"Comments"]}),e.jsx(As,{deviceId:u.id})]})]})}),e.jsxs("div",{className:"flex justify-end gap-3 border-t border-slate-200 p-6 dark:border-slate-700",children:[e.jsx("button",{onClick:()=>{x(!1),ae(u)},className:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700",children:"Edit Device"}),e.jsx("button",{onClick:()=>x(!1),className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 dark:border-slate-600 dark:text-slate-300 dark:hover:bg-slate-700",children:"Close"})]})]})}),Ee&&U&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"w-full max-w-2xl my-8 rounded-2xl border border-slate-200 bg-white shadow-2xl dark:border-slate-700 dark:bg-slate-800",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200 p-6 dark:border-slate-700",children:[e.jsxs("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(Ke,{className:"size-5"}),"Comments - ",U.name]}),e.jsx("button",{onClick:Xt,className:"rounded-lg p-2 text-slate-500 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-700",children:e.jsx(I,{className:"size-5"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-4 p-3 bg-slate-50 rounded-lg dark:bg-slate-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:U.name}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-mono",children:U.ip_address})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${U.status==="online"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":U.status==="warning"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}`,children:U.status})]})}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto mb-4",children:ce?e.jsx("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:"Loading comments..."}):pe.length===0?e.jsx("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:"No comments yet. Add the first comment!"}):pe.map(l=>e.jsxs("div",{className:"rounded-lg bg-slate-50 p-4 border border-slate-200 dark:bg-slate-700 dark:border-slate-600",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${l.type==="maintenance"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":l.type==="issue"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":l.type==="note"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}`,children:l.type}),e.jsx("span",{className:"font-medium text-sm text-slate-900 dark:text-white",children:l.author})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:new Date(l.created_at).toLocaleString()}),e.jsx("button",{onClick:()=>Yt(l.id),className:"text-slate-400 hover:text-red-600 dark:text-slate-500 dark:hover:text-red-400 transition-colors",title:"Delete comment",children:e.jsx(R,{className:"size-3"})})]})]}),e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:l.comment})]},l.id))}),e.jsx("div",{className:"border-t border-slate-200 pt-4 dark:border-slate-700",children:e.jsx(Es,{deviceId:U.id,onCommentAdded:()=>ft(U.id)})})]})]})})]})}function As({deviceId:t}){const[n,a]=d.useState([]),[i,o]=d.useState(!1),r=d.useCallback(async()=>{o(!0);try{const c=await fetch(`/devices/${t}/comments`);if(c.ok){const h=await c.json();a(h.comments)}}catch(c){console.error("Error fetching comments:",c)}finally{o(!1)}},[t]);return d.useEffect(()=>{r()},[r]),i?e.jsx("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:"Loading comments..."}):n.length===0?e.jsx("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:"No comments yet for this device."}):e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:n.map(c=>e.jsxs("div",{className:"rounded-lg bg-slate-50 p-4 border border-slate-200 dark:bg-slate-700 dark:border-slate-600",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${c.type==="maintenance"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":c.type==="issue"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":c.type==="note"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}`,children:c.type}),e.jsx("span",{className:"font-medium text-sm text-slate-900 dark:text-white",children:c.author})]}),e.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:new Date(c.created_at).toLocaleString()})]}),e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:c.comment})]},c.id))})}function Es({deviceId:t,onCommentAdded:n}){const[a,i]=d.useState(""),[o,r]=d.useState(""),[c,h]=d.useState("general"),[b,g]=d.useState(!1),w=async x=>{if(x.preventDefault(),!!a.trim()){g(!0);try{const u=await fetch(`/devices/${t}/comments`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({comment:a.trim(),author:o.trim()||"Admin",type:c})});if(u.ok)i(""),r(""),n();else{const y=await u.json();alert(`Failed to add comment: ${y.error||"Unknown error"}`)}}catch(u){console.error("Error adding comment:",u),alert("Network error while adding comment")}finally{g(!1)}}};return e.jsxs("form",{onSubmit:w,className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Your name (optional)",value:o,onChange:x=>r(x.target.value),className:"flex-1 rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white"}),e.jsxs("select",{value:c,onChange:x=>h(x.target.value),className:"rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white",children:[e.jsx("option",{value:"general",children:"General"}),e.jsx("option",{value:"maintenance",children:"Maintenance"}),e.jsx("option",{value:"issue",children:"Issue"}),e.jsx("option",{value:"note",children:"Note"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("textarea",{placeholder:"Add a comment...",value:a,onChange:x=>i(x.target.value),className:"flex-1 rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white",rows:3}),e.jsx("button",{type:"submit",disabled:!a.trim()||b,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors h-fit",children:b?"Adding...":"Add"})]})]})}function Ls({devices:t,onView:n,onEdit:a,onDelete:i,onAcknowledgeOffline:o,onComments:r,sortField:c,sortDirection:h,onSort:b,selectedIds:g,onToggleSelection:w}){return t.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(he,{className:"mx-auto mb-4 size-12 text-slate-400"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No devices found"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-500",children:'Click "Add New" to create your first device'})]}):e.jsx("div",{className:"overflow-x-auto -mx-4 sm:mx-0 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:e.jsxs("table",{className:"w-full min-w-[1200px] sm:min-w-0",children:[e.jsx("thead",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 border-b-2 border-slate-200 dark:border-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300 w-12",children:e.jsx("input",{type:"checkbox",checked:g.length===t.length&&t.length>0,onChange:()=>{g.length===t.length?t.forEach(x=>w(x.id)):t.forEach(x=>{g.includes(x.id)||w(x.id)})},className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsx("th",{onClick:()=>b("name"),className:"cursor-pointer px-3 sm:px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-800 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-1",children:["Name",c==="name"&&e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:h==="asc"?"↑":"↓"})]})}),e.jsx("th",{onClick:()=>b("ip_address"),className:"cursor-pointer px-3 sm:px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-800",children:e.jsxs("div",{className:"flex items-center gap-1",children:["IP Address",c==="ip_address"&&e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:h==="asc"?"↑":"↓"})]})}),e.jsx("th",{onClick:()=>b("category"),className:"cursor-pointer px-3 sm:px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-800",children:e.jsxs("div",{className:"flex items-center gap-1",children:["Category",c==="category"&&e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:h==="asc"?"↑":"↓"})]})}),e.jsx("th",{onClick:()=>b("status"),className:"cursor-pointer px-3 sm:px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-800",children:e.jsxs("div",{className:"flex items-center gap-1",children:["Status",c==="status"&&e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:h==="asc"?"↑":"↓"})]})}),e.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Active"}),e.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Branch"}),e.jsx("th",{className:"px-3 sm:px-6 py-3 text-right text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700 bg-white dark:bg-slate-800",children:t.map(x=>e.jsxs("tr",{className:`transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/50 ${x.is_active?"":"opacity-60 bg-slate-50/50 dark:bg-slate-800/50"}`,children:[e.jsx("td",{className:"px-3 sm:px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:g.includes(x.id),onChange:()=>w(x.id),className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsx("td",{className:"px-3 sm:px-6 py-4 text-sm font-medium text-slate-900 dark:text-white",children:x.name}),e.jsx("td",{className:"px-3 sm:px-6 py-4 text-sm text-slate-600 dark:text-slate-400 font-mono",children:x.ip_address}),e.jsx("td",{className:"px-3 sm:px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:e.jsx("span",{className:"rounded-full bg-slate-100 px-2 py-1 text-xs font-medium dark:bg-slate-700",children:Bt(x.category)})}),e.jsx("td",{className:"px-3 sm:px-6 py-4",children:e.jsx("span",{className:`inline-flex rounded-full px-2 py-1 text-xs font-medium ${x.status==="online"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":x.status==="warning"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":x.status==="maintenance"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}`,children:x.status})}),e.jsx("td",{className:"px-3 sm:px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center gap-1.5 rounded-full px-2.5 py-1 text-xs font-semibold ${x.is_active?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-slate-200 text-slate-600 dark:bg-slate-700 dark:text-slate-400"}`,children:x.is_active?e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"size-3"}),"Active"]}):e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"size-3"}),"Inactive"]})})}),e.jsx("td",{className:"px-3 sm:px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Je,{className:"size-3.5 text-slate-400"}),e.jsx("span",{children:x.branch?.name||"-"})]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[x.status==="offline"&&e.jsx("button",{onClick:()=>o(x),className:"rounded-lg p-2 text-orange-600 hover:bg-orange-50 dark:text-orange-400 dark:hover:bg-orange-900/30",title:"Acknowledge Offline",children:e.jsx(ge,{className:"size-4"})}),e.jsx("button",{onClick:()=>n(x),className:"rounded-lg p-2 text-green-600 hover:bg-green-50 dark:text-green-400 dark:hover:bg-green-900/30",title:"View Details",children:e.jsx(ns,{className:"size-4"})}),e.jsx("button",{onClick:()=>r(x),className:"rounded-lg p-2 text-purple-600 hover:bg-purple-50 dark:text-purple-400 dark:hover:bg-purple-900/30",title:"Manage Comments",children:e.jsx(Ke,{className:"size-4"})}),e.jsx("button",{onClick:()=>a(x),className:"rounded-lg p-2 text-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/30",children:e.jsx(G,{className:"size-4"})}),e.jsx("button",{onClick:()=>i(x),className:"rounded-lg p-2 text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/30",children:e.jsx(R,{className:"size-4"})})]})})]},x.id))})]})})}function Ds({alerts:t,onEdit:n,onDelete:a,sortField:i,sortDirection:o,onSort:r,selectedIds:c,onToggleSelection:h}){return t.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(_e,{className:"mx-auto mb-4 size-12 text-slate-400"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No alerts found"})]}):e.jsx("div",{className:"overflow-x-auto rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:e.jsxs("table",{className:"w-full min-w-[1000px]",children:[e.jsx("thead",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 border-b-2 border-slate-200 dark:border-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300 w-12",children:e.jsx("input",{type:"checkbox",checked:c.length===t.length&&t.length>0,onChange:()=>{c.length===t.length?t.forEach(b=>h(b.id)):t.forEach(b=>{c.includes(b.id)||h(b.id)})},className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Device"}),e.jsx("th",{onClick:()=>r("title"),className:"cursor-pointer px-3 sm:px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-800",children:e.jsxs("div",{className:"flex items-center gap-1",children:["Title",i==="title"&&e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:o==="asc"?"↑":"↓"})]})}),e.jsx("th",{onClick:()=>r("severity"),className:"cursor-pointer px-3 sm:px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-800",children:e.jsxs("div",{className:"flex items-center gap-1",children:["Severity",i==="severity"&&e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:o==="asc"?"↑":"↓"})]})}),e.jsx("th",{onClick:()=>r("status"),className:"cursor-pointer px-3 sm:px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-800",children:e.jsxs("div",{className:"flex items-center gap-1",children:["Status",i==="status"&&e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:o==="asc"?"↑":"↓"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Acknowledged"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700 bg-white dark:bg-slate-800",children:t.map(b=>e.jsxs("tr",{className:"transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[e.jsx("td",{className:"px-3 sm:px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:c.includes(b.id),onChange:()=>h(b.id),className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsx("td",{className:"px-3 sm:px-6 py-4 text-sm font-medium text-slate-900 dark:text-white",children:b.device?.name||`Device #${b.device_id}`}),e.jsx("td",{className:"px-3 sm:px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:b.title}),e.jsx("td",{className:"px-3 sm:px-6 py-4",children:e.jsx("span",{className:`inline-flex rounded-full px-2 py-1 text-xs font-medium ${b.severity==="critical"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":b.severity==="warning"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400"}`,children:b.severity})}),e.jsx("td",{className:"px-3 sm:px-6 py-4",children:e.jsx("span",{className:`inline-flex rounded-full px-2 py-1 text-xs font-medium ${b.resolved?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":b.status==="active"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}`,children:b.resolved?"Resolved":b.status})}),e.jsx("td",{className:"px-3 sm:px-6 py-4",children:e.jsx("span",{className:`inline-flex rounded-full px-2 py-1 text-xs font-medium ${b.acknowledged?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}`,children:b.acknowledged?"Yes":"No"})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>n(b),className:"rounded-lg p-2 text-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/30",children:e.jsx(G,{className:"size-4"})}),e.jsx("button",{onClick:()=>a(b),className:"rounded-lg p-2 text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/30",children:e.jsx(R,{className:"size-4"})})]})})]},b.id))})]})})}function zs({locations:t,onEdit:n,onDelete:a,selectedIds:i,onToggleSelection:o}){return t.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(he,{className:"mx-auto mb-4 size-12 text-slate-400"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No locations found"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-500",children:'Click "Add New" to create your first location'})]}):e.jsx("div",{className:"overflow-x-auto rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:e.jsxs("table",{className:"w-full min-w-[800px]",children:[e.jsx("thead",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 border-b-2 border-slate-200 dark:border-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300 w-12",children:e.jsx("input",{type:"checkbox",checked:i.length===t.length&&t.length>0,onChange:()=>{i.length===t.length?t.forEach(r=>o(r.id)):t.forEach(r=>{i.includes(r.id)||o(r.id)})},className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Location Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Branch ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700 bg-white dark:bg-slate-800",children:t.map(r=>e.jsxs("tr",{className:"transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[e.jsx("td",{className:"px-3 sm:px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:i.includes(r.id),onChange:()=>o(r.id),className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsx("td",{className:"px-3 sm:px-6 py-4 text-sm font-medium text-slate-900 dark:text-white",children:r.name}),e.jsx("td",{className:"px-3 sm:px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:r.branch_id}),e.jsx("td",{className:"px-3 sm:px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:r.description||"-"}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("a",{href:`/monitor/plan?location_id=${r.id}&mode=config`,className:"rounded-lg p-2 text-green-600 hover:bg-green-50 dark:text-green-400 dark:hover:bg-green-900/30",title:"Open Floor Plan (Edit)",children:e.jsx(yt,{className:"size-4"})}),e.jsx("button",{onClick:()=>n(r),className:"rounded-lg p-2 text-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/30",children:e.jsx(G,{className:"size-4"})}),e.jsx("button",{onClick:()=>a(r),className:"rounded-lg p-2 text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/30",children:e.jsx(R,{className:"size-4"})})]})})]},r.id))})]})})}function Ms({branches:t,onEdit:n,onDelete:a,selectedIds:i,onToggleSelection:o}){return t.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Je,{className:"mx-auto mb-4 size-12 text-slate-400"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No branches found"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-500",children:'Click "Add New" to create your first branch'})]}):e.jsx("div",{className:"overflow-x-auto rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:e.jsxs("table",{className:"w-full min-w-[900px]",children:[e.jsx("thead",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 border-b-2 border-slate-200 dark:border-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300 w-12",children:e.jsx("input",{type:"checkbox",checked:i.length===t.length&&t.length>0,onChange:()=>{i.length===t.length?t.forEach(r=>o(r.id)):t.forEach(r=>{i.includes(r.id)||o(r.id)})},className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"#"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Address"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Active"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700 bg-white dark:bg-slate-800",children:t.map((r,c)=>e.jsxs("tr",{className:`transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/50 ${r.is_active?"":"opacity-60 bg-slate-50/50 dark:bg-slate-800/50"}`,children:[e.jsx("td",{className:"px-3 sm:px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:i.includes(r.id),onChange:()=>o(r.id),className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsxs("td",{className:"px-3 sm:px-6 py-4 text-sm font-medium text-slate-900 dark:text-white",children:["#",c+1]}),e.jsx("td",{className:"px-3 sm:px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"rounded-lg bg-gradient-to-br from-blue-500 to-indigo-600 p-2",children:e.jsx(Je,{className:"size-4 text-white"})}),e.jsx("span",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:r.name})]})}),e.jsx("td",{className:"px-3 sm:px-6 py-4",children:e.jsx("span",{className:"rounded-full bg-slate-100 px-3 py-1 text-xs font-bold text-slate-700 dark:bg-slate-700 dark:text-slate-300",children:r.code})}),e.jsx("td",{className:"px-3 sm:px-6 py-4 text-sm text-slate-600 dark:text-slate-400 max-w-xs truncate",children:r.description||"-"}),e.jsx("td",{className:"px-3 sm:px-6 py-4 text-sm text-slate-600 dark:text-slate-400 max-w-xs truncate",children:r.address||"-"}),e.jsx("td",{className:"px-3 sm:px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center gap-1.5 rounded-full px-2.5 py-1 text-xs font-semibold ${r.is_active?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-slate-200 text-slate-600 dark:bg-slate-700 dark:text-slate-400"}`,children:r.is_active?e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"size-3"}),"Active"]}):e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"size-3"}),"Inactive"]})})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>n(r),className:"rounded-lg p-2 text-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/30 transition-colors",title:"Edit branch",children:e.jsx(G,{className:"size-4"})}),e.jsx("button",{onClick:()=>a(r),className:"rounded-lg p-2 text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/30 transition-colors",title:"Delete branch",children:e.jsx(R,{className:"size-4"})})]})})]},r.id))})]})})}function Bs({users:t,onEdit:n,onDelete:a,selectedIds:i,onToggleSelection:o}){return t.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(At,{className:"mx-auto mb-4 size-12 text-slate-400"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No users found"})]}):e.jsx("div",{className:"overflow-x-auto rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:e.jsxs("table",{className:"w-full min-w-[800px]",children:[e.jsx("thead",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 border-b-2 border-slate-200 dark:border-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300 w-12",children:e.jsx("input",{type:"checkbox",checked:i.length===t.length&&t.length>0,onChange:()=>{i.length===t.length?t.forEach(r=>o(r.id)):t.forEach(r=>{i.includes(r.id)||o(r.id)})},className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700 bg-white dark:bg-slate-800",children:t.map(r=>e.jsxs("tr",{className:"transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[e.jsx("td",{className:"px-3 sm:px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:i.includes(r.id),onChange:()=>o(r.id),className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsx("td",{className:"px-3 sm:px-6 py-4 text-sm font-medium text-slate-900 dark:text-white",children:r.name}),e.jsx("td",{className:"px-3 sm:px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:r.email}),e.jsx("td",{className:"px-3 sm:px-6 py-4",children:e.jsx("span",{className:`inline-flex rounded-full px-2 py-1 text-xs font-medium ${r.role==="admin"?"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400"}`,children:r.role})}),e.jsx("td",{className:"px-3 sm:px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:new Date(r.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>n(r),className:"rounded-lg p-2 text-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/30",children:e.jsx(G,{className:"size-4"})}),e.jsx("button",{onClick:()=>a(r),className:"rounded-lg p-2 text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/30",children:e.jsx(R,{className:"size-4"})})]})})]},r.id))})]})})}function Fs({brands:t,onEdit:n,onDelete:a,selectedIds:i,onToggleSelection:o}){return t.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(he,{className:"mx-auto mb-4 size-12 text-slate-400"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No brands found"})]}):e.jsx("div",{className:"overflow-x-auto rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:e.jsxs("table",{className:"w-full min-w-[700px]",children:[e.jsx("thead",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 border-b-2 border-slate-200 dark:border-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300 w-12",children:e.jsx("input",{type:"checkbox",checked:i.length===t.length&&t.length>0,onChange:()=>{i.length===t.length?t.forEach(r=>o(r.id)):t.forEach(r=>{i.includes(r.id)||o(r.id)})},className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"#"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700 bg-white dark:bg-slate-800",children:t.map((r,c)=>e.jsxs("tr",{className:"transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[e.jsx("td",{className:"px-3 sm:px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:i.includes(r.id),onChange:()=>o(r.id),className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsxs("td",{className:"px-3 sm:px-6 py-4 text-sm font-medium text-slate-900 dark:text-white",children:["#",c+1]}),e.jsx("td",{className:"px-3 sm:px-6 py-4 text-sm font-semibold text-slate-900 dark:text-white",children:r.name}),e.jsx("td",{className:"px-3 sm:px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:r.description||"-"}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>n(r),className:"rounded-lg p-2 text-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/30",children:e.jsx(G,{className:"size-4"})}),e.jsx("button",{onClick:()=>a(r),className:"rounded-lg p-2 text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/30",children:e.jsx(R,{className:"size-4"})})]})})]},r.id))})]})})}function Ts({models:t,onEdit:n,onDelete:a,selectedIds:i,onToggleSelection:o}){return t.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(he,{className:"mx-auto mb-4 size-12 text-slate-400"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No models found"})]}):e.jsx("div",{className:"overflow-x-auto rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:e.jsxs("table",{className:"w-full min-w-[800px]",children:[e.jsx("thead",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 border-b-2 border-slate-200 dark:border-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300 w-12",children:e.jsx("input",{type:"checkbox",checked:i.length===t.length&&t.length>0,onChange:()=>{i.length===t.length?t.forEach(r=>o(r.id)):t.forEach(r=>{i.includes(r.id)||o(r.id)})},className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"#"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Brand"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700 bg-white dark:bg-slate-800",children:t.map((r,c)=>e.jsxs("tr",{className:"transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[e.jsx("td",{className:"px-3 sm:px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:i.includes(r.id),onChange:()=>o(r.id),className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsxs("td",{className:"px-3 sm:px-6 py-4 text-sm font-medium text-slate-900 dark:text-white",children:["#",c+1]}),e.jsx("td",{className:"px-3 sm:px-6 py-4 text-sm font-semibold text-slate-900 dark:text-white",children:r.name}),e.jsx("td",{className:"px-3 sm:px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:r.brand?.name||"-"}),e.jsx("td",{className:"px-3 sm:px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:r.description||"-"}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>n(r),className:"rounded-lg p-2 text-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/30",children:e.jsx(G,{className:"size-4"})}),e.jsx("button",{onClick:()=>a(r),className:"rounded-lg p-2 text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/30",children:e.jsx(R,{className:"size-4"})})]})})]},r.id))})]})})}function $s({deviceIds:t,onSuccess:n}){const[a,i]=d.useState(""),[o,r]=d.useState(""),[c,h]=d.useState(!1),b=async g=>{g.preventDefault(),h(!0);try{const w=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"",x=await fetch("/api/devices/bulk-acknowledge-offline",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":w},credentials:"same-origin",body:JSON.stringify({device_ids:t,reason:a,acknowledged_by:o})});if(x.ok){const u=await x.json();alert(`Successfully acknowledged ${u.acknowledged_count} offline device(s)`),n()}else{const u=await x.json();alert(u.error||"Failed to acknowledge offline devices")}}catch(w){console.error("Error bulk acknowledging offline devices:",w),alert("Network error while acknowledging devices")}finally{h(!1)}};return e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsx("div",{className:"rounded-lg bg-orange-50 p-4 dark:bg-orange-950/20",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(_e,{className:"size-5 text-orange-600 dark:text-orange-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-orange-900 dark:text-orange-300",children:"Bulk Acknowledge Offline Devices"}),e.jsxs("p",{className:"mt-1 text-sm text-orange-700 dark:text-orange-400",children:["This will acknowledge ",t.length,' selected offline device(s). Only devices with "offline" status will be updated.']})]})]})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Acknowledged By ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:o,onChange:g=>r(g.target.value),required:!0,className:"w-full rounded-lg border border-slate-300 px-4 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Your name"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Reason ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:a,onChange:g=>i(g.target.value),required:!0,rows:4,className:"w-full rounded-lg border border-slate-300 px-4 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Explain why these devices are offline (e.g., scheduled maintenance, hardware replacement, etc.)"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>n(),className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 dark:border-slate-600 dark:text-slate-300 dark:hover:bg-slate-700",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:c,className:"flex items-center gap-2 rounded-lg bg-orange-600 px-4 py-2 text-sm font-medium text-white hover:bg-orange-700 disabled:opacity-50",children:[e.jsx(ge,{className:"size-4"}),c?"Acknowledging...":`Acknowledge ${t.length} Device(s)`]})]})]})}function Os({deviceIds:t,onSuccess:n}){const{currentBranch:a}=Xe().props,[i,o]=d.useState(""),[r,c]=d.useState(""),[h,b]=d.useState(null),[g,w]=d.useState(null),[x,u]=d.useState(null),[y,P]=d.useState(null),[H,O]=d.useState(!1),[E,L]=d.useState([]),[F,Q]=d.useState([]),[W,J]=d.useState([]);d.useEffect(()=>{fetch("/api/branches",{credentials:"same-origin",headers:{Accept:"application/json"}}).then(s=>s.ok?s.json():[]).then(s=>L(s)).catch(s=>console.error("Error loading branches:",s)),fetch("/api/users",{credentials:"same-origin",headers:{Accept:"application/json"}}).then(s=>s.ok?s.json():[]).then(s=>J(s)).catch(s=>console.error("Error loading users:",s))},[]),d.useEffect(()=>{h?fetch(`/api/locations?branch_id=${h}`,{credentials:"same-origin",headers:{Accept:"application/json"}}).then(s=>s.ok?s.json():[]).then(s=>Q(s)).catch(s=>console.error("Error loading locations:",s)):Q([])},[h]);const oe=async s=>{s.preventDefault(),O(!0);try{const k={};if(i&&(k.status=i),r&&(k.category=r),h&&(k.branch_id=h),g!==null&&(k.location_id=g),x!==null&&(k.is_active=x),y!==null&&(k.managed_by=y),Object.keys(k).length===0){alert("Please select at least one field to update"),O(!1);return}const M=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"",V=await fetch("/api/devices/bulk-update",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":M},credentials:"same-origin",body:JSON.stringify({device_ids:t,...k})});if(V.ok){const B=await V.json();alert(`Successfully updated ${B.updated_count} device(s)`),n()}else{const B=await V.json();alert(B.error||"Failed to update devices")}}catch(k){console.error("Error bulk updating devices:",k),alert("Network error while updating devices")}finally{O(!1)}};return e.jsxs("form",{onSubmit:oe,className:"space-y-4",children:[e.jsx("div",{className:"rounded-lg bg-blue-50 p-4 dark:bg-blue-950/20",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(G,{className:"size-5 text-blue-600 dark:text-blue-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-blue-900 dark:text-blue-300",children:"Bulk Edit Devices"}),e.jsxs("p",{className:"mt-1 text-sm text-blue-700 dark:text-blue-400",children:["Update ",t.length," selected device(s). Leave fields empty to keep current values."]})]})]})}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Status"}),e.jsxs("select",{value:i,onChange:s=>o(s.target.value),className:"w-full rounded-lg border border-slate-300 px-4 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-white",children:[e.jsx("option",{value:"",children:"Keep current"}),e.jsx("option",{value:"online",children:"Online"}),e.jsx("option",{value:"offline",children:"Offline"}),e.jsx("option",{value:"warning",children:"Warning"}),e.jsx("option",{value:"maintenance",children:"Maintenance"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Category"}),e.jsxs("select",{value:r,onChange:s=>c(s.target.value),className:"w-full rounded-lg border border-slate-300 px-4 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-white",children:[e.jsx("option",{value:"",children:"Keep current"}),e.jsx("option",{value:"switches",children:"Switches"}),e.jsx("option",{value:"servers",children:"Servers"}),e.jsx("option",{value:"wifi",children:"WiFi"}),e.jsx("option",{value:"tas",children:"TAS"}),e.jsx("option",{value:"cctv",children:"CCTV"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Branch"}),e.jsxs("select",{value:h||"",onChange:s=>b(s.target.value?Number(s.target.value):null),className:"w-full rounded-lg border border-slate-300 px-4 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-white",children:[e.jsx("option",{value:"",children:"Keep current"}),E.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Location"}),e.jsxs("select",{value:g||"",onChange:s=>w(s.target.value?Number(s.target.value):null),disabled:!h,className:"w-full rounded-lg border border-slate-300 px-4 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"Keep current"}),F.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),!h&&e.jsx("p",{className:"mt-1 text-xs text-amber-600 dark:text-amber-400",children:"Select a branch first"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Managed By"}),e.jsxs("select",{value:y||"",onChange:s=>P(s.target.value?Number(s.target.value):null),className:"w-full rounded-lg border border-slate-300 px-4 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-white",children:[e.jsx("option",{value:"",children:"Keep current"}),e.jsx("option",{value:"0",children:"Not Assigned"}),W.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.role,")"]},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Active Status"}),e.jsxs("select",{value:x===null?"":x?"true":"false",onChange:s=>u(s.target.value===""?null:s.target.value==="true"),className:"w-full rounded-lg border border-slate-300 px-4 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-white",children:[e.jsx("option",{value:"",children:"Keep current"}),e.jsx("option",{value:"true",children:"Active"}),e.jsx("option",{value:"false",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>n(),className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 dark:border-slate-600 dark:text-slate-300 dark:hover:bg-slate-700",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:H,className:"flex items-center gap-2 rounded-lg bg-purple-600 px-4 py-2 text-sm font-medium text-white hover:bg-purple-700 disabled:opacity-50",children:[e.jsx(St,{className:"size-4"}),H?"Updating...":`Update ${t.length} Device(s)`]})]})]})}function Is({device:t}){const[n,a]=d.useState(""),[i,o]=d.useState(""),[r,c]=d.useState(!1),h=async b=>{b.preventDefault(),c(!0);try{const g=await fetch(`/api/devices/${t.id}/acknowledge-offline`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({reason:n,acknowledged_by:i})});if(g.ok)jt.reload();else{const w=await g.json();alert(w.error||"Failed to acknowledge offline device")}}catch(g){console.error("Error acknowledging offline device:",g),alert("Failed to acknowledge offline device")}finally{c(!1)}};return e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsx("div",{className:"rounded-lg bg-orange-50 p-4 dark:bg-orange-950/20",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(_e,{className:"size-5 text-orange-600 dark:text-orange-400 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-orange-900 dark:text-orange-300",children:["Device: ",t.name]}),e.jsxs("p",{className:"mt-1 text-sm text-orange-700 dark:text-orange-400",children:["IP: ",t.ip_address]}),t.offline_duration_minutes!==void 0&&t.offline_duration_minutes>0&&e.jsxs("p",{className:"mt-1 text-sm text-orange-700 dark:text-orange-400",children:["Offline for: ",t.offline_duration_minutes," minute",t.offline_duration_minutes!==1?"s":""]})]})]})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Acknowledged By ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:i,onChange:b=>o(b.target.value),required:!0,className:"w-full rounded-lg border border-slate-300 px-4 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Your name"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Reason ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:n,onChange:b=>a(b.target.value),required:!0,rows:4,className:"w-full rounded-lg border border-slate-300 px-4 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Explain why this device is offline (e.g., scheduled maintenance, hardware replacement, etc.)"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>jt.reload(),className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 dark:border-slate-600 dark:text-slate-300 dark:hover:bg-slate-700",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:r,className:"flex items-center gap-2 rounded-lg bg-orange-600 px-4 py-2 text-sm font-medium text-white hover:bg-orange-700 disabled:opacity-50",children:[e.jsx(ge,{className:"size-4"}),r?"Acknowledging...":"Acknowledge Offline"]})]})]})}function Rs({activities:t}){const[n,a]=d.useState(null),i=c=>{switch(c){case"created":return"bg-green-500";case"updated":return"bg-blue-500";case"deleted":return"bg-red-500";default:return"bg-slate-500"}},o=c=>{switch(c){case"created":return e.jsx(Ct,{className:"size-4"});case"updated":return e.jsx(G,{className:"size-4"});case"deleted":return e.jsx(R,{className:"size-4"});default:return e.jsx(Nt,{className:"size-4"})}},r=c=>c.split("_").map(h=>h.charAt(0).toUpperCase()+h.slice(1)).join(" ");return t.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Nt,{className:"mx-auto mb-4 size-12 text-slate-400"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No activity history found"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-500",children:"Changes made to devices, locations, brands, and models will appear here"})]}):e.jsx("div",{className:"space-y-3",children:t.map(c=>{const h=n===c.id,b=c.details?.device_name||c.details?.location_name||c.details?.brand_name||c.details?.model_name||"Unknown",g=c.details?.changes?Object.fromEntries(Object.entries(c.details.changes).filter(([x])=>x!=="hardware_detail_id")):{},w=Object.keys(g).length>0;return e.jsx("div",{className:"rounded-lg border border-slate-200 bg-white p-4 shadow-sm transition-all hover:shadow-md dark:border-slate-700 dark:bg-slate-800",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`flex-shrink-0 rounded-full p-2 text-white ${i(c.action)}`,children:o(c.action)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"font-semibold text-slate-900 dark:text-white",children:[b," ",c.action]}),e.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(At,{className:"size-3"}),c.user]}),e.jsx("span",{children:"•"}),e.jsx("span",{className:"capitalize",children:c.entity_type}),c.ip_address&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx("span",{className:"font-mono text-xs",children:c.ip_address})]})]})]}),e.jsx("span",{className:"flex-shrink-0 text-xs text-slate-500 dark:text-slate-400",children:c.time_ago})]}),w&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("button",{onClick:()=>a(h?null:c.id),className:"flex items-center gap-2 text-sm font-medium text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:[h?e.jsx(ds,{className:"size-4"}):e.jsx(ss,{className:"size-4"}),h?"Hide":"Show"," Changes (",Object.keys(g).length,")"]}),h&&e.jsx("div",{className:"mt-3 space-y-3 rounded-lg bg-slate-50 p-4 dark:bg-slate-900/50",children:Object.entries(c.details.changes).filter(([x])=>x!=="hardware_detail_id").map(([x,u])=>{const y=typeof u=="object"&&u!==null&&"old"in u&&"new"in u;return e.jsxs("div",{className:"border-l-2 border-blue-500 pl-3",children:[e.jsx("div",{className:"font-medium text-slate-700 dark:text-slate-300 mb-1",children:r(x)}),y?e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-red-600 dark:text-red-400 font-medium",children:"Before:"}),e.jsx("span",{className:"font-mono text-slate-600 dark:text-slate-400 bg-red-50 dark:bg-red-950/20 px-2 py-0.5 rounded",children:u.old===null?"null":String(u.old)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-green-600 dark:text-green-400 font-medium",children:"After:"}),e.jsx("span",{className:"font-mono text-slate-600 dark:text-slate-400 bg-green-50 dark:bg-green-950/20 px-2 py-0.5 rounded",children:u.new===null?"null":String(u.new)})]})]}):e.jsx("span",{className:"font-mono text-sm text-slate-600 dark:text-slate-400",children:typeof u=="object"?JSON.stringify(u):String(u)})]},x)})})]})]})]})},c.id)})})}function Vs({entity:t,mode:n,data:a,users:i}){const{currentBranch:o}=Xe().props,[r,c]=d.useState(()=>t==="locations"&&a?a.latitude?.toString()||"":t==="locations"&&n==="create"?"1.8655":""),[h,b]=d.useState(()=>t==="locations"&&a?a.longitude?.toString()||"":t==="locations"&&n==="create"?"103.0850":""),[g,w]=d.useState([]),[x,u]=d.useState(()=>t==="alerts"&&o?.id?o.id:null);d.useEffect(()=>{t==="alerts"&&fetch("/api/branches",{credentials:"same-origin",headers:{Accept:"application/json"}}).then(s=>s.ok?s.json():[]).then(s=>P(s)).catch(s=>console.error("Error loading branches:",s))},[t]),d.useEffect(()=>{t==="alerts"&&x&&fetch(`/api/devices?branch_id=${x}`,{credentials:"same-origin",headers:{Accept:"application/json"}}).then(s=>s.ok?s.json():[]).then(s=>w(s)).catch(s=>console.error("Error loading devices:",s))},[t,x]),d.useEffect(()=>{delete vt.Icon.Default.prototype._getIconUrl,vt.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"})},[]);const[y,P]=d.useState([]),[H,O]=d.useState([]),[E,L]=d.useState(()=>a&&"branch_id"in a&&a.branch_id?a.branch_id:null),[F,Q]=d.useState([]),[W,J]=d.useState([]);d.useEffect(()=>{(t==="devices"||t==="locations")&&fetch("/api/branches",{credentials:"same-origin",headers:{Accept:"application/json"}}).then(s=>s.ok?s.json():[]).then(s=>{P(s),n==="create"&&o?.id&&!E&&L(o.id)}).catch(s=>console.error("Error loading branches:",s)),t==="devices"&&(fetch("/api/locations",{credentials:"same-origin",headers:{Accept:"application/json"}}).then(s=>s.ok?s.json():[]).then(s=>O(s)).catch(s=>console.error("Error loading locations:",s)),fetch("/api/brands",{credentials:"same-origin",headers:{Accept:"application/json"}}).then(s=>s.ok?s.json():[]).then(s=>Q(s)).catch(s=>console.error("Error loading brands:",s)),fetch("/api/models",{credentials:"same-origin",headers:{Accept:"application/json"}}).then(s=>s.ok?s.json():[]).then(s=>J(s)).catch(s=>console.error("Error loading models:",s)))},[t,o,n,E]);const oe=E?H.filter(s=>s.branch_id===E):H;if(t==="branches"){const s=a;return e.jsxs("form",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4 text-sm font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Branch Information"}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:["Branch Name *",e.jsx("span",{className:"ml-1 text-xs text-slate-500",children:"(e.g., UTHM Kampus Parit Raja)"})]}),e.jsx("input",{type:"text",name:"name",defaultValue:s?.name||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Enter branch name",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:["Branch Code *",e.jsx("span",{className:"ml-1 text-xs text-slate-500",children:"(e.g., PR, PG)"})]}),e.jsx("input",{type:"text",name:"code",defaultValue:s?.code||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Enter branch code",required:!0})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Description"}),e.jsx("input",{type:"text",name:"description",defaultValue:s?.description||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Brief description of the branch"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Address"}),e.jsx("textarea",{name:"address",defaultValue:s?.address||"",rows:3,className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Full branch address"})]}),e.jsx("div",{className:"sm:col-span-2",children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"is_active",defaultChecked:s?.is_active??!0,className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700"}),e.jsxs("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:["Branch is active",e.jsx("span",{className:"ml-2 text-xs text-slate-500",children:"(Active branches are visible in the branch selector)"})]})]})})]})]}),n==="edit"&&s&&e.jsxs("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-4 dark:border-blue-900/30 dark:bg-blue-950/20",children:[e.jsx("h5",{className:"mb-2 text-sm font-semibold text-blue-900 dark:text-blue-100",children:"Branch Statistics"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700 dark:text-blue-300",children:"Branch ID:"}),e.jsx("span",{className:"ml-2 font-bold text-blue-900 dark:text-blue-100",children:s.id})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700 dark:text-blue-300",children:"Status:"}),e.jsx("span",{className:"ml-2 font-bold text-blue-900 dark:text-blue-100",children:s.is_active?"Active":"Inactive"})]})]})]}),n==="edit"&&e.jsx("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4 dark:border-amber-900/30 dark:bg-amber-950/20",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(_e,{className:"size-5 text-amber-600 dark:text-amber-400 mt-0.5"}),e.jsxs("div",{className:"text-sm text-amber-800 dark:text-amber-300",children:[e.jsx("p",{className:"font-semibold",children:"Important Notes:"}),e.jsxs("ul",{className:"mt-2 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Deleting a branch will also delete all associated devices, locations, and alerts"}),e.jsx("li",{children:"Deactivating a branch hides it from the branch selector but preserves all data"}),e.jsx("li",{children:"Consider deactivating instead of deleting for data preservation"})]})]})]})})]})}if(t==="devices"){const s=a,[k,M]=d.useState(()=>s?.location_id?s.location_id:null),[V,B]=d.useState(null),[_,T]=d.useState(null);d.useEffect(()=>{if(n==="edit"&&s&&W.length>0&&s.hardware_detail_id){const m=s.hardware_detail?.brand,C=s.hardware_detail?.model;if(m&&C){const A=F.find(z=>z.name===m);if(A){T(A.id);const z=W.find(te=>te.name===C&&te.brand_id===A.id);z&&B(z.id)}}}},[n,s,W,F]);const q=W.find(m=>m.id===V),pe=q?.brand,[le,ce]=d.useState(()=>{const m=Array.isArray(s?.managed_by_users)?s.managed_by_users.map(C=>Number(C.id)):[];return m.length?m:[]}),[Ae,Ee]=d.useState(s?.managed_by??"");d.useEffect(()=>{Ee(s?.managed_by??"");const m=Array.isArray(s?.managed_by_users)?s.managed_by_users.map(C=>Number(C.id)):[];ce(m)},[s]);const Le=()=>ce(m=>[...m,null]),U=m=>ce(C=>C.filter((A,z)=>z!==m)),De=(m,C)=>ce(A=>{const z=[...A];return z[m]=C?Number(C):null,z}),j=_?W.filter(m=>m.brand_id===_):W;return d.useEffect(()=>{n==="edit"&&s?.branch_id?L(s.branch_id):n==="create"&&o?.id&&!E&&L(o.id)},[s,o,n]),d.useEffect(()=>{n==="create"&&E!==s?.branch_id&&M(null)},[E,n,s?.branch_id]),e.jsxs("form",{className:"space-y-6",children:[e.jsx("input",{type:"hidden",name:"managed_by_ids_json",value:JSON.stringify(le.filter(m=>m!==null&&!Number.isNaN(m)))}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4 text-sm font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Basic Information"}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Device Name *"}),e.jsx("input",{type:"text",name:"name",defaultValue:s?.name||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Enter device name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Barcode"}),e.jsx("input",{type:"text",name:"barcode",defaultValue:s?.barcode||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Enter barcode"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Serial Number"}),e.jsx("input",{type:"text",name:"serial_number",defaultValue:s?.serial_number||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Enter serial number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Managed By"}),e.jsxs("select",{name:"managed_by",value:Ae,onChange:m=>Ee(m.target.value?Number(m.target.value):""),className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",children:[e.jsx("option",{value:"",children:"Not Assigned"}),i&&i.length>0&&i.map(m=>e.jsxs("option",{value:m.id,children:[m.name," (",m.role,")"]},m.id))]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Additional Managers"}),e.jsx("button",{type:"button",onClick:Le,className:"rounded-md bg-blue-600 px-2.5 py-1 text-xs font-semibold text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500/20",children:"+ Add Manager"})]}),e.jsxs("div",{className:"space-y-2",children:[le.length===0&&e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"No additional managers. Click “Add Manager”."}),le.map((m,C)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("select",{name:"managed_by_ids[]",value:m??"",onChange:A=>De(C,A.target.value),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white truncate",children:[e.jsx("option",{value:"",children:"Select user"}),i&&i.length>0&&i.map(A=>{const z=A.name.length>25?`${A.name.substring(0,25)}...`:A.name;return e.jsxs("option",{value:A.id,title:`${A.name} (${A.role})`,children:[z," (",A.role,")"]},A.id)})]})}),e.jsx("button",{type:"button",onClick:()=>U(C),className:"rounded-md border border-slate-300 px-2.5 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:text-slate-200 dark:hover:bg-slate-700 flex-shrink-0",title:"Remove",children:"Remove"})]},C))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"IP Address *"}),e.jsx("input",{type:"text",name:"ip_address",defaultValue:s?.ip_address||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",pattern:"^(?:[0-9]{1,3}\\.){3}[0-9]{1,3}$",placeholder:"192.168.1.1",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"MAC Address"}),e.jsx("input",{type:"text",name:"mac_address",defaultValue:s?.mac_address||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"00:1A:2B:3C:4D:5E"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Category *"}),e.jsxs("select",{name:"category",defaultValue:s?.category||"switches",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:!0,children:[e.jsx("option",{value:"switches",children:"Switches"}),e.jsx("option",{value:"servers",children:"Servers"}),e.jsx("option",{value:"wifi",children:"WiFi"}),e.jsx("option",{value:"tas",children:"TAS"}),e.jsx("option",{value:"cctv",children:"CCTV"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Status *"}),e.jsxs("select",{name:"status",defaultValue:s?.status||"offline",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:!0,children:[e.jsx("option",{value:"online",children:"Online"}),e.jsx("option",{value:"offline",children:"Offline"}),e.jsx("option",{value:"warning",children:"Warning"}),e.jsx("option",{value:"maintenance",children:"Maintenance"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4 text-sm font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Location Information"}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Branch *"}),e.jsxs("select",{name:"branch_id",value:E||"",onChange:m=>{const C=m.target.value?Number(m.target.value):null;L(C),n==="create"&&M(null)},className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:!0,children:[e.jsx("option",{value:"",children:"Select Branch"}),y.map(m=>e.jsx("option",{value:m.id,children:m.name},m.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Location *"}),e.jsxs("select",{name:"location_id",value:k||"",onChange:m=>M(m.target.value?Number(m.target.value):null),className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",disabled:!E,required:!0,children:[e.jsx("option",{value:"",children:"Select Location"}),oe.map(m=>e.jsx("option",{value:m.id,children:m.name},m.id))]}),!E&&e.jsx("p",{className:"mt-1 text-xs text-amber-600 dark:text-amber-400",children:"Select a branch first"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4 text-sm font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Hardware Details"}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Brand *"}),e.jsxs("select",{value:_||"",onChange:m=>{const C=m.target.value?Number(m.target.value):null;T(C),B(null)},className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:!0,children:[e.jsx("option",{value:"",children:"Select Brand"}),F.map(m=>e.jsx("option",{value:m.id,children:m.name},m.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Model *"}),e.jsxs("select",{name:"model_id",value:V||"",onChange:m=>B(m.target.value?Number(m.target.value):null),className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",disabled:!_,required:!0,children:[e.jsx("option",{value:"",children:"Select Model"}),j.map(m=>e.jsx("option",{value:m.id,children:m.name},m.id))]}),!_&&e.jsx("p",{className:"mt-1 text-xs text-amber-600 dark:text-amber-400",children:"Select a brand first"})]})]}),pe&&q&&e.jsxs("div",{className:"mt-3 rounded-lg border border-blue-200 bg-blue-50 p-3 dark:border-blue-900/30 dark:bg-blue-950/20",children:[e.jsx("p",{className:"text-xs font-semibold text-blue-700 dark:text-blue-300",children:"Selected Hardware:"}),e.jsxs("p",{className:"mt-1 text-sm font-medium text-blue-900 dark:text-blue-100",children:[pe.name," - ",q.name]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"is_active",defaultChecked:s?.is_active??!0,className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Device is active"})]})})]}),e.jsxs("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-4 dark:border-blue-900/30 dark:bg-blue-950/20",children:[e.jsx("h5",{className:"mb-2 text-sm font-semibold text-blue-900 dark:text-blue-100",children:"Device Requirements"}),e.jsxs("ul",{className:"space-y-1 text-sm text-blue-800 dark:text-blue-300",children:[e.jsx("li",{children:"• IP address and barcode must be unique across all devices"}),e.jsx("li",{children:"• Branch and location are required - location is filtered by selected branch"}),e.jsx("li",{children:"• Hardware: Select brand first, then choose model from that brand"}),e.jsx("li",{children:"• Add brands and models in their respective tabs before creating devices"})]})]})]})}if(t==="alerts"){const s=a;return e.jsxs("form",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4 text-sm font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Alert Information"}),e.jsx("div",{className:"grid gap-4",children:e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Branch *"}),e.jsxs("select",{value:x||"",onChange:k=>u(k.target.value?Number(k.target.value):null),className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:!0,disabled:n==="edit",children:[e.jsx("option",{value:"",children:"Select Branch"}),y.map(k=>e.jsx("option",{value:k.id,children:k.name},k.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Device *"}),e.jsxs("select",{name:"device_id",defaultValue:s?.device_id||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",disabled:!x||n==="edit",required:!0,children:[e.jsx("option",{value:"",children:"Select Device"}),g.map(k=>e.jsxs("option",{value:k.id,children:[k.name," (",k.ip_address,")"]},k.id))]}),!x&&e.jsx("p",{className:"mt-1 text-xs text-amber-600 dark:text-amber-400",children:"Select a branch first"})]})]})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4 text-sm font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Alert Details"}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Category *"}),e.jsxs("select",{name:"category",defaultValue:s?.category||"manual",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:!0,children:[e.jsx("option",{value:"manual",children:"Manual"}),e.jsx("option",{value:"offline",children:"Offline"}),e.jsx("option",{value:"performance",children:"Performance"}),e.jsx("option",{value:"security",children:"Security"}),e.jsx("option",{value:"maintenance",children:"Maintenance"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Severity"}),e.jsxs("select",{name:"severity",defaultValue:s?.severity||"medium",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"critical",children:"Critical"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Title"}),e.jsx("input",{type:"text",name:"title",defaultValue:s?.title||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Alert title"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Message"}),e.jsx("textarea",{name:"message",defaultValue:s?.message||"",rows:3,className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Alert message or description"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4 text-sm font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Alert Management"}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Status"}),e.jsxs("select",{name:"status",defaultValue:s?.status||"active",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"acknowledged",children:"Acknowledged"}),e.jsx("option",{value:"dismissed",children:"Dismissed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Acknowledged By"}),e.jsx("input",{type:"text",name:"acknowledged_by",defaultValue:s?.acknowledged_by||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Reason/Action Taken"}),e.jsx("textarea",{name:"reason",defaultValue:s?.reason||"",rows:3,className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Describe the action taken or reason for acknowledgment"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"acknowledged",defaultChecked:s?.acknowledged??!1,className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Mark as acknowledged"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"resolved",defaultChecked:s?.resolved??!1,className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Mark as resolved"})]})]})]})]})]})}if(t==="locations"){const s=a;return d.useEffect(()=>{n==="edit"&&s?.branch_id?L(s.branch_id):n==="create"&&o?.id&&!E&&L(o.id)},[s,o,n]),e.jsxs("form",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4 text-sm font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Location Information"}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Location Name *"}),e.jsx("input",{type:"text",name:"name",defaultValue:s?.name||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"e.g., Server Room A, Floor 3 West Wing",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Branch *"}),e.jsxs("select",{name:"branch_id",value:E||"",onChange:k=>L(k.target.value?Number(k.target.value):null),className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:!0,children:[e.jsx("option",{value:"",children:"Select Branch"}),y.map(k=>e.jsx("option",{value:k.id,children:k.name},k.id))]})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Latitude *"}),e.jsx("input",{type:"number",step:"any",name:"latitude",value:r,onChange:k=>c(k.target.value),className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"1.853639",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Longitude *"}),e.jsx("input",{type:"number",step:"any",name:"longitude",value:h,onChange:k=>b(k.target.value),className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"103.080925",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Click on map to set location"}),e.jsx("div",{className:"h-96 overflow-hidden rounded-lg border border-slate-300 dark:border-slate-600",children:e.jsx(qs,{latitude:r?parseFloat(r):3.139,longitude:h?parseFloat(h):101.6869,onLocationSelect:(k,M)=>{c(k.toFixed(6)),b(M.toFixed(6))}})}),e.jsx("p",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:"Click anywhere on the map to set the location coordinates"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Description"}),e.jsx("textarea",{name:"description",defaultValue:s?.description||"",rows:3,className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Additional details about this location"})]})]})]}),n==="edit"&&s?.id&&e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("h4",{className:"mb-4 text-sm font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Floor Plans"}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("a",{href:`/monitor/plan?location_id=${s.id}&mode=config`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-semibold text-white hover:bg-blue-700",children:[e.jsx(yt,{className:"size-4"}),"Open Floor Plan Editor"]}),e.jsx("p",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:"Create floors and place devices on floor plans. Click to open in a new tab."})]})]}),e.jsxs("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-4 dark:border-blue-900/30 dark:bg-blue-950/20",children:[e.jsx("h5",{className:"mb-2 text-sm font-semibold text-blue-900 dark:text-blue-100",children:"Location Requirements"}),e.jsxs("ul",{className:"space-y-1 text-sm text-blue-800 dark:text-blue-300",children:[e.jsx("li",{children:"• Latitude and longitude are required for map display"}),e.jsx("li",{children:"• Use decimal degrees format (e.g., 1.853639, 103.080925)"}),e.jsx("li",{children:"• Locations are filtered by branch in the device form"}),n==="edit"&&s?.id&&e.jsx("li",{children:"• Use the Floor Plan Editor to create floors and place devices"})]})]})]})}if(t==="users"){const s=a;return e.jsx("form",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4 text-sm font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"User Information"}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Name *"}),e.jsx("input",{type:"text",name:"name",defaultValue:s?.name||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Email *"}),e.jsx("input",{type:"email",name:"email",defaultValue:s?.email||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Role *"}),e.jsxs("select",{name:"role",defaultValue:s?.role||"staff",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:!0,children:[e.jsx("option",{value:"staff",children:"Staff"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Password (Optional)"}),e.jsx("input",{type:"password",name:"password",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Leave blank for no password"}),e.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"Users can be created without a password"})]})]})]})})}if(t==="brands"){const s=a;return e.jsx("form",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4 text-sm font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Brand Information"}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Brand Name *"}),e.jsx("input",{type:"text",name:"name",defaultValue:s?.name||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"e.g., Cisco, HP, Dell",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Description"}),e.jsx("textarea",{name:"description",defaultValue:s?.description||"",rows:3,className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Brief description"})]})]})]})})}if(t==="models"){const s=a,[k,M]=d.useState([]),[V,B]=d.useState(()=>s?.brand_id||null);return d.useEffect(()=>{fetch("/api/brands",{credentials:"same-origin",headers:{Accept:"application/json"}}).then(_=>_.ok?_.json():[]).then(_=>M(_)).catch(_=>console.error("Error loading brands:",_))},[]),d.useEffect(()=>{s?.brand_id?B(s.brand_id):B(null)},[s?.brand_id]),e.jsx("form",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4 text-sm font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Model Information"}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Brand *"}),e.jsxs("select",{name:"brand_id",value:V||"",onChange:_=>B(_.target.value?Number(_.target.value):null),className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:!0,children:[e.jsx("option",{value:"",children:"Select Brand"}),k.map(_=>e.jsx("option",{value:_.id,children:_.name},_.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Model Name *"}),e.jsx("input",{type:"text",name:"name",defaultValue:s?.name||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"e.g., Catalyst 2960, ProLiant DL380",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Description"}),e.jsx("textarea",{name:"description",defaultValue:s?.description||"",rows:3,className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Brief description"})]})]})]})},`model_form_${s?.id||"new"}`)}return e.jsxs("div",{className:"p-8 text-center text-slate-600 dark:text-slate-400",children:["Form for ",t," coming soon"]})}function qs({latitude:t,longitude:n,onLocationSelect:a}){function i(){return Ns({click(o){a(o.latlng.lat,o.latlng.lng)}}),null}return e.jsxs(ys,{center:[t,n],zoom:13,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[e.jsx(Ss,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(Cs,{position:[t,n]}),e.jsx(i,{})]})}function wt({currentPage:t,totalPages:n,totalItems:a,perPage:i,onPageChange:o,onPerPageChange:r}){const c=(t-1)*i+1,h=Math.min(t*i,a),b=()=>{const g=[];if(n<=5)for(let x=1;x<=n;x++)g.push(x);else{g.push(1),t>3&&g.push("...");const x=Math.max(2,t-1),u=Math.min(n-1,t+1);for(let y=x;y<=u;y++)g.push(y);t<n-2&&g.push("..."),g.push(n)}return g};return n<=1?null:e.jsxs("div",{className:"flex items-center justify-between border-t border-slate-200 bg-white px-4 py-3 dark:border-slate-700 dark:bg-slate-800 sm:px-6",children:[e.jsxs("div",{className:"flex flex-1 justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>o(t-1),disabled:t===1,className:"relative inline-flex items-center rounded-md border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 disabled:opacity-50 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-200",children:"Previous"}),e.jsx("button",{onClick:()=>o(t+1),disabled:t===n,className:"relative ml-3 inline-flex items-center rounded-md border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 disabled:opacity-50 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-200",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:["Showing ",e.jsx("span",{className:"font-medium",children:c})," to ",e.jsx("span",{className:"font-medium",children:h})," of"," ",e.jsx("span",{className:"font-medium",children:a})," results"]}),e.jsxs("select",{value:i,onChange:g=>r(Number(g.target.value)),className:"rounded-md border border-slate-300 bg-white px-3 py-1.5 text-sm dark:border-slate-600 dark:bg-slate-700 dark:text-slate-200",children:[e.jsx("option",{value:300,children:"300 per page"}),e.jsx("option",{value:500,children:"500 per page"}),e.jsx("option",{value:800,children:"800 per page"}),e.jsx("option",{value:1e3,children:"1000 per page"})]})]}),e.jsx("div",{children:e.jsxs("nav",{className:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination",children:[e.jsxs("button",{onClick:()=>o(t-1),disabled:t===1,className:"relative inline-flex items-center rounded-l-md px-2 py-2 text-slate-400 ring-1 ring-inset ring-slate-300 hover:bg-slate-50 disabled:opacity-50 dark:ring-slate-600 dark:hover:bg-slate-700",children:[e.jsx("span",{className:"sr-only",children:"Previous"}),e.jsx(ts,{className:"size-5"})]}),b().map((g,w)=>g==="..."?e.jsx("span",{className:"relative inline-flex items-center px-4 py-2 text-sm font-semibold text-slate-700 ring-1 ring-inset ring-slate-300 dark:text-slate-300 dark:ring-slate-600",children:"..."},`ellipsis-${w}`):e.jsx("button",{onClick:()=>o(g),className:`relative inline-flex items-center px-4 py-2 text-sm font-semibold ring-1 ring-inset ring-slate-300 dark:ring-slate-600 ${t===g?"z-10 bg-blue-600 text-white focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600":"text-slate-900 hover:bg-slate-50 dark:text-slate-100 dark:hover:bg-slate-700"}`,children:g},g)),e.jsxs("button",{onClick:()=>o(t+1),disabled:t===n,className:"relative inline-flex items-center rounded-r-md px-2 py-2 text-slate-400 ring-1 ring-inset ring-slate-300 hover:bg-slate-50 disabled:opacity-50 dark:ring-slate-600 dark:hover:bg-slate-700",children:[e.jsx("span",{className:"sr-only",children:"Next"}),e.jsx(rs,{className:"size-5"})]})]})})]})]})}export{ra as default};

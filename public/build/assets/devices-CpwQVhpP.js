import{u as we,a as ye,b as _e,r as l,c as E,j as e}from"./app-BfxOKkQ_.js";import{b as oe,M as ze,C as g,a as ne}from"./monitor-layout-CGA11A74.js";import{N as de}from"./network-Dol91jNi.js";import{S as z,C as ce}from"./server-Cztm0_0s.js";import{W as Ce}from"./wifi-CSmTjqli.js";import{c as D}from"./createLucideIcon-DHR4KVjH.js";import{S as Se}from"./search-BPsSlyun.js";import{R as Ae}from"./refresh-cw-Db-pBLu_.js";import{A as R}from"./activity-C38_CQi_.js";import{C as $}from"./clock-UlpDeDk3.js";import{C as f,U as Me}from"./user-QMczCyLl.js";import{X as L}from"./x-MStIeT5U.js";import{C as F}from"./circle-alert-DP0-L5jM.js";import{W as $e}from"./wifi-off-CHMUTaOV.js";import"./app-DzUtOtYk.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],w=D("ArrowUpDown",Le);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]],De=D("Barcode",Fe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Be=D("Camera",Pe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Te=D("Grid3x3",Ie);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],Ue=D("List",Oe),V=[{id:"all",name:"All Devices",icon:de,count:0},{id:"switches",name:"Switch",icon:de,count:0,description:"Peralatan nadi utama rangkaian UTHM"},{id:"servers",name:"Server",icon:z,count:0,description:"Sistem aplikasi dan Web untuk kegunaan pengguna UTHM"},{id:"wifi",name:"WiFi",icon:Ce,count:0,description:"Kemudahan wifi yang disediakan untuk seluruh kawasan UTHM"},{id:"tas",name:"TAS",icon:oe,count:0,description:"Peralatan sistem kehadiran UTHM"},{id:"cctv",name:"CCTV",icon:Be,count:0,description:"Pemantauan CCTV"}],y=p=>{switch(p){case"online":return"text-green-600 dark:text-green-400";case"offline":return"text-red-600 dark:text-red-400";case"offline_ack":return"text-blue-600 dark:text-blue-400";case"warning":return"text-yellow-600 dark:text-yellow-400";default:return"text-gray-600 dark:text-gray-400"}},_=p=>{switch(p){case"online":return"bg-green-100 dark:bg-green-900/20";case"offline":return"bg-red-100 dark:bg-red-900/20";case"offline_ack":return"bg-blue-100 dark:bg-blue-900/20";case"warning":return"bg-yellow-100 dark:bg-yellow-900/20";default:return"bg-gray-100 dark:bg-gray-900/20"}},G=p=>{switch(p){case"online":return e.jsx(ce,{className:"size-4"});case"offline":return e.jsx($e,{className:"size-4"});case"offline_ack":return e.jsx(F,{className:"size-4"});case"warning":return e.jsx(F,{className:"size-4"});default:return e.jsx(F,{className:"size-4"})}},K=p=>{switch(p){case"offline_ack":return"OFFLINE (ACK)";case"online":return"ONLINE";case"offline":return"OFFLINE";case"warning":return"WARNING";case"unknown":return"UNKNOWN";default:return"UNKNOWN"}};function ts(){const{settings:p}=we(),{t:o}=ye(),{props:xe}=_e(),{currentBranch:n}=xe,[u,Q]=l.useState("all"),[j,J]=l.useState(""),[C,X]=l.useState("all"),[x,W]=l.useState("all"),[r,q]=l.useState("all"),[m,S]=l.useState("all"),[t,A]=l.useState(null),[P,Y]=l.useState("list"),[c,me]=l.useState("name"),[h,Z]=l.useState("asc"),[M,ee]=l.useState(!1),[se,he]=l.useState(null),[B,pe]=l.useState(!1),[b,ue]=l.useState(!0),[I,be]=l.useState(30),[te,ge]=l.useState([]),[ae,fe]=l.useState([]),[T,je]=l.useState([]),k=(n?.devices||[]).filter(s=>s.status!=="offline_ack"),ke=V.map(s=>({...s,count:s.id==="all"?k.length:k.filter(a=>a.category===s.id).length}));l.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),l.useEffect(()=>{if(!b||!n?.id)return;const s=setInterval(()=>{le()},I*1e3);return()=>clearInterval(s)},[b,I,n?.id]);const le=async()=>{if(!(!n?.id||M)){ee(!0);try{const s=await fetch("/api/devices/ping-branch",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({branch_id:n.id})});if(s.ok){const a=await s.json();console.log("Ping results:",a),E.reload(),he(new Date)}else console.error("Failed to ping devices")}catch(s){console.error("Error pinging devices:",s)}finally{ee(!1)}}},Ne=async s=>{try{const a=await fetch(`/api/devices/${s}/ping`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"}});if(a.ok){const d=await a.json();console.log("Ping result:",d),E.reload()}else console.error("Failed to ping device")}catch(a){console.error("Error pinging device:",a)}};let i=u==="all"?k:k.filter(s=>s.category===u);j&&(i=i.filter(s=>s.name.toLowerCase().includes(j.toLowerCase())||s.ip_address.includes(j))),C!=="all"&&(i=i.filter(s=>s.status===C));const H=te.length>0?te:Array.from(new Set(k.map(s=>s.location).filter(Boolean))).map((s,a)=>({id:a,name:s})),O=ae.length>0?ae:Array.from(new Set(k.map(s=>s.hardware_detail?.brand?.name||s.brand).filter(Boolean))).map((s,a)=>({id:a,name:s})),re=r!=="all"?T.filter(s=>s.brand_id===parseInt(r)):T;if(x!=="all"&&(i=i.filter(s=>s.location===x)),r!=="all"){const s=O.find(a=>String(a.id)===r)?.name;s&&(i=i.filter(a=>a.brand===s||a.hardware_detail?.brand?.name===s))}if(m!=="all"){const s=T.find(a=>String(a.id)===m)?.name;s&&(i=i.filter(a=>a.model===s||a.hardware_detail?.hardware_model?.name===s))}const N=s=>{c===s?Z(h==="asc"?"desc":"asc"):(me(s),Z("asc"))},v=[...i].sort((s,a)=>{let d="",U="";return c==="uptime_percentage"?(d=s.uptime_percentage||0,U=a.uptime_percentage||0):(d=s[c]||"",U=a[c]||""),d<U?h==="asc"?-1:1:d>U?h==="asc"?1:-1:0}),ve=()=>{J(""),X("all"),W("all"),q("all"),S("all"),Q("all")},ie=[j,C!=="all",x!=="all",r!=="all",m!=="all",u!=="all"].filter(Boolean).length;return l.useEffect(()=>{n?.id&&(fetch(`/api/locations?branch_id=${n.id}`,{credentials:"same-origin",headers:{Accept:"application/json"}}).then(s=>s.ok?s.json():[]).then(s=>ge(s)).catch(s=>console.error("Error loading locations:",s)),fetch("/api/brands",{credentials:"same-origin",headers:{Accept:"application/json"}}).then(s=>s.ok?s.json():[]).then(s=>fe(s)).catch(s=>console.error("Error loading brands:",s)),fetch("/api/models",{credentials:"same-origin",headers:{Accept:"application/json"}}).then(s=>s.ok?s.json():[]).then(s=>je(s)).catch(s=>console.error("Error loading models:",s)))},[n?.id]),e.jsx(ze,{title:o("devices.title"),children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"rounded-xl border border-blue-200 bg-gradient-to-r from-blue-50 to-indigo-50 p-4 dark:border-blue-900/30 dark:from-blue-950/20 dark:to-indigo-950/20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-lg bg-gradient-to-br from-blue-500 to-indigo-600 p-2 shadow-lg",children:e.jsx(oe,{className:"size-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-blue-900 dark:text-blue-100",children:n?.name||"No Branch Selected"}),e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[n?.description||"Please select a branch"," • ",n?.deviceCount||0," devices"]})]})]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"bg-gradient-to-r from-slate-900 to-slate-700 bg-clip-text text-3xl font-bold text-transparent dark:from-white dark:to-slate-300",children:o("devices.title")}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:o("devices.subtitle")})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Se,{className:"absolute left-3 top-1/2 size-5 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",placeholder:o("devices.search"),value:j,onChange:s=>J(s.target.value),className:"w-full rounded-xl border border-slate-200 bg-white py-2.5 pl-10 pr-4 text-sm text-slate-900 placeholder-slate-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 dark:border-slate-700 dark:bg-slate-800 dark:text-white dark:placeholder-slate-500"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:le,disabled:M,className:`flex items-center gap-2 rounded-lg px-4 py-2 text-sm font-medium transition-all ${M?"bg-slate-300 text-slate-500 cursor-not-allowed dark:bg-slate-700 dark:text-slate-400":"bg-gradient-to-r from-green-500 to-emerald-500 text-white shadow-lg hover:shadow-xl hover:scale-105"}`,title:"Ping all devices",children:[e.jsx(Ae,{className:`size-4 ${M?"animate-spin":""}`}),o(M?"devices.pinging":"devices.pingAll")]}),e.jsxs("button",{onClick:()=>ue(!b),className:`flex items-center gap-2 rounded-lg px-4 py-2 text-sm font-medium transition-all ${b?"bg-gradient-to-r from-blue-500 to-indigo-500 text-white shadow-lg":"border border-slate-200 bg-white text-slate-700 hover:bg-slate-50 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300 dark:hover:bg-slate-700"}`,title:`Auto-refresh every ${I}s`,children:[e.jsx(R,{className:`size-4 ${b?"animate-pulse":""}`}),"Auto-Refresh ",b?"ON":"OFF"]}),b&&e.jsxs("select",{value:I,onChange:s=>be(Number(s.target.value)),className:"rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300",children:[e.jsx("option",{value:10,children:"10s"}),e.jsx("option",{value:30,children:"30s"}),e.jsx("option",{value:60,children:"1min"}),e.jsx("option",{value:300,children:"5min"})]}),se&&e.jsxs("div",{className:"flex items-center gap-2 rounded-lg border border-slate-200 bg-white px-3 py-2 text-xs text-slate-600 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-400",children:[e.jsx($,{className:"size-3"}),"Last: ",se.toLocaleTimeString()]}),e.jsxs("div",{className:"flex gap-1 rounded-lg border border-slate-200 bg-white p-1 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("button",{onClick:()=>Y("grid"),className:`rounded-md p-2 transition-all ${P==="grid"?"bg-gradient-to-r from-blue-500 to-indigo-500 text-white shadow-lg":"text-slate-600 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-700"}`,title:"Grid View",children:e.jsx(Te,{className:"size-4"})}),e.jsx("button",{onClick:()=>Y("list"),className:`rounded-md p-2 transition-all ${P==="list"?"bg-gradient-to-r from-blue-500 to-indigo-500 text-white shadow-lg":"text-slate-600 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-700"}`,title:"List View",children:e.jsx(Ue,{className:"size-4"})})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[["all","online","warning","offline"].map(s=>e.jsx("button",{onClick:()=>X(s),className:`rounded-lg px-3 py-2 text-sm font-medium transition-all ${C===s?"bg-gradient-to-r from-blue-500 to-indigo-500 text-white shadow-lg":"border border-slate-200 bg-white text-slate-700 hover:bg-slate-50 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300 dark:hover:bg-slate-700"}`,children:s==="all"?o("devices.all"):s.charAt(0).toUpperCase()+s.slice(1)},s)),e.jsxs("button",{onClick:()=>pe(!B),className:`flex items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium transition-all ${B||r!=="all"||m!=="all"||x!=="all"?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg":"border border-slate-200 bg-white text-slate-700 hover:bg-slate-50 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300 dark:hover:bg-slate-700"}`,children:["Advanced Filters",B?e.jsx(f,{className:"size-4"}):e.jsx(g,{className:"size-4"})]}),ie>0&&e.jsxs("button",{onClick:ve,className:"flex items-center gap-2 rounded-lg border border-red-200 bg-red-50 px-3 py-2 text-sm font-medium text-red-700 hover:bg-red-100 dark:border-red-900/30 dark:bg-red-900/20 dark:text-red-400 dark:hover:bg-red-900/30",children:[e.jsx(L,{className:"size-4"}),"Clear All (",ie,")"]})]}),B&&e.jsxs("div",{className:"rounded-xl border border-slate-200/50 bg-gradient-to-br from-white to-slate-50 p-4 shadow-inner dark:border-slate-700/50 dark:from-slate-800 dark:to-slate-900",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Location"}),e.jsxs("select",{value:x,onChange:s=>W(s.target.value),className:"w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 dark:border-slate-700 dark:bg-slate-800 dark:text-white",children:[e.jsxs("option",{value:"all",children:["All Locations (",H.length,")"]}),H.map(s=>e.jsx("option",{value:s.name,children:s.name},s.id))]}),e.jsxs("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:["Filtered by ",n?.name||"current branch"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Brand"}),e.jsxs("select",{value:r,onChange:s=>{q(s.target.value),s.target.value==="all"&&S("all")},className:"w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 dark:border-slate-700 dark:bg-slate-800 dark:text-white",children:[e.jsxs("option",{value:"all",children:["All Brands (",O.length,")"]}),O.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"From database"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Model"}),e.jsxs("select",{value:m,onChange:s=>S(s.target.value),disabled:r==="all",className:"w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 disabled:cursor-not-allowed disabled:opacity-50 dark:border-slate-700 dark:bg-slate-800 dark:text-white",children:[e.jsx("option",{value:"all",children:r==="all"?"Select brand first":`All Models (${re.length})`}),re.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:r==="all"?"Dependent on brand":"From database"})]})]}),(r!=="all"||m!=="all"||x!=="all")&&e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2 border-t border-slate-200 pt-4 dark:border-slate-700",children:[e.jsx("span",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400",children:"Active:"}),x!=="all"&&e.jsxs("span",{className:"flex items-center gap-1 rounded-full bg-blue-100 px-2 py-1 text-xs font-medium text-blue-700 dark:bg-blue-900/30 dark:text-blue-300",children:["Location: ",H.find(s=>s.name===x)?.name||x,e.jsx("button",{onClick:()=>W("all"),className:"hover:text-blue-900 dark:hover:text-blue-100",children:e.jsx(L,{className:"size-3"})})]}),r!=="all"&&e.jsxs("span",{className:"flex items-center gap-1 rounded-full bg-purple-100 px-2 py-1 text-xs font-medium text-purple-700 dark:bg-purple-900/30 dark:text-purple-300",children:["Brand: ",O.find(s=>String(s.id)===r)?.name||r,e.jsx("button",{onClick:()=>{q("all"),S("all")},className:"hover:text-purple-900 dark:hover:text-purple-100",children:e.jsx(L,{className:"size-3"})})]}),m!=="all"&&e.jsxs("span",{className:"flex items-center gap-1 rounded-full bg-pink-100 px-2 py-1 text-xs font-medium text-pink-700 dark:bg-pink-900/30 dark:text-pink-300",children:["Model: ",T.find(s=>String(s.id)===m)?.name||m,e.jsx("button",{onClick:()=>S("all"),className:"hover:text-pink-900 dark:hover:text-pink-100",children:e.jsx(L,{className:"size-3"})})]})]}),e.jsx("div",{className:"mt-4 rounded-lg border border-blue-200 bg-blue-50 p-3 dark:border-blue-900/30 dark:bg-blue-950/20",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(R,{className:"size-4 text-blue-600 dark:text-blue-400 mt-0.5 shrink-0"}),e.jsxs("div",{className:"text-xs text-blue-800 dark:text-blue-300",children:[e.jsx("p",{className:"font-semibold",children:"Advanced Filters"}),e.jsxs("p",{className:"mt-1",children:["• Location: Shows locations within ",e.jsx("strong",{children:n?.name||"current branch"})," only"]}),e.jsx("p",{children:"• Brand & Model: Loaded from database configuration"}),e.jsx("p",{children:"• Select brand to filter available models"})]})]})})]})]}),e.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6",children:ke.map(s=>{const a=s.icon,d=u===s.id;return e.jsxs("button",{onClick:()=>Q(s.id),className:`group flex flex-col items-center gap-3 rounded-xl border p-4 transition-all hover:scale-105 ${d?"border-blue-500 bg-gradient-to-br from-blue-50 to-indigo-50 shadow-lg dark:border-blue-400 dark:from-blue-950/30 dark:to-indigo-950/30":"border-slate-200 bg-white hover:border-slate-300 hover:shadow-md dark:border-slate-700 dark:bg-slate-800 dark:hover:border-slate-600"}`,title:s.description,children:[e.jsx("div",{className:`rounded-full p-3 transition-all ${d?"bg-gradient-to-br from-blue-500 to-indigo-600 shadow-lg":"bg-slate-100 group-hover:bg-slate-200 dark:bg-slate-700 dark:group-hover:bg-slate-600"}`,children:e.jsx(a,{className:`size-6 ${d?"text-white":"text-slate-600 dark:text-slate-400"}`})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:`text-sm font-bold ${d?"text-blue-900 dark:text-blue-100":"text-slate-900 dark:text-white"}`,children:s.name}),s.description&&e.jsx("p",{className:`mt-1 text-xs line-clamp-2 ${d?"text-blue-700 dark:text-blue-300":"text-slate-500 dark:text-slate-400"}`,children:s.description}),e.jsxs("p",{className:`mt-1 text-xs font-semibold ${d?"text-blue-600 dark:text-blue-400":"text-slate-500 dark:text-slate-400"}`,children:[s.count," ",o("common.devices")]})]})]},s.id)})}),v.length===0&&e.jsxs("div",{className:"rounded-2xl border border-slate-200/50 bg-white p-12 text-center shadow-lg dark:border-slate-700/50 dark:bg-slate-800",children:[e.jsx(z,{className:"mx-auto mb-4 size-12 text-slate-400"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:o("devices.noDevices")}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:o(j||C!=="all"||u!=="all"?"devices.tryAdjustingFilters":"devices.noDevicesConfigured")})]}),P==="grid"&&v.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:V.find(s=>s.id===u)?.name||"All Devices"}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[i.length," device",i.length!==1?"s":""," found"]})]}),e.jsx("div",{className:"grid gap-3 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6",children:i.map(s=>e.jsx("div",{className:"group cursor-pointer rounded-xl border border-slate-200/50 bg-white p-3 shadow transition-all hover:scale-105 hover:shadow-lg dark:border-slate-700/50 dark:bg-slate-800",onClick:()=>A(s),children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:`mb-2 rounded-lg border p-2 transition-transform group-hover:scale-110 ${_(s.status)}`,children:e.jsx(z,{className:`size-6 ${y(s.status)}`})}),e.jsx("h3",{className:"mb-1 text-sm font-semibold text-slate-900 dark:text-white line-clamp-1",children:s.name}),e.jsx("p",{className:"mb-1 text-xs text-slate-600 dark:text-slate-400",children:s.ip_address}),e.jsxs("div",{className:"mb-2 flex items-center gap-1 text-xs text-slate-500 dark:text-slate-400",children:[e.jsx($,{className:"size-3"}),e.jsxs("span",{children:[s.uptime_percentage,"%"]})]}),e.jsxs("span",{className:`flex items-center gap-1 rounded-full px-2 py-0.5 text-xs font-medium ${_(s.status)} ${y(s.status)}`,children:[G(s.status),K(s.status)]})]})},s.id))})]}),P==="list"&&v.length>0&&e.jsxs("div",{className:"rounded-2xl border border-slate-200/50 bg-white shadow-lg dark:border-slate-700/50 dark:bg-slate-800 overflow-hidden",children:[e.jsx("div",{className:"border-b border-slate-200/50 bg-gradient-to-r from-slate-50 to-slate-100 p-6 dark:border-slate-700/50 dark:from-slate-900/50 dark:to-slate-800/50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-xl bg-gradient-to-br from-blue-500 to-indigo-600 p-3 shadow-lg",children:e.jsx(z,{className:"size-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:V.find(s=>s.id===u)?.name||"All Devices"}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[v.length," device",v.length!==1?"s":""," found"]})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",onClick:()=>N("name"),children:e.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:["Name",c==="name"?h==="asc"?e.jsx(f,{className:"size-4"}):e.jsx(g,{className:"size-4"}):e.jsx(w,{className:"size-4 opacity-30"})]})}),e.jsx("th",{className:"px-6 py-3 text-left cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",onClick:()=>N("ip_address"),children:e.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:["IP Address",c==="ip_address"?h==="asc"?e.jsx(f,{className:"size-4"}):e.jsx(g,{className:"size-4"}):e.jsx(w,{className:"size-4 opacity-30"})]})}),e.jsx("th",{className:"px-6 py-3 text-left cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",onClick:()=>N("uptime_percentage"),children:e.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:["Uptime",c==="uptime_percentage"?h==="asc"?e.jsx(f,{className:"size-4"}):e.jsx(g,{className:"size-4"}):e.jsx(w,{className:"size-4 opacity-30"})]})}),e.jsx("th",{className:"px-6 py-3 text-left cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",onClick:()=>N("status"),children:e.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:["Status",c==="status"?h==="asc"?e.jsx(f,{className:"size-4"}):e.jsx(g,{className:"size-4"}):e.jsx(w,{className:"size-4 opacity-30"})]})}),e.jsx("th",{className:"px-6 py-3 text-left cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",onClick:()=>N("location"),children:e.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:["Location",c==="location"?h==="asc"?e.jsx(f,{className:"size-4"}):e.jsx(g,{className:"size-4"}):e.jsx(w,{className:"size-4 opacity-30"})]})}),e.jsx("th",{className:"px-6 py-3 text-left cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",onClick:()=>N("brand"),children:e.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:["Brand/Model",c==="brand"?h==="asc"?e.jsx(f,{className:"size-4"}):e.jsx(g,{className:"size-4"}):e.jsx(w,{className:"size-4 opacity-30"})]})})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:v.map(s=>e.jsxs("tr",{className:"cursor-pointer transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/50",onClick:()=>A(s),children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`rounded-lg border p-2 ${_(s.status)}`,children:e.jsx(z,{className:`size-4 ${y(s.status)}`})}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-white",children:s.name})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400 font-mono",children:s.ip_address})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[e.jsx($,{className:"size-4"}),s.uptime_percentage,"%"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full px-2.5 py-1 text-xs font-medium ${_(s.status)} ${y(s.status)}`,children:[G(s.status),K(s.status)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.latitude&&s.longitude?e.jsxs("button",{onClick:a=>{a.stopPropagation(),E.visit(`/monitor/maps?deviceId=${s.id}&lat=${s.latitude}&lng=${s.longitude}`)},className:"flex items-center gap-1.5 rounded-lg bg-blue-100 px-2 py-1 text-blue-700 transition-all hover:bg-blue-200 dark:bg-blue-900/30 dark:text-blue-400 dark:hover:bg-blue-900/50",title:"View on map",children:[e.jsx(ne,{className:"size-3.5"}),e.jsx("span",{className:"text-xs font-medium",children:s.location})]}):e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:s.location})}),e.jsx("td",{className:"px-6 py-4",children:s.brand&&s.model?e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-bold text-slate-900 dark:text-white",children:s.brand}),e.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:s.model})]}):e.jsx("span",{className:"text-slate-400 dark:text-slate-600",children:"-"})})]},s.id))})]})})]}),t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900/90 backdrop-blur-md",onClick:()=>A(null)}),e.jsxs("div",{className:"fixed left-1/2 top-1/2 z-50 w-full max-w-2xl -translate-x-1/2 -translate-y-1/2 overflow-hidden rounded-2xl border border-slate-200/50 bg-white shadow-2xl dark:border-slate-700/50 dark:bg-slate-900",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200/50 p-6 dark:border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`rounded-xl border p-3 ${_(t.status)}`,children:e.jsx(z,{className:`size-6 ${y(t.status)}`})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:t.name}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:t.ip_address})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>Ne(t.id),className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white transition-all hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600",title:"Ping this device",children:[e.jsx(R,{className:"size-4"}),"Ping Device"]}),e.jsx("button",{onClick:()=>A(null),className:"rounded-lg p-2 text-slate-500 transition-all hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-800",children:e.jsx(L,{className:"size-5"})})]})]}),e.jsx("div",{className:"max-h-[70vh] overflow-y-auto p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"mb-3 text-sm font-semibold text-slate-900 dark:text-white",children:"Status"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:`flex items-center gap-2 rounded-full px-3 py-1 text-sm font-medium ${_(t.status)} ${y(t.status)}`,children:[G(t.status),K(t.status)]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-3 text-sm font-semibold text-slate-900 dark:text-white",children:"Uptime"}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-700 dark:text-slate-300",children:[e.jsx($,{className:"size-4"}),e.jsxs("span",{className:"text-lg font-semibold",children:[t.uptime_percentage,"%"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-3 text-sm font-semibold text-slate-900 dark:text-white",children:"Response Time"}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-700 dark:text-slate-300",children:[e.jsx(R,{className:"size-4"}),e.jsx("span",{className:"text-lg font-semibold",children:t.response_time?`${t.response_time}ms`:"N/A"}),t.response_time&&t.response_time>100&&e.jsx("span",{className:"rounded-full bg-yellow-100 px-2 py-0.5 text-xs font-medium text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400",children:"High"})]})]}),t.status==="offline"&&e.jsx(e.Fragment,{children:t.offline_duration_minutes!==void 0&&t.offline_duration_minutes>0&&e.jsxs("div",{className:"rounded-xl bg-orange-50 p-4 dark:bg-orange-950/20",children:[e.jsx("h3",{className:"mb-2 text-sm font-semibold text-orange-900 dark:text-orange-300",children:"Offline Duration"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"size-4 text-orange-600 dark:text-orange-400"}),e.jsxs("span",{className:"text-lg font-semibold text-orange-700 dark:text-orange-400",children:[t.offline_duration_minutes," minute",t.offline_duration_minutes!==1?"s":""]}),t.offline_duration_minutes>=2&&e.jsx("span",{className:"rounded-full bg-red-100 px-2 py-0.5 text-xs font-medium text-red-700 dark:bg-red-900/30 dark:text-red-400",children:"Alert Triggered"})]}),t.offline_since&&e.jsxs("p",{className:"mt-2 text-xs text-orange-600 dark:text-orange-400",children:["Offline since: ",new Date(t.offline_since).toLocaleString()]})]})}),t.status==="offline"&&e.jsx("div",{className:"rounded-xl bg-red-50 p-4 dark:bg-red-950/20",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(F,{className:"size-5 text-red-600 dark:text-red-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-red-700 dark:text-red-400",children:"Device Offline"}),e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:"This device is currently offline and not responding to monitoring requests."})]})]})}),t.status==="offline_ack"&&t.offline_reason&&e.jsx("div",{className:"rounded-xl bg-blue-50 p-4 dark:bg-blue-950/20",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ce,{className:"size-5 text-blue-600 dark:text-blue-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-blue-700 dark:text-blue-400",children:"Offline - Acknowledged"}),e.jsxs("div",{className:"mt-3 rounded-lg border border-blue-200 bg-white p-3 dark:border-blue-900/30 dark:bg-blue-950/30",children:[e.jsx("p",{className:"text-xs font-semibold text-blue-700 dark:text-blue-300",children:"Reason:"}),e.jsx("p",{className:"mt-1 text-sm text-blue-900 dark:text-blue-200",children:t.offline_reason}),t.offline_acknowledged_by&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-blue-600 dark:text-blue-400",children:[e.jsx(Me,{className:"size-3"}),e.jsxs("span",{children:["Acknowledged by ",t.offline_acknowledged_by]}),t.offline_acknowledged_at&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx("span",{children:new Date(t.offline_acknowledged_at).toLocaleString()})]})]})]})]})]})}),t.status==="warning"&&e.jsx("div",{className:"rounded-xl bg-yellow-50 p-4 dark:bg-yellow-950/20",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(F,{className:"size-5 text-yellow-600 dark:text-yellow-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-yellow-700 dark:text-yellow-400",children:"Device Warning"}),e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsx("div",{className:"rounded-lg border border-yellow-200 bg-white p-3 dark:border-yellow-900/30 dark:bg-yellow-950/30",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-yellow-700 dark:text-yellow-300",children:"Response Time:"}),e.jsxs("span",{className:"font-bold text-yellow-900 dark:text-yellow-200",children:[t.response_time?`${t.response_time}ms`:"N/A",t.response_time&&t.response_time>100&&e.jsx("span",{className:"ml-2 text-xs",children:"(High)"})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-yellow-700 dark:text-yellow-300",children:"Uptime:"}),e.jsxs("span",{className:"font-bold text-yellow-900 dark:text-yellow-200",children:[t.uptime_percentage,"%",t.uptime_percentage<95&&e.jsx("span",{className:"ml-2 text-xs",children:"(Below threshold)"})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-yellow-700 dark:text-yellow-300",children:"Last Check:"}),e.jsx("span",{className:"font-medium text-yellow-900 dark:text-yellow-200",children:t.last_check?new Date(t.last_check).toLocaleString():"Never"})]})]})}),e.jsxs("div",{className:"rounded-lg bg-yellow-100 p-3 dark:bg-yellow-900/20",children:[e.jsx("p",{className:"text-xs font-semibold text-yellow-800 dark:text-yellow-300",children:"Possible Issues:"}),e.jsxs("ul",{className:"mt-2 space-y-1 text-sm text-yellow-700 dark:text-yellow-400",children:[t.response_time&&t.response_time>100&&e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"mt-1 size-1 rounded-full bg-yellow-600 dark:bg-yellow-400"}),e.jsx("span",{children:"High response time detected - Network congestion or device overload"})]}),t.uptime_percentage<95&&e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"mt-1 size-1 rounded-full bg-yellow-600 dark:bg-yellow-400"}),e.jsx("span",{children:"Uptime below 95% - Intermittent connectivity issues"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"mt-1 size-1 rounded-full bg-yellow-600 dark:bg-yellow-400"}),e.jsx("span",{children:"Device requires attention - Monitor closely for potential failures"})]})]})]}),e.jsxs("div",{className:"text-xs text-yellow-600 dark:text-yellow-400",children:[e.jsx("p",{className:"font-medium",children:"Recommended Action:"}),e.jsx("p",{className:"mt-1",children:"Schedule maintenance check or investigate network connectivity to prevent potential downtime."})]})]})]})]})}),e.jsxs("div",{className:"rounded-xl bg-slate-50 p-4 dark:bg-slate-800",children:[e.jsx("h3",{className:"mb-3 text-sm font-semibold text-slate-900 dark:text-white",children:"Device Information"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Category:"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:V.find(s=>s.id===t.category)?.name})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"IP Address:"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white font-mono",children:t.ip_address})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"MAC Address:"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white font-mono",children:t.mac_address})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Barcode:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"size-4 text-slate-500 dark:text-slate-400"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white font-mono",children:t.barcode})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Response Time:"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:t.response_time?`${t.response_time}ms`:"N/A"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Last Ping:"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:t.last_ping?new Date(t.last_ping).toLocaleString():"Never"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Last Updated:"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:t.updated_at?new Date(t.updated_at).toLocaleString():"N/A"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Location:"}),e.jsxs("button",{onClick:()=>{A(null),E.visit("/monitor/maps",{data:{deviceId:t.id,lat:t.latitude,lng:t.longitude}})},className:"flex items-center gap-1.5 rounded-lg bg-blue-100 px-3 py-1.5 text-blue-700 transition-all hover:bg-blue-200 dark:bg-blue-900/30 dark:text-blue-400 dark:hover:bg-blue-900/50",children:[e.jsx(ne,{className:"size-3.5"}),e.jsx("span",{className:"font-medium",children:t.location})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Brand/Model:"}),t.brand&&t.model?e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"text-sm font-bold text-slate-900 dark:text-white",children:t.brand}),e.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:t.model})]}):e.jsx("span",{className:"text-slate-400 dark:text-slate-600",children:"-"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Device ID:"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:t.id})]})]})]})]})})]})]})]})})}export{ts as default};

import{r as i,U as pe,a as ut,b as $e,j as e,c as fe}from"./app-Bi1276fp.js";import{M as mt,T as de,b as ge,a as ze,c as ht,C as bt}from"./monitor-layout-C2w6m2b6.js";import{l as ke,L as Le}from"./leaflet-DUpzZDIk.js";import{S as Y,C as Re}from"./server-DCQRRBFs.js";import{R as pt}from"./refresh-cw-BHaJX9n5.js";import{C as ft}from"./check-CE5rzrRu.js";import{c as ie}from"./createLucideIcon-4p5FK-lq.js";import{S as Me}from"./search-heTBELu4.js";import{X as Be,C as gt}from"./x-_iMpUtna.js";import{S as kt}from"./save-Cm0tMat5.js";import{E as jt}from"./eye-dFLHYiCB.js";import{U as Te,C as Nt}from"./user-CLArjpVF.js";import"./index-Zex2rIDl.js";import"./app-dVD4YXJP.js";import"./activity-xON8AFpi.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Ve=ie("History",vt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ie=ie("Plus",wt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],I=ie("SquarePen",yt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],B=ie("Trash2",Ct);function St(t,a){const s=i.useRef(a);i.useEffect(function(){a!==s.current&&t.attributionControl!=null&&(s.current!=null&&t.attributionControl.removeAttribution(s.current),a!=null&&t.attributionControl.addAttribution(a)),s.current=a},[t,a])}const _t=1;function Et(t){return Object.freeze({__version:_t,map:t})}function At(t,a){return Object.freeze({...t,...a})}const je=i.createContext(null);function qe(){const t=i.use(je);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function Dt(t){function a(s,n){const{instance:d,context:l}=t(s).current;i.useImperativeHandle(n,()=>d);const{children:o}=s;return o==null?null:pe.createElement(je,{value:l},o)}return i.forwardRef(a)}function zt(t){function a(s,n){const{instance:d}=t(s).current;return i.useImperativeHandle(n,()=>d),null}return i.forwardRef(a)}function Lt(t,a){const s=i.useRef(void 0);i.useEffect(function(){return a!=null&&t.instance.on(a),s.current=a,function(){s.current!=null&&t.instance.off(s.current),s.current=null}},[t,a])}function Oe(t,a){const s=t.pane??a.pane;return s?{...t,pane:s}:t}function He(t,a,s){return Object.freeze({instance:t,context:a,container:s})}function Ue(t,a){return a==null?function(n,d){const l=i.useRef(void 0);return l.current||(l.current=t(n,d)),l}:function(n,d){const l=i.useRef(void 0);l.current||(l.current=t(n,d));const o=i.useRef(n),{instance:f}=l.current;return i.useEffect(function(){o.current!==n&&(a(f,n,o.current),o.current=n)},[f,n,a]),l}}function Mt(t,a){i.useEffect(function(){return(a.layerContainer??a.map).addLayer(t.instance),function(){a.layerContainer?.removeLayer(t.instance),a.map.removeLayer(t.instance)}},[a,t])}function Pe(t){return function(s){const n=qe(),d=t(Oe(s,n),n);return St(n.map,s.attribution),Lt(d.current,s.eventHandlers),Mt(d.current,n),d}}function Bt(t,a){const s=Ue(t,a),n=Pe(s);return Dt(n)}function Vt(t,a){const s=Ue(t,a),n=Pe(s);return zt(n)}function Ft(t,a,s){const{opacity:n,zIndex:d}=a;n!=null&&n!==s.opacity&&t.setOpacity(n),d!=null&&d!==s.zIndex&&t.setZIndex(d)}function $t(){return qe().map}function Rt(t){const a=$t();return i.useEffect(function(){return a.on(t),function(){a.off(t)}},[a,t]),a}function Tt({bounds:t,boundsOptions:a,center:s,children:n,className:d,id:l,placeholder:o,style:f,whenReady:x,zoom:b,...u},N){const[m]=i.useState({className:d,id:l,style:f}),[w,J]=i.useState(null),q=i.useRef(void 0);i.useImperativeHandle(N,()=>w?.map??null,[w]);const Q=i.useCallback(_=>{if(_!==null&&!q.current){const E=new ke.Map(_,u);q.current=E,s!=null&&b!=null?E.setView(s,b):t!=null&&E.fitBounds(t,a),x!=null&&E.whenReady(x),J(Et(E))}},[]);i.useEffect(()=>()=>{w?.map.remove()},[w]);const y=w?pe.createElement(je,{value:w},n):o??null;return pe.createElement("div",{...m,ref:Q},y)}const It=i.forwardRef(Tt),qt=Bt(function({position:a,...s},n){const d=new ke.Marker(a,s);return He(d,At(n,{overlayContainer:d}))},function(a,s,n){s.position!==n.position&&a.setLatLng(s.position),s.icon!=null&&s.icon!==n.icon&&a.setIcon(s.icon),s.zIndexOffset!=null&&s.zIndexOffset!==n.zIndexOffset&&a.setZIndexOffset(s.zIndexOffset),s.opacity!=null&&s.opacity!==n.opacity&&a.setOpacity(s.opacity),a.dragging!=null&&s.draggable!==n.draggable&&(s.draggable===!0?a.dragging.enable():a.dragging.disable())}),Ot=Vt(function({url:a,...s},n){const d=new ke.TileLayer(a,Oe(s,n));return He(d,n)},function(a,s,n){Ft(a,s,n);const{url:d}=s;d!=null&&d!==n.url&&a.setUrl(d)}),We=t=>({tas:"TAS",cctv:"CCTV",wifi:"WiFi",switches:"Switches",servers:"Servers"})[t.toLowerCase()]||t.charAt(0).toUpperCase()+t.slice(1),Ht=t=>{if(t===0)return"0m";const a=t,s=Math.floor(a/60),n=Math.floor(s/24),d=Math.floor(n/7);if(d>0){const l=n%7;return l>0?`${d}w ${l}d`:`${d}w`}else if(n>0){const l=s%24;return l>0?`${n}d ${l}h`:`${n}d`}else if(s>0){const l=a%60;return l>0?`${s}h ${l}m`:`${s}h`}else return`${a}m`};function ps(){const{t}=ut(),{currentBranch:a}=$e().props,[s,n]=i.useState("devices"),[d,l]=i.useState(!1),[o,f]=i.useState("create"),[x,b]=i.useState(null),[u,N]=i.useState(!1),[m,w]=i.useState(null),[J,q]=i.useState([]),[Q,y]=i.useState([]),[_,E]=i.useState([]),[se,$]=i.useState([]),[K,ae]=i.useState([]),[r,k]=i.useState([]),[L,C]=i.useState([]),[Z,O]=i.useState([]),[A,D]=i.useState(!1),[v,H]=i.useState([]),[h,V]=i.useState(!1),[R,F]=i.useState(1),[U,Ne]=i.useState(50),[ve,Xe]=i.useState(0),[we,Je]=i.useState(1),[ee,Ke]=i.useState(""),[ce,Ze]=i.useState("all"),[oe,Ge]=i.useState("all"),[te,Ye]=i.useState(""),[xe,Qe]=i.useState("all"),[ue,et]=i.useState("all"),[le,tt]=i.useState("name"),[me,ye]=i.useState("asc"),[re,st]=i.useState("triggered_at"),[he,Ce]=i.useState("desc");i.useEffect(()=>{F(1),P(),H([])},[s,a?.id]),i.useEffect(()=>{P()},[R,U]),i.useEffect(()=>{const c=setInterval(()=>{P()},3e4);return()=>clearInterval(c)},[s,a?.id]);const P=async()=>{D(!0);try{let j={branches:"/api/branches",devices:"/api/devices",alerts:"/api/alerts",locations:"/api/locations",users:"/api/users",brands:"/api/brands",models:"/api/models",history:"/api/activity-logs"}[s];if(!j){D(!1);return}const p=new URLSearchParams;a?.id&&["devices","alerts","locations","history"].includes(s)&&p.append("branch_id",a.id.toString()),["devices","alerts","locations","users"].includes(s)&&(p.append("page",R.toString()),p.append("per_page",U.toString())),p.toString()&&(j+=`?${p.toString()}`),console.log("Fetching from:",j);const g=await fetch(j,{credentials:"same-origin",headers:{Accept:"application/json"}});if(console.log("Response status:",g.status),g.ok){const S=await g.json();console.log("Fetched data:",S);const ne=S.pagination!==void 0,M=ne?S.data:S;switch(ne&&(Xe(S.pagination.total),Je(S.pagination.last_page),F(S.pagination.current_page)),s){case"branches":console.log("Setting branches:",M),$(M);break;case"devices":q(M);break;case"alerts":y(M);break;case"locations":E(M);break;case"users":ae(M);break;case"brands":k(M);break;case"models":C(M);break;case"history":O(M);break}}else console.error("Failed to fetch:",g.statusText)}catch(c){console.error("Error fetching data:",c)}finally{D(!1)}},Se=async()=>{try{await fetch("/sanctum/csrf-cookie",{credentials:"same-origin"});const c=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");return c||(console.error("CSRF token not found after refresh"),"")}catch(c){return console.error("Failed to fetch CSRF token:",c),""}},at=()=>{f("create"),b(null),l(!0)},T=c=>{f("edit"),b(c),l(!0)},W=c=>{f("delete"),b(c),l(!0)},lt=c=>{f("acknowledge"),b(c),l(!0)},rt=c=>{w(c),N(!0)},nt=async()=>{D(!0);try{const j={branches:"/api/branches",devices:"/api/devices",alerts:"/api/alerts",locations:"/api/locations",users:"/api/users",brands:"/api/brands",models:"/api/models"}[s],p=o==="create"?j:`${j}/${x?.id}`,g=new FormData(document.querySelector("form")),S={};g.forEach((z,G)=>{G==="location_id"&&z===""||G==="hardware_detail_id"&&z===""||(S[G]=z)});const ne=document.querySelector("form");["is_active","acknowledged","resolved"].forEach(z=>{const G=ne.querySelector(`input[name="${z}"]`);G&&(S[z]=G.checked)}),console.log("Saving data:",S);const ot=await Se(),xt="POST",Ae=o==="create"?S:{...S,_method:"PUT"};console.log("Request data:",Ae);const De=await fetch(p,{method:xt,headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":ot},credentials:"same-origin",body:JSON.stringify(Ae)});if(De.ok)await P(),l(!1),b(null);else{const z=await De.json();console.error("Save error:",z),alert(`Failed to save: ${z.error||z.message||"Unknown error"}
${JSON.stringify(z.messages||{},null,2)}`)}}catch(c){console.error("Error saving:",c),alert("Failed to save. Please try again.")}finally{D(!1)}},dt=async()=>{D(!0);try{const j=`${{branches:"/api/branches",devices:"/api/devices",alerts:"/api/alerts",locations:"/api/locations",users:"/api/users",brands:"/api/brands",models:"/api/models"}[s]}/${x?.id}`,p=await Se(),g=await fetch(j,{method:"DELETE",headers:{Accept:"application/json","X-CSRF-TOKEN":p},credentials:"same-origin"});if(g.ok)await P(),l(!1);else{const S=await g.json();alert(S.error||"Failed to delete")}}catch(c){console.error("Error deleting:",c),alert("Failed to delete. Please try again.")}finally{D(!1)}},it=async()=>{if(v.length===0){alert("Please select items to delete");return}if(confirm(`Are you sure you want to delete ${v.length} selected item(s)?`)){V(!0);try{const j={branches:"/api/branches",devices:"/api/devices",alerts:"/api/alerts",locations:"/api/locations",users:"/api/users",brands:"/api/brands",models:"/api/models",history:"/api/activity-logs"}[s];if(!j)return;const p=v.map(g=>fetch(`${j}/${g}`,{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}}));await Promise.all(p),await P(),H([]),alert(`Successfully deleted ${v.length} item(s)`)}catch(c){console.error("Error bulk deleting:",c),alert("Failed to delete some items. Please try again.")}finally{V(!1)}}},X=c=>{H(j=>j.includes(c)?j.filter(p=>p!==c):[...j,c])},ct=()=>{const c=be();v.length===c.length?H([]):H(c.map(j=>j.id))},be=()=>{switch(s){case"branches":return se;case"devices":return _e;case"alerts":return Ee;case"locations":return _;case"users":return K;case"brands":return r;case"models":return L;case"history":return Z;default:return[]}};i.useEffect(()=>{const c=j=>{console.error("Configuration page error:",j)};return window.addEventListener("error",c),()=>window.removeEventListener("error",c)},[]),i.useEffect(()=>{d&&s==="devices"&&K.length===0&&fetch("/api/users",{credentials:"same-origin",headers:{Accept:"application/json"}}).then(c=>c.json()).then(c=>{ae(c)}).catch(c=>console.error("Error fetching users:",c))},[d,s]);const _e=J.filter(c=>{const j=ee===""||c.name.toLowerCase().includes(ee.toLowerCase())||c.ip_address.toLowerCase().includes(ee.toLowerCase())||c.barcode&&c.barcode.toLowerCase().includes(ee.toLowerCase()),p=ce==="all"||c.status===ce,g=oe==="all"||c.category===oe;return j&&p&&g}).sort((c,j)=>{let p=c[le],g=j[le];return p==null?1:g==null?-1:(p=String(p).toLowerCase(),g=String(g).toLowerCase(),me==="asc"?p<g?-1:p>g?1:0:p>g?-1:p<g?1:0)}),Ee=Q.filter(c=>{const j=te===""||c.title.toLowerCase().includes(te.toLowerCase())||c.message.toLowerCase().includes(te.toLowerCase())||c.device?.name&&c.device.name.toLowerCase().includes(te.toLowerCase()),p=xe==="all"||c.status===xe,g=ue==="all"||c.severity===ue;return j&&p&&g}).sort((c,j)=>{let p=c[re],g=j[re];return p==null?1:g==null?-1:(p=String(p).toLowerCase(),g=String(g).toLowerCase(),he==="asc"?p<g?-1:p>g?1:0:p>g?-1:p<g?1:0)});return e.jsxs(mt,{title:t("config.title"),children:[e.jsxs("div",{className:"space-y-6",children:[a?.id&&e.jsx("div",{className:"rounded-xl border border-blue-200 bg-gradient-to-r from-blue-50 to-indigo-50 p-4 dark:border-blue-900/30 dark:from-blue-950/20 dark:to-indigo-950/20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-lg bg-gradient-to-br from-blue-500 to-indigo-600 p-2 shadow-lg",children:e.jsx(Y,{className:"size-5 text-white"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-blue-900 dark:text-blue-100",children:["Managing: ",a.name]}),e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[a.description," • Branch Code: ",a.code]})]})]})}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"bg-gradient-to-r from-slate-900 to-slate-700 bg-clip-text text-3xl font-bold text-transparent dark:from-white dark:to-slate-300",children:t("config.title")}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:t("config.subtitle")})]})}),e.jsx("div",{className:"flex gap-2 overflow-x-auto rounded-xl border border-slate-200/50 bg-white p-2 shadow-lg dark:border-slate-700/50 dark:bg-slate-800",children:["branches","devices","alerts","locations","brands","models","users","history"].map(c=>e.jsx("button",{onClick:()=>n(c),className:`whitespace-nowrap rounded-lg px-4 py-2 text-sm font-medium transition-all ${s===c?"bg-gradient-to-r from-blue-500 to-indigo-500 text-white shadow-lg":"text-slate-600 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-700"}`,children:c.charAt(0).toUpperCase()+c.slice(1)},c))}),e.jsxs("div",{className:"rounded-2xl border border-slate-200/50 bg-white shadow-lg dark:border-slate-700/50 dark:bg-slate-800",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200/50 bg-gradient-to-r from-slate-50 to-slate-100 p-6 dark:border-slate-700/50 dark:from-slate-900/50 dark:to-slate-800/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-xl bg-gradient-to-br from-purple-500 to-pink-600 p-3 shadow-lg",children:e.jsx(Y,{className:"size-6 text-white"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:["Manage ",s.charAt(0).toUpperCase()+s.slice(1)]}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Create, edit, and manage your ",s]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>P(),disabled:A,className:"flex items-center gap-2 rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 shadow-sm transition-all hover:bg-slate-50 disabled:opacity-50 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600",title:"Refresh data",children:[e.jsx(pt,{className:`size-4 ${A?"animate-spin":""}`}),"Refresh"]}),s!=="history"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:ct,className:"flex items-center gap-2 rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 shadow-sm transition-all hover:bg-slate-50 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600",title:v.length===be().length?"Deselect All":"Select All",children:[e.jsx(ft,{className:"size-4"}),v.length===be().length?"Deselect All":"Select All"]}),v.length>0&&e.jsxs("button",{onClick:it,disabled:h,className:"flex items-center gap-2 rounded-lg bg-gradient-to-r from-red-500 to-red-600 px-4 py-2 text-sm font-medium text-white shadow-lg transition-all hover:scale-105 disabled:opacity-50",title:`Delete ${v.length} selected item(s)`,children:[e.jsx(B,{className:"size-4"}),"Delete Selected (",v.length,")"]}),e.jsxs("button",{onClick:at,className:"flex items-center gap-2 rounded-lg bg-gradient-to-r from-blue-500 to-indigo-500 px-4 py-2 text-sm font-medium text-white shadow-lg transition-all hover:scale-105",children:[e.jsx(Ie,{className:"size-4"}),"Add New"]})]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:A?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"mx-auto mb-4 size-12 animate-spin rounded-full border-4 border-slate-300 border-t-blue-600"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading..."})]}):e.jsxs(e.Fragment,{children:[s==="branches"&&e.jsx(Xt,{branches:se,onEdit:T,onDelete:W,selectedIds:v,onToggleSelection:X}),s==="devices"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Me,{className:"absolute left-3 top-1/2 size-5 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search devices by name, IP, or barcode...",value:ee,onChange:c=>Ke(c.target.value),className:"w-full rounded-xl border border-slate-200 bg-white py-2.5 pl-10 pr-4 text-sm text-slate-900 dark:border-slate-700 dark:bg-slate-800 dark:text-white"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:oe,onChange:c=>Ge(c.target.value),className:"rounded-lg border border-slate-200 bg-white px-4 py-2 text-sm dark:border-slate-700 dark:bg-slate-800 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Categories"}),e.jsx("option",{value:"switches",children:"Switches"}),e.jsx("option",{value:"servers",children:"Servers"}),e.jsx("option",{value:"wifi",children:"WiFi"}),e.jsx("option",{value:"tas",children:"TAS"}),e.jsx("option",{value:"cctv",children:"CCTV"})]}),e.jsxs("select",{value:ce,onChange:c=>Ze(c.target.value),className:"rounded-lg border border-slate-200 bg-white px-4 py-2 text-sm dark:border-slate-700 dark:bg-slate-800 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"online",children:"Online"}),e.jsx("option",{value:"warning",children:"Warning"}),e.jsx("option",{value:"offline",children:"Offline"}),e.jsx("option",{value:"offline_ack",children:"Acknowledged"})]})]})]}),e.jsx(Ut,{devices:_e,onView:rt,onEdit:T,onDelete:W,onAcknowledgeOffline:lt,sortField:le,sortDirection:me,onSort:c=>{le===c?ye(me==="asc"?"desc":"asc"):(tt(c),ye("asc"))},selectedIds:v,onToggleSelection:X}),e.jsx(Fe,{currentPage:R,totalPages:we,totalItems:ve,perPage:U,onPageChange:F,onPerPageChange:Ne})]}),s==="alerts"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Me,{className:"absolute left-3 top-1/2 size-5 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search alerts...",value:te,onChange:c=>Ye(c.target.value),className:"w-full rounded-xl border border-slate-200 bg-white py-2.5 pl-10 pr-4 text-sm text-slate-900 dark:border-slate-700 dark:bg-slate-800 dark:text-white"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:ue,onChange:c=>et(c.target.value),className:"rounded-lg border border-slate-200 bg-white px-4 py-2 text-sm dark:border-slate-700 dark:bg-slate-800 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Severities"}),e.jsx("option",{value:"critical",children:"Critical"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"low",children:"Low"})]}),e.jsxs("select",{value:xe,onChange:c=>Qe(c.target.value),className:"rounded-lg border border-slate-200 bg-white px-4 py-2 text-sm dark:border-slate-700 dark:bg-slate-800 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"acknowledged",children:"Acknowledged"}),e.jsx("option",{value:"resolved",children:"Resolved"})]})]})]}),e.jsx(Pt,{alerts:Ee,onEdit:T,onDelete:W,sortField:re,sortDirection:he,onSort:c=>{re===c?Ce(he==="asc"?"desc":"asc"):(st(c),Ce("asc"))},selectedIds:v,onToggleSelection:X}),e.jsx(Fe,{currentPage:R,totalPages:we,totalItems:ve,perPage:U,onPageChange:F,onPerPageChange:Ne})]}),s==="locations"&&e.jsx(Wt,{locations:_,onEdit:T,onDelete:W,selectedIds:v,onToggleSelection:X}),s==="users"&&e.jsx(Jt,{users:K,onEdit:T,onDelete:W,selectedIds:v,onToggleSelection:X}),s==="brands"&&e.jsx(Kt,{brands:r,onEdit:T,onDelete:W,selectedIds:v,onToggleSelection:X}),s==="models"&&e.jsx(Zt,{models:L,onEdit:T,onDelete:W,selectedIds:v,onToggleSelection:X}),s==="history"&&e.jsx(Yt,{activities:Z})]})})]})]}),d&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"w-full max-w-4xl my-8 rounded-2xl border border-slate-200 bg-white shadow-2xl dark:border-slate-700 dark:bg-slate-800",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200 p-6 dark:border-slate-700",children:[e.jsxs("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:[o==="create"&&`Create New ${s.slice(0,-1)}`,o==="edit"&&`Edit ${s.slice(0,-1)}`,o==="delete"&&`Delete ${s.slice(0,-1)}`,o==="acknowledge"&&"Acknowledge Offline Device"]}),e.jsx("button",{onClick:()=>l(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:e.jsx(Be,{className:"size-6"})})]}),e.jsx("div",{className:"max-h-[calc(100vh-250px)] overflow-y-auto p-6",children:o==="delete"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 rounded-lg bg-red-50 p-4 dark:bg-red-900/20",children:[e.jsx(de,{className:"size-6 text-red-600 dark:text-red-400"}),e.jsx("p",{className:"text-sm text-red-800 dark:text-red-400",children:"Are you sure you want to delete this item? This action cannot be undone."})]}),x&&e.jsx("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-4 dark:border-slate-700 dark:bg-slate-900",children:e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:"title"in x?x.title:"name"in x?x.name:`ID: ${x.id}`})})]}):o==="acknowledge"?e.jsx(Gt,{device:x}):e.jsx(Qt,{entity:s,mode:o,data:x,users:K})}),e.jsxs("div",{className:"flex justify-end gap-3 border-t border-slate-200 p-6 dark:border-slate-700",children:[e.jsx("button",{onClick:()=>l(!1),disabled:A,className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-medium text-slate-700 transition-colors hover:bg-slate-50 dark:border-slate-600 dark:text-slate-300 dark:hover:bg-slate-700 disabled:opacity-50",children:"Cancel"}),o==="delete"?e.jsxs("button",{onClick:dt,disabled:A,className:"flex items-center gap-2 rounded-lg bg-red-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-red-700 disabled:opacity-50",children:[e.jsx(B,{className:"size-4"}),A?"Deleting...":"Delete"]}):e.jsxs("button",{onClick:nt,disabled:A,className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-blue-700 disabled:opacity-50",children:[e.jsx(kt,{className:"size-4"}),A?"Saving...":"Save"]})]})]})}),u&&m&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:e.jsxs("div",{className:"w-full max-w-4xl rounded-2xl bg-white shadow-2xl dark:bg-slate-800",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200 p-6 dark:border-slate-700",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Device Details"}),e.jsx("button",{onClick:()=>N(!1),className:"rounded-lg p-2 text-slate-500 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-700",children:e.jsx(Be,{className:"size-5"})})]}),e.jsx("div",{className:"max-h-[70vh] overflow-y-auto p-6",children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Basic Information"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Device Name"}),e.jsx("p",{className:"mt-1 text-slate-900 dark:text-white",children:m.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"IP Address"}),e.jsx("p",{className:"mt-1 font-mono text-slate-900 dark:text-white",children:m.ip_address})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"MAC Address"}),e.jsx("p",{className:"mt-1 font-mono text-slate-900 dark:text-white",children:m.mac_address||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Barcode"}),e.jsx("p",{className:"mt-1 text-slate-900 dark:text-white",children:m.barcode})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Serial Number"}),e.jsx("p",{className:"mt-1 text-slate-900 dark:text-white",children:m.serial_number||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Category"}),e.jsx("p",{className:"mt-1 text-slate-900 dark:text-white",children:We(m.category)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Status"}),e.jsx("p",{className:"mt-1",children:e.jsx("span",{className:`inline-flex rounded-full px-2 py-1 text-xs font-medium ${m.status==="online"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":m.status==="warning"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}`,children:m.status})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Location & Management"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Branch"}),e.jsx("p",{className:"mt-1 text-slate-900 dark:text-white",children:m.branch?.name||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Location"}),e.jsx("p",{className:"mt-1 text-slate-900 dark:text-white",children:m.location?.name||m.location_name||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Managed By"}),m.managed_by_user?e.jsxs("div",{className:"mt-1",children:[e.jsx("p",{className:"text-slate-900 dark:text-white",children:m.managed_by_user.name}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:m.managed_by_user.email}),e.jsx("span",{className:`mt-1 inline-flex rounded-full px-2 py-0.5 text-xs font-medium ${m.managed_by_user.role==="admin"?"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400"}`,children:m.managed_by_user.role})]}):e.jsx("p",{className:"mt-1 text-slate-400 dark:text-slate-600",children:"Not assigned"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Hardware"}),m.hardware_detail?e.jsxs("div",{className:"mt-1",children:[e.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:m.hardware_detail.brand}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:m.hardware_detail.model})]}):e.jsx("p",{className:"mt-1 text-slate-400 dark:text-slate-600",children:"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Uptime"}),e.jsx("p",{className:"mt-1 text-slate-900 dark:text-white",children:Ht(m.uptime_minutes)})]}),m.response_time&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Response Time"}),e.jsxs("p",{className:"mt-1 text-slate-900 dark:text-white",children:[m.response_time,"ms"]})]})]})]})}),e.jsxs("div",{className:"flex justify-end gap-3 border-t border-slate-200 p-6 dark:border-slate-700",children:[e.jsx("button",{onClick:()=>{N(!1),T(m)},className:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700",children:"Edit Device"}),e.jsx("button",{onClick:()=>N(!1),className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 dark:border-slate-600 dark:text-slate-300 dark:hover:bg-slate-700",children:"Close"})]})]})})]})}function Ut({devices:t,onView:a,onEdit:s,onDelete:n,onAcknowledgeOffline:d,sortField:l,sortDirection:o,onSort:f,selectedIds:x,onToggleSelection:b}){return t.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Y,{className:"mx-auto mb-4 size-12 text-slate-400"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No devices found"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-500",children:'Click "Add New" to create your first device'})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300 w-12",children:e.jsx("input",{type:"checkbox",checked:x.length===t.length&&t.length>0,onChange:()=>{x.length===t.length?t.forEach(u=>b(u.id)):t.forEach(u=>{x.includes(u.id)||b(u.id)})},className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsx("th",{onClick:()=>f("name"),className:"cursor-pointer px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-800",children:e.jsxs("div",{className:"flex items-center gap-1",children:["Name",l==="name"&&e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:o==="asc"?"↑":"↓"})]})}),e.jsx("th",{onClick:()=>f("ip_address"),className:"cursor-pointer px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-800",children:e.jsxs("div",{className:"flex items-center gap-1",children:["IP Address",l==="ip_address"&&e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:o==="asc"?"↑":"↓"})]})}),e.jsx("th",{onClick:()=>f("category"),className:"cursor-pointer px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-800",children:e.jsxs("div",{className:"flex items-center gap-1",children:["Category",l==="category"&&e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:o==="asc"?"↑":"↓"})]})}),e.jsx("th",{onClick:()=>f("status"),className:"cursor-pointer px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-800",children:e.jsxs("div",{className:"flex items-center gap-1",children:["Status",l==="status"&&e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:o==="asc"?"↑":"↓"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Branch"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Brand/Model"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:t.map(u=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:x.includes(u.id),onChange:()=>b(u.id),className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-slate-900 dark:text-white",children:u.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-600 dark:text-slate-400 font-mono",children:u.ip_address}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:e.jsx("span",{className:"rounded-full bg-slate-100 px-2 py-1 text-xs font-medium dark:bg-slate-700",children:We(u.category)})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex rounded-full px-2 py-1 text-xs font-medium ${u.status==="online"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":u.status==="warning"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":u.status==="maintenance"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}`,children:u.status})}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"size-3.5 text-slate-400"}),e.jsx("span",{children:u.branch?.name||"-"})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:u.location?u.latitude&&u.longitude?e.jsxs("button",{onClick:()=>{fe.visit("/monitor/maps",{data:{deviceId:u.id,lat:u.latitude,lng:u.longitude}})},className:"flex items-center gap-1.5 rounded-lg bg-blue-100 px-2 py-1 text-blue-700 transition-all hover:bg-blue-200 dark:bg-blue-900/30 dark:text-blue-400 dark:hover:bg-blue-900/50",title:"View on map",children:[e.jsx(ze,{className:"size-3.5"}),e.jsx("span",{className:"text-xs font-medium",children:u.location.name})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"size-3.5 text-slate-400"}),e.jsx("span",{children:u.location.name})]}):e.jsx("span",{className:"text-slate-400 dark:text-slate-600",children:"-"})}),e.jsx("td",{className:"px-6 py-4",children:u.hardware_detail?e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-bold text-slate-900 dark:text-white",children:u.hardware_detail.brand}),e.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:u.hardware_detail.model})]}):e.jsx("span",{className:"text-slate-400 dark:text-slate-600",children:"-"})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[u.status==="offline"&&e.jsx("button",{onClick:()=>d(u),className:"rounded-lg p-2 text-orange-600 hover:bg-orange-50 dark:text-orange-400 dark:hover:bg-orange-900/30",title:"Acknowledge Offline",children:e.jsx(Re,{className:"size-4"})}),e.jsx("button",{onClick:()=>a(u),className:"rounded-lg p-2 text-green-600 hover:bg-green-50 dark:text-green-400 dark:hover:bg-green-900/30",title:"View Details",children:e.jsx(jt,{className:"size-4"})}),e.jsx("button",{onClick:()=>s(u),className:"rounded-lg p-2 text-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/30",children:e.jsx(I,{className:"size-4"})}),e.jsx("button",{onClick:()=>n(u),className:"rounded-lg p-2 text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/30",children:e.jsx(B,{className:"size-4"})})]})})]},u.id))})]})}function Pt({alerts:t,onEdit:a,onDelete:s,sortField:n,sortDirection:d,onSort:l,selectedIds:o,onToggleSelection:f}){return t.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(de,{className:"mx-auto mb-4 size-12 text-slate-400"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No alerts found"})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300 w-12",children:e.jsx("input",{type:"checkbox",checked:o.length===t.length&&t.length>0,onChange:()=>{o.length===t.length?t.forEach(x=>f(x.id)):t.forEach(x=>{o.includes(x.id)||f(x.id)})},className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Device"}),e.jsx("th",{onClick:()=>l("title"),className:"cursor-pointer px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-800",children:e.jsxs("div",{className:"flex items-center gap-1",children:["Title",n==="title"&&e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:d==="asc"?"↑":"↓"})]})}),e.jsx("th",{onClick:()=>l("severity"),className:"cursor-pointer px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-800",children:e.jsxs("div",{className:"flex items-center gap-1",children:["Severity",n==="severity"&&e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:d==="asc"?"↑":"↓"})]})}),e.jsx("th",{onClick:()=>l("status"),className:"cursor-pointer px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-800",children:e.jsxs("div",{className:"flex items-center gap-1",children:["Status",n==="status"&&e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:d==="asc"?"↑":"↓"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Acknowledged"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:t.map(x=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:o.includes(x.id),onChange:()=>f(x.id),className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-slate-900 dark:text-white",children:x.device?.name||`Device #${x.device_id}`}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:x.title}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex rounded-full px-2 py-1 text-xs font-medium ${x.severity==="critical"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":x.severity==="warning"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400"}`,children:x.severity})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex rounded-full px-2 py-1 text-xs font-medium ${x.resolved?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":x.status==="active"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}`,children:x.resolved?"Resolved":x.status})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex rounded-full px-2 py-1 text-xs font-medium ${x.acknowledged?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}`,children:x.acknowledged?"Yes":"No"})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>a(x),className:"rounded-lg p-2 text-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/30",children:e.jsx(I,{className:"size-4"})}),e.jsx("button",{onClick:()=>s(x),className:"rounded-lg p-2 text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/30",children:e.jsx(B,{className:"size-4"})})]})})]},x.id))})]})}function Wt({locations:t,onEdit:a,onDelete:s,selectedIds:n,onToggleSelection:d}){return t.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Y,{className:"mx-auto mb-4 size-12 text-slate-400"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No locations found"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-500",children:'Click "Add New" to create your first location'})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300 w-12",children:e.jsx("input",{type:"checkbox",checked:n.length===t.length&&t.length>0,onChange:()=>{n.length===t.length?t.forEach(l=>d(l.id)):t.forEach(l=>{n.includes(l.id)||d(l.id)})},className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Location Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Branch ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:t.map(l=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:n.includes(l.id),onChange:()=>d(l.id),className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-slate-900 dark:text-white",children:l.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:l.branch_id}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:l.description||"-"}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>a(l),className:"rounded-lg p-2 text-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/30",children:e.jsx(I,{className:"size-4"})}),e.jsx("button",{onClick:()=>s(l),className:"rounded-lg p-2 text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/30",children:e.jsx(B,{className:"size-4"})})]})})]},l.id))})]})}function Xt({branches:t,onEdit:a,onDelete:s,selectedIds:n,onToggleSelection:d}){return t.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(ge,{className:"mx-auto mb-4 size-12 text-slate-400"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No branches found"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-500",children:'Click "Add New" to create your first branch'})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300 w-12",children:e.jsx("input",{type:"checkbox",checked:n.length===t.length&&t.length>0,onChange:()=>{n.length===t.length?t.forEach(l=>d(l.id)):t.forEach(l=>{n.includes(l.id)||d(l.id)})},className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"#"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Address"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:t.map((l,o)=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:n.includes(l.id),onChange:()=>d(l.id),className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-slate-900 dark:text-white",children:["#",o+1]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"rounded-lg bg-gradient-to-br from-blue-500 to-indigo-600 p-2",children:e.jsx(ge,{className:"size-4 text-white"})}),e.jsx("span",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:l.name})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"rounded-full bg-slate-100 px-3 py-1 text-xs font-bold text-slate-700 dark:bg-slate-700 dark:text-slate-300",children:l.code})}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-600 dark:text-slate-400 max-w-xs truncate",children:l.description||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-600 dark:text-slate-400 max-w-xs truncate",children:l.address||"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full px-3 py-1 text-xs font-medium ${l.is_active?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}`,children:[e.jsx("div",{className:`size-1.5 rounded-full ${l.is_active?"bg-green-500":"bg-red-500"}`}),l.is_active?"Active":"Inactive"]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>a(l),className:"rounded-lg p-2 text-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/30 transition-colors",title:"Edit branch",children:e.jsx(I,{className:"size-4"})}),e.jsx("button",{onClick:()=>s(l),className:"rounded-lg p-2 text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/30 transition-colors",title:"Delete branch",children:e.jsx(B,{className:"size-4"})})]})})]},l.id))})]})}function Jt({users:t,onEdit:a,onDelete:s,selectedIds:n,onToggleSelection:d}){return t.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Te,{className:"mx-auto mb-4 size-12 text-slate-400"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No users found"})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300 w-12",children:e.jsx("input",{type:"checkbox",checked:n.length===t.length&&t.length>0,onChange:()=>{n.length===t.length?t.forEach(l=>d(l.id)):t.forEach(l=>{n.includes(l.id)||d(l.id)})},className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:t.map(l=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:n.includes(l.id),onChange:()=>d(l.id),className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-slate-900 dark:text-white",children:l.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:l.email}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex rounded-full px-2 py-1 text-xs font-medium ${l.role==="admin"?"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400"}`,children:l.role})}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:new Date(l.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>a(l),className:"rounded-lg p-2 text-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/30",children:e.jsx(I,{className:"size-4"})}),e.jsx("button",{onClick:()=>s(l),className:"rounded-lg p-2 text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/30",children:e.jsx(B,{className:"size-4"})})]})})]},l.id))})]})}function Kt({brands:t,onEdit:a,onDelete:s,selectedIds:n,onToggleSelection:d}){return t.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Y,{className:"mx-auto mb-4 size-12 text-slate-400"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No brands found"})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300 w-12",children:e.jsx("input",{type:"checkbox",checked:n.length===t.length&&t.length>0,onChange:()=>{n.length===t.length?t.forEach(l=>d(l.id)):t.forEach(l=>{n.includes(l.id)||d(l.id)})},className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"#"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:t.map((l,o)=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:n.includes(l.id),onChange:()=>d(l.id),className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-slate-900 dark:text-white",children:["#",o+1]}),e.jsx("td",{className:"px-6 py-4 text-sm font-semibold text-slate-900 dark:text-white",children:l.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:l.description||"-"}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>a(l),className:"rounded-lg p-2 text-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/30",children:e.jsx(I,{className:"size-4"})}),e.jsx("button",{onClick:()=>s(l),className:"rounded-lg p-2 text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/30",children:e.jsx(B,{className:"size-4"})})]})})]},l.id))})]})}function Zt({models:t,onEdit:a,onDelete:s,selectedIds:n,onToggleSelection:d}){return t.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Y,{className:"mx-auto mb-4 size-12 text-slate-400"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No models found"})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300 w-12",children:e.jsx("input",{type:"checkbox",checked:n.length===t.length&&t.length>0,onChange:()=>{n.length===t.length?t.forEach(l=>d(l.id)):t.forEach(l=>{n.includes(l.id)||d(l.id)})},className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"#"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Brand"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:t.map((l,o)=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:n.includes(l.id),onChange:()=>d(l.id),className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500"})}),e.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-slate-900 dark:text-white",children:["#",o+1]}),e.jsx("td",{className:"px-6 py-4 text-sm font-semibold text-slate-900 dark:text-white",children:l.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:l.brand?.name||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:l.description||"-"}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>a(l),className:"rounded-lg p-2 text-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/30",children:e.jsx(I,{className:"size-4"})}),e.jsx("button",{onClick:()=>s(l),className:"rounded-lg p-2 text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/30",children:e.jsx(B,{className:"size-4"})})]})})]},l.id))})]})}function Gt({device:t}){const[a,s]=i.useState(""),[n,d]=i.useState(""),[l,o]=i.useState(!1),f=async x=>{x.preventDefault(),o(!0);try{const b=await fetch(`/api/devices/${t.id}/acknowledge-offline`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({reason:a,acknowledged_by:n})});if(b.ok)fe.reload();else{const u=await b.json();alert(u.error||"Failed to acknowledge offline device")}}catch(b){console.error("Error acknowledging offline device:",b),alert("Failed to acknowledge offline device")}finally{o(!1)}};return e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsx("div",{className:"rounded-lg bg-orange-50 p-4 dark:bg-orange-950/20",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(de,{className:"size-5 text-orange-600 dark:text-orange-400 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-orange-900 dark:text-orange-300",children:["Device: ",t.name]}),e.jsxs("p",{className:"mt-1 text-sm text-orange-700 dark:text-orange-400",children:["IP: ",t.ip_address]}),t.offline_duration_minutes!==void 0&&t.offline_duration_minutes>0&&e.jsxs("p",{className:"mt-1 text-sm text-orange-700 dark:text-orange-400",children:["Offline for: ",t.offline_duration_minutes," minute",t.offline_duration_minutes!==1?"s":""]})]})]})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Acknowledged By ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:n,onChange:x=>d(x.target.value),required:!0,className:"w-full rounded-lg border border-slate-300 px-4 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Your name"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Reason ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:a,onChange:x=>s(x.target.value),required:!0,rows:4,className:"w-full rounded-lg border border-slate-300 px-4 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Explain why this device is offline (e.g., scheduled maintenance, hardware replacement, etc.)"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>fe.reload(),className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 dark:border-slate-600 dark:text-slate-300 dark:hover:bg-slate-700",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:l,className:"flex items-center gap-2 rounded-lg bg-orange-600 px-4 py-2 text-sm font-medium text-white hover:bg-orange-700 disabled:opacity-50",children:[e.jsx(Re,{className:"size-4"}),l?"Acknowledging...":"Acknowledge Offline"]})]})]})}function Yt({activities:t}){const[a,s]=i.useState(null),n=o=>{switch(o){case"created":return"bg-green-500";case"updated":return"bg-blue-500";case"deleted":return"bg-red-500";default:return"bg-slate-500"}},d=o=>{switch(o){case"created":return e.jsx(Ie,{className:"size-4"});case"updated":return e.jsx(I,{className:"size-4"});case"deleted":return e.jsx(B,{className:"size-4"});default:return e.jsx(Ve,{className:"size-4"})}},l=o=>o.split("_").map(f=>f.charAt(0).toUpperCase()+f.slice(1)).join(" ");return t.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Ve,{className:"mx-auto mb-4 size-12 text-slate-400"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No activity history found"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-500",children:"Changes made to devices, locations, brands, and models will appear here"})]}):e.jsx("div",{className:"space-y-3",children:t.map(o=>{const f=a===o.id,x=o.details?.device_name||o.details?.location_name||o.details?.brand_name||o.details?.model_name||"Unknown",b=o.details?.changes?Object.fromEntries(Object.entries(o.details.changes).filter(([N])=>N!=="hardware_detail_id")):{},u=Object.keys(b).length>0;return e.jsx("div",{className:"rounded-lg border border-slate-200 bg-white p-4 shadow-sm transition-all hover:shadow-md dark:border-slate-700 dark:bg-slate-800",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`flex-shrink-0 rounded-full p-2 text-white ${n(o.action)}`,children:d(o.action)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"font-semibold text-slate-900 dark:text-white",children:[x," ",o.action]}),e.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(Te,{className:"size-3"}),o.user]}),e.jsx("span",{children:"•"}),e.jsx("span",{className:"capitalize",children:o.entity_type}),o.ip_address&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx("span",{className:"font-mono text-xs",children:o.ip_address})]})]})]}),e.jsx("span",{className:"flex-shrink-0 text-xs text-slate-500 dark:text-slate-400",children:o.time_ago})]}),u&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("button",{onClick:()=>s(f?null:o.id),className:"flex items-center gap-2 text-sm font-medium text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:[f?e.jsx(Nt,{className:"size-4"}):e.jsx(bt,{className:"size-4"}),f?"Hide":"Show"," Changes (",Object.keys(b).length,")"]}),f&&e.jsx("div",{className:"mt-3 space-y-3 rounded-lg bg-slate-50 p-4 dark:bg-slate-900/50",children:Object.entries(o.details.changes).filter(([N])=>N!=="hardware_detail_id").map(([N,m])=>{const w=typeof m=="object"&&m!==null&&"old"in m&&"new"in m;return e.jsxs("div",{className:"border-l-2 border-blue-500 pl-3",children:[e.jsx("div",{className:"font-medium text-slate-700 dark:text-slate-300 mb-1",children:l(N)}),w?e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-red-600 dark:text-red-400 font-medium",children:"Before:"}),e.jsx("span",{className:"font-mono text-slate-600 dark:text-slate-400 bg-red-50 dark:bg-red-950/20 px-2 py-0.5 rounded",children:m.old===null?"null":String(m.old)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-green-600 dark:text-green-400 font-medium",children:"After:"}),e.jsx("span",{className:"font-mono text-slate-600 dark:text-slate-400 bg-green-50 dark:bg-green-950/20 px-2 py-0.5 rounded",children:m.new===null?"null":String(m.new)})]})]}):e.jsx("span",{className:"font-mono text-sm text-slate-600 dark:text-slate-400",children:typeof m=="object"?JSON.stringify(m):String(m)})]},N)})})]})]})]})},o.id)})})}function Qt({entity:t,mode:a,data:s,users:n}){const{currentBranch:d}=$e().props,[l,o]=i.useState(()=>t==="locations"&&s?s.latitude?.toString()||"":t==="locations"&&a==="create"?"1.8655":""),[f,x]=i.useState(()=>t==="locations"&&s?s.longitude?.toString()||"":t==="locations"&&a==="create"?"103.0850":""),[b,u]=i.useState([]),[N,m]=i.useState(()=>t==="alerts"&&d?.id?d.id:null);i.useEffect(()=>{t==="alerts"&&fetch("/api/branches",{credentials:"same-origin",headers:{Accept:"application/json"}}).then(r=>r.ok?r.json():[]).then(r=>J(r)).catch(r=>console.error("Error loading branches:",r))},[t]),i.useEffect(()=>{t==="alerts"&&N&&fetch(`/api/devices?branch_id=${N}`,{credentials:"same-origin",headers:{Accept:"application/json"}}).then(r=>r.ok?r.json():[]).then(r=>u(r)).catch(r=>console.error("Error loading devices:",r))},[t,N]),i.useEffect(()=>{delete Le.Icon.Default.prototype._getIconUrl,Le.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"})},[]);const[w,J]=i.useState([]),[q,Q]=i.useState([]),[y,_]=i.useState(()=>s&&"branch_id"in s&&s.branch_id?s.branch_id:null),[E,se]=i.useState([]),[$,K]=i.useState([]);i.useEffect(()=>{(t==="devices"||t==="locations")&&fetch("/api/branches",{credentials:"same-origin",headers:{Accept:"application/json"}}).then(r=>r.ok?r.json():[]).then(r=>{J(r),a==="create"&&d?.id&&!y&&_(d.id)}).catch(r=>console.error("Error loading branches:",r)),t==="devices"&&(fetch("/api/locations",{credentials:"same-origin",headers:{Accept:"application/json"}}).then(r=>r.ok?r.json():[]).then(r=>Q(r)).catch(r=>console.error("Error loading locations:",r)),fetch("/api/brands",{credentials:"same-origin",headers:{Accept:"application/json"}}).then(r=>r.ok?r.json():[]).then(r=>se(r)).catch(r=>console.error("Error loading brands:",r)),fetch("/api/models",{credentials:"same-origin",headers:{Accept:"application/json"}}).then(r=>r.ok?r.json():[]).then(r=>K(r)).catch(r=>console.error("Error loading models:",r)))},[t,d,a,y]);const ae=y?q.filter(r=>r.branch_id===y):q;if(t==="branches"){const r=s;return e.jsxs("form",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4 text-sm font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Branch Information"}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:["Branch Name *",e.jsx("span",{className:"ml-1 text-xs text-slate-500",children:"(e.g., UTHM Kampus Parit Raja)"})]}),e.jsx("input",{type:"text",name:"name",defaultValue:r?.name||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Enter branch name",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:["Branch Code *",e.jsx("span",{className:"ml-1 text-xs text-slate-500",children:"(e.g., PR, PG)"})]}),e.jsx("input",{type:"text",name:"code",defaultValue:r?.code||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Enter branch code",required:!0})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Description"}),e.jsx("input",{type:"text",name:"description",defaultValue:r?.description||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Brief description of the branch"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Address"}),e.jsx("textarea",{name:"address",defaultValue:r?.address||"",rows:3,className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Full branch address"})]}),e.jsx("div",{className:"sm:col-span-2",children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"is_active",defaultChecked:r?.is_active??!0,className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700"}),e.jsxs("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:["Branch is active",e.jsx("span",{className:"ml-2 text-xs text-slate-500",children:"(Active branches are visible in the branch selector)"})]})]})})]})]}),a==="edit"&&r&&e.jsxs("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-4 dark:border-blue-900/30 dark:bg-blue-950/20",children:[e.jsx("h5",{className:"mb-2 text-sm font-semibold text-blue-900 dark:text-blue-100",children:"Branch Statistics"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700 dark:text-blue-300",children:"Branch ID:"}),e.jsx("span",{className:"ml-2 font-bold text-blue-900 dark:text-blue-100",children:r.id})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700 dark:text-blue-300",children:"Status:"}),e.jsx("span",{className:"ml-2 font-bold text-blue-900 dark:text-blue-100",children:r.is_active?"Active":"Inactive"})]})]})]}),a==="edit"&&e.jsx("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4 dark:border-amber-900/30 dark:bg-amber-950/20",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(de,{className:"size-5 text-amber-600 dark:text-amber-400 mt-0.5"}),e.jsxs("div",{className:"text-sm text-amber-800 dark:text-amber-300",children:[e.jsx("p",{className:"font-semibold",children:"Important Notes:"}),e.jsxs("ul",{className:"mt-2 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Deleting a branch will also delete all associated devices, locations, and alerts"}),e.jsx("li",{children:"Deactivating a branch hides it from the branch selector but preserves all data"}),e.jsx("li",{children:"Consider deactivating instead of deleting for data preservation"})]})]})]})})]})}if(t==="devices"){const r=s,[k,L]=i.useState(()=>r?.location_id?r.location_id:null),[C,Z]=i.useState(null),[O,A]=i.useState(null);i.useEffect(()=>{if(a==="edit"&&r&&$.length>0&&r.hardware_detail_id){const h=r.hardware_detail?.brand,V=r.hardware_detail?.model;if(h&&V){const R=E.find(F=>F.name===h);if(R){A(R.id);const F=$.find(U=>U.name===V&&U.brand_id===R.id);F&&Z(F.id)}}}},[a,r,$,E]);const D=$.find(h=>h.id===C),v=D?.brand,H=O?$.filter(h=>h.brand_id===O):$;return i.useEffect(()=>{a==="edit"&&r?.branch_id?_(r.branch_id):a==="create"&&d?.id&&!y&&_(d.id)},[r,d,a]),i.useEffect(()=>{a==="create"&&y!==r?.branch_id&&L(null)},[y,a,r?.branch_id]),e.jsxs("form",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4 text-sm font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Basic Information"}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Device Name *"}),e.jsx("input",{type:"text",name:"name",defaultValue:r?.name||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Enter device name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Barcode *"}),e.jsx("input",{type:"text",name:"barcode",defaultValue:r?.barcode||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Enter barcode",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Serial Number"}),e.jsx("input",{type:"text",name:"serial_number",defaultValue:r?.serial_number||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Enter serial number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Managed By"}),e.jsxs("select",{name:"managed_by",defaultValue:r?.managed_by||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",children:[e.jsx("option",{value:"",children:"Not Assigned"}),n&&n.length>0&&n.map(h=>e.jsxs("option",{value:h.id,children:[h.name," (",h.role,")"]},h.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"IP Address *"}),e.jsx("input",{type:"text",name:"ip_address",defaultValue:r?.ip_address||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",pattern:"^(?:[0-9]{1,3}\\.){3}[0-9]{1,3}$",placeholder:"192.168.1.1",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"MAC Address"}),e.jsx("input",{type:"text",name:"mac_address",defaultValue:r?.mac_address||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"00:1A:2B:3C:4D:5E"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Category *"}),e.jsxs("select",{name:"category",defaultValue:r?.category||"switches",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:!0,children:[e.jsx("option",{value:"switches",children:"Switches"}),e.jsx("option",{value:"servers",children:"Servers"}),e.jsx("option",{value:"wifi",children:"WiFi"}),e.jsx("option",{value:"tas",children:"TAS"}),e.jsx("option",{value:"cctv",children:"CCTV"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Status *"}),e.jsxs("select",{name:"status",defaultValue:r?.status||"offline",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:!0,children:[e.jsx("option",{value:"online",children:"Online"}),e.jsx("option",{value:"offline",children:"Offline"}),e.jsx("option",{value:"warning",children:"Warning"}),e.jsx("option",{value:"maintenance",children:"Maintenance"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4 text-sm font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Location Information"}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Branch *"}),e.jsxs("select",{name:"branch_id",value:y||"",onChange:h=>{const V=h.target.value?Number(h.target.value):null;_(V),a==="create"&&L(null)},className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:!0,children:[e.jsx("option",{value:"",children:"Select Branch"}),w.map(h=>e.jsx("option",{value:h.id,children:h.name},h.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Location *"}),e.jsxs("select",{name:"location_id",value:k||"",onChange:h=>L(h.target.value?Number(h.target.value):null),className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",disabled:!y,required:!0,children:[e.jsx("option",{value:"",children:"Select Location"}),ae.map(h=>e.jsx("option",{value:h.id,children:h.name},h.id))]}),!y&&e.jsx("p",{className:"mt-1 text-xs text-amber-600 dark:text-amber-400",children:"Select a branch first"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4 text-sm font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Hardware Details"}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Brand *"}),e.jsxs("select",{value:O||"",onChange:h=>{const V=h.target.value?Number(h.target.value):null;A(V),Z(null)},className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:!0,children:[e.jsx("option",{value:"",children:"Select Brand"}),E.map(h=>e.jsx("option",{value:h.id,children:h.name},h.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Model *"}),e.jsxs("select",{name:"model_id",value:C||"",onChange:h=>Z(h.target.value?Number(h.target.value):null),className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",disabled:!O,required:!0,children:[e.jsx("option",{value:"",children:"Select Model"}),H.map(h=>e.jsx("option",{value:h.id,children:h.name},h.id))]}),!O&&e.jsx("p",{className:"mt-1 text-xs text-amber-600 dark:text-amber-400",children:"Select a brand first"})]})]}),v&&D&&e.jsxs("div",{className:"mt-3 rounded-lg border border-blue-200 bg-blue-50 p-3 dark:border-blue-900/30 dark:bg-blue-950/20",children:[e.jsx("p",{className:"text-xs font-semibold text-blue-700 dark:text-blue-300",children:"Selected Hardware:"}),e.jsxs("p",{className:"mt-1 text-sm font-medium text-blue-900 dark:text-blue-100",children:[v.name," - ",D.name]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"is_active",defaultChecked:r?.is_active??!0,className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Device is active"})]})})]}),e.jsxs("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-4 dark:border-blue-900/30 dark:bg-blue-950/20",children:[e.jsx("h5",{className:"mb-2 text-sm font-semibold text-blue-900 dark:text-blue-100",children:"Device Requirements"}),e.jsxs("ul",{className:"space-y-1 text-sm text-blue-800 dark:text-blue-300",children:[e.jsx("li",{children:"• IP address and barcode must be unique across all devices"}),e.jsx("li",{children:"• Branch and location are required - location is filtered by selected branch"}),e.jsx("li",{children:"• Hardware: Select brand first, then choose model from that brand"}),e.jsx("li",{children:"• Add brands and models in their respective tabs before creating devices"})]})]})]})}if(t==="alerts"){const r=s;return e.jsxs("form",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4 text-sm font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Alert Information"}),e.jsx("div",{className:"grid gap-4",children:e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Branch *"}),e.jsxs("select",{value:N||"",onChange:k=>m(k.target.value?Number(k.target.value):null),className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:!0,disabled:a==="edit",children:[e.jsx("option",{value:"",children:"Select Branch"}),w.map(k=>e.jsx("option",{value:k.id,children:k.name},k.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Device *"}),e.jsxs("select",{name:"device_id",defaultValue:r?.device_id||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",disabled:!N||a==="edit",required:!0,children:[e.jsx("option",{value:"",children:"Select Device"}),b.map(k=>e.jsxs("option",{value:k.id,children:[k.name," (",k.ip_address,")"]},k.id))]}),!N&&e.jsx("p",{className:"mt-1 text-xs text-amber-600 dark:text-amber-400",children:"Select a branch first"})]})]})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4 text-sm font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Alert Details"}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Category *"}),e.jsxs("select",{name:"category",defaultValue:r?.category||"manual",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:!0,children:[e.jsx("option",{value:"manual",children:"Manual"}),e.jsx("option",{value:"offline",children:"Offline"}),e.jsx("option",{value:"performance",children:"Performance"}),e.jsx("option",{value:"security",children:"Security"}),e.jsx("option",{value:"maintenance",children:"Maintenance"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Severity"}),e.jsxs("select",{name:"severity",defaultValue:r?.severity||"medium",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"critical",children:"Critical"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Title"}),e.jsx("input",{type:"text",name:"title",defaultValue:r?.title||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Alert title"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Message"}),e.jsx("textarea",{name:"message",defaultValue:r?.message||"",rows:3,className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Alert message or description"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4 text-sm font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Alert Management"}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Status"}),e.jsxs("select",{name:"status",defaultValue:r?.status||"active",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"acknowledged",children:"Acknowledged"}),e.jsx("option",{value:"dismissed",children:"Dismissed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Acknowledged By"}),e.jsx("input",{type:"text",name:"acknowledged_by",defaultValue:r?.acknowledged_by||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Reason/Action Taken"}),e.jsx("textarea",{name:"reason",defaultValue:r?.reason||"",rows:3,className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Describe the action taken or reason for acknowledgment"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"acknowledged",defaultChecked:r?.acknowledged??!1,className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Mark as acknowledged"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"resolved",defaultChecked:r?.resolved??!1,className:"size-4 rounded border-slate-300 text-blue-600 focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Mark as resolved"})]})]})]})]})]})}if(t==="locations"){const r=s;return i.useEffect(()=>{a==="edit"&&r?.branch_id?_(r.branch_id):a==="create"&&d?.id&&!y&&_(d.id)},[r,d,a]),e.jsxs("form",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4 text-sm font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Location Information"}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Location Name *"}),e.jsx("input",{type:"text",name:"name",defaultValue:r?.name||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"e.g., Server Room A, Floor 3 West Wing",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Branch *"}),e.jsxs("select",{name:"branch_id",value:y||"",onChange:k=>_(k.target.value?Number(k.target.value):null),className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:!0,children:[e.jsx("option",{value:"",children:"Select Branch"}),w.map(k=>e.jsx("option",{value:k.id,children:k.name},k.id))]})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Latitude *"}),e.jsx("input",{type:"number",step:"any",name:"latitude",value:l,onChange:k=>o(k.target.value),className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"1.853639",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Longitude *"}),e.jsx("input",{type:"number",step:"any",name:"longitude",value:f,onChange:k=>x(k.target.value),className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"103.080925",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Click on map to set location"}),e.jsx("div",{className:"h-96 overflow-hidden rounded-lg border border-slate-300 dark:border-slate-600",children:e.jsx(es,{latitude:l?parseFloat(l):3.139,longitude:f?parseFloat(f):101.6869,onLocationSelect:(k,L)=>{o(k.toFixed(6)),x(L.toFixed(6))}})}),e.jsx("p",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:"Click anywhere on the map to set the location coordinates"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Description"}),e.jsx("textarea",{name:"description",defaultValue:r?.description||"",rows:3,className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Additional details about this location"})]})]})]}),e.jsxs("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-4 dark:border-blue-900/30 dark:bg-blue-950/20",children:[e.jsx("h5",{className:"mb-2 text-sm font-semibold text-blue-900 dark:text-blue-100",children:"Location Requirements"}),e.jsxs("ul",{className:"space-y-1 text-sm text-blue-800 dark:text-blue-300",children:[e.jsx("li",{children:"• Latitude and longitude are required for map display"}),e.jsx("li",{children:"• Use decimal degrees format (e.g., 1.853639, 103.080925)"}),e.jsx("li",{children:"• Locations are filtered by branch in the device form"})]})]})]})}if(t==="users"){const r=s;return e.jsx("form",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4 text-sm font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"User Information"}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Name *"}),e.jsx("input",{type:"text",name:"name",defaultValue:r?.name||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Email *"}),e.jsx("input",{type:"email",name:"email",defaultValue:r?.email||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Role *"}),e.jsxs("select",{name:"role",defaultValue:r?.role||"staff",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:!0,children:[e.jsx("option",{value:"staff",children:"Staff"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:a==="create"?"Password *":"New Password (leave blank to keep current)"}),e.jsx("input",{type:"password",name:"password",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",...a==="create"?{required:!0}:{}})]})]})]})})}if(t==="brands"){const r=s;return e.jsx("form",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4 text-sm font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Brand Information"}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Brand Name *"}),e.jsx("input",{type:"text",name:"name",defaultValue:r?.name||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"e.g., Cisco, HP, Dell",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Description"}),e.jsx("textarea",{name:"description",defaultValue:r?.description||"",rows:3,className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Brief description"})]})]})]})})}if(t==="models"){const r=s,[k,L]=i.useState([]);return i.useEffect(()=>{fetch("/api/brands",{credentials:"same-origin",headers:{Accept:"application/json"}}).then(C=>C.ok?C.json():[]).then(C=>L(C)).catch(C=>console.error("Error loading brands:",C))},[]),e.jsx("form",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4 text-sm font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Model Information"}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Brand *"}),e.jsxs("select",{name:"brand_id",defaultValue:r?.brand_id||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:!0,children:[e.jsx("option",{value:"",children:"Select Brand"}),k.map(C=>e.jsx("option",{value:C.id,children:C.name},C.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Model Name *"}),e.jsx("input",{type:"text",name:"name",defaultValue:r?.name||"",className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"e.g., Catalyst 2960, ProLiant DL380",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Description"}),e.jsx("textarea",{name:"description",defaultValue:r?.description||"",rows:3,className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Brief description"})]})]})]})})}return e.jsxs("div",{className:"p-8 text-center text-slate-600 dark:text-slate-400",children:["Form for ",t," coming soon"]})}function es({latitude:t,longitude:a,onLocationSelect:s}){function n(){return Rt({click(d){s(d.latlng.lat,d.latlng.lng)}}),null}return e.jsxs(It,{center:[t,a],zoom:13,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[e.jsx(Ot,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(qt,{position:[t,a]}),e.jsx(n,{})]})}function Fe({currentPage:t,totalPages:a,totalItems:s,perPage:n,onPageChange:d,onPerPageChange:l}){const o=(t-1)*n+1,f=Math.min(t*n,s),x=()=>{const b=[];if(a<=5)for(let N=1;N<=a;N++)b.push(N);else{b.push(1),t>3&&b.push("...");const N=Math.max(2,t-1),m=Math.min(a-1,t+1);for(let w=N;w<=m;w++)b.push(w);t<a-2&&b.push("..."),b.push(a)}return b};return a<=1?null:e.jsxs("div",{className:"flex items-center justify-between border-t border-slate-200 bg-white px-4 py-3 dark:border-slate-700 dark:bg-slate-800 sm:px-6",children:[e.jsxs("div",{className:"flex flex-1 justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>d(t-1),disabled:t===1,className:"relative inline-flex items-center rounded-md border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 disabled:opacity-50 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-200",children:"Previous"}),e.jsx("button",{onClick:()=>d(t+1),disabled:t===a,className:"relative ml-3 inline-flex items-center rounded-md border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 disabled:opacity-50 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-200",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:["Showing ",e.jsx("span",{className:"font-medium",children:o})," to ",e.jsx("span",{className:"font-medium",children:f})," of"," ",e.jsx("span",{className:"font-medium",children:s})," results"]}),e.jsxs("select",{value:n,onChange:b=>l(Number(b.target.value)),className:"rounded-md border border-slate-300 bg-white px-3 py-1.5 text-sm dark:border-slate-600 dark:bg-slate-700 dark:text-slate-200",children:[e.jsx("option",{value:25,children:"25 per page"}),e.jsx("option",{value:50,children:"50 per page"}),e.jsx("option",{value:100,children:"100 per page"}),e.jsx("option",{value:200,children:"200 per page"})]})]}),e.jsx("div",{children:e.jsxs("nav",{className:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination",children:[e.jsxs("button",{onClick:()=>d(t-1),disabled:t===1,className:"relative inline-flex items-center rounded-l-md px-2 py-2 text-slate-400 ring-1 ring-inset ring-slate-300 hover:bg-slate-50 disabled:opacity-50 dark:ring-slate-600 dark:hover:bg-slate-700",children:[e.jsx("span",{className:"sr-only",children:"Previous"}),e.jsx(ht,{className:"size-5"})]}),x().map((b,u)=>b==="..."?e.jsx("span",{className:"relative inline-flex items-center px-4 py-2 text-sm font-semibold text-slate-700 ring-1 ring-inset ring-slate-300 dark:text-slate-300 dark:ring-slate-600",children:"..."},`ellipsis-${u}`):e.jsx("button",{onClick:()=>d(b),className:`relative inline-flex items-center px-4 py-2 text-sm font-semibold ring-1 ring-inset ring-slate-300 dark:ring-slate-600 ${t===b?"z-10 bg-blue-600 text-white focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600":"text-slate-900 hover:bg-slate-50 dark:text-slate-100 dark:hover:bg-slate-700"}`,children:b},b)),e.jsxs("button",{onClick:()=>d(t+1),disabled:t===a,className:"relative inline-flex items-center rounded-r-md px-2 py-2 text-slate-400 ring-1 ring-inset ring-slate-300 hover:bg-slate-50 disabled:opacity-50 dark:ring-slate-600 dark:hover:bg-slate-700",children:[e.jsx("span",{className:"sr-only",children:"Next"}),e.jsx(gt,{className:"size-5"})]})]})})]})]})}export{ps as default};

import{u as f,a as w,b as y,r as s,j as e}from"./app-BfxOKkQ_.js";import{M as N,B as S}from"./monitor-layout-CGA11A74.js";import{S as C}from"./search-BPsSlyun.js";import{C as A}from"./clock-UlpDeDk3.js";import{C as L}from"./server-Cztm0_0s.js";import"./app-DzUtOtYk.js";import"./x-MStIeT5U.js";import"./createLucideIcon-DHR4KVjH.js";import"./activity-C38_CQi_.js";function U(){const{settings:z}=f(),{t:x}=w(),{currentBranch:r}=y().props,[m,u]=s.useState([]),[g,o]=s.useState(!0),[a,h]=s.useState(""),[l,p]=s.useState("all"),[i,b]=s.useState("all");s.useEffect(()=>{j()},[r?.id]);const j=async()=>{o(!0);try{const t=r?.id?`/api/alerts?branch_id=${r.id}`:"/api/alerts",d=await fetch(t,{credentials:"same-origin",headers:{Accept:"application/json"}});if(d.ok){const n=await d.json();u(n)}}catch(t){console.error("Error fetching alerts:",t)}finally{o(!1)}},c=m.filter(t=>{const d=t.title.toLowerCase().includes(a.toLowerCase())||t.message.toLowerCase().includes(a.toLowerCase())||t.device?.name.toLowerCase().includes(a.toLowerCase()),n=l==="all"||t.severity===l,v=i==="all"||t.status===i;return d&&n&&v}),k=t=>{switch(t){case"critical":return"text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-900/30";case"warning":return"text-yellow-600 dark:text-yellow-400 bg-yellow-100 dark:bg-yellow-900/30";case"info":return"text-blue-600 dark:text-blue-400 bg-blue-100 dark:bg-blue-900/30";default:return"text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-900/30"}};return e.jsx(N,{title:x("alerts.title"),children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"bg-gradient-to-r from-slate-900 to-slate-700 bg-clip-text text-3xl font-bold text-transparent dark:from-white dark:to-slate-300",children:"Alert Management"}),e.jsxs("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:["Monitor and manage system alerts for ",r?.name||"all branches"]})]}),e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(C,{className:"absolute left-3 top-1/2 size-5 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search alerts...",value:a,onChange:t=>h(t.target.value),className:"w-full rounded-xl border border-slate-200 bg-white py-2.5 pl-10 pr-4 text-sm text-slate-900 dark:border-slate-700 dark:bg-slate-800 dark:text-white"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:l,onChange:t=>p(t.target.value),className:"rounded-lg border border-slate-200 bg-white px-4 py-2 text-sm dark:border-slate-700 dark:bg-slate-800 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Severities"}),e.jsx("option",{value:"critical",children:"Critical"}),e.jsx("option",{value:"warning",children:"Warning"}),e.jsx("option",{value:"info",children:"Info"}),e.jsx("option",{value:"error",children:"Error"})]}),e.jsxs("select",{value:i,onChange:t=>b(t.target.value),className:"rounded-lg border border-slate-200 bg-white px-4 py-2 text-sm dark:border-slate-700 dark:bg-slate-800 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"acknowledged",children:"Acknowledged"}),e.jsx("option",{value:"dismissed",children:"Dismissed"})]})]})]}),e.jsx("div",{className:"space-y-4",children:g?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto mb-4 size-12 animate-spin rounded-full border-4 border-slate-300 border-t-blue-600"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading alerts..."})]}):c.length===0?e.jsxs("div",{className:"rounded-2xl border border-slate-200/50 bg-white p-12 text-center shadow-lg dark:border-slate-700/50 dark:bg-slate-800",children:[e.jsx(S,{className:"mx-auto mb-4 size-12 text-slate-400"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"No Alerts"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:a||l!=="all"||i!=="all"?"No alerts match your filters":"All systems operating normally"})]}):c.map(t=>e.jsx("div",{className:"rounded-xl border border-slate-200/50 bg-white p-6 shadow-lg transition-all hover:shadow-xl dark:border-slate-700/50 dark:bg-slate-800",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-medium ${k(t.severity)}`,children:t.severity.toUpperCase()}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:t.device?.name||"Unknown Device"})]}),e.jsx("h3",{className:"mt-3 text-lg font-semibold text-slate-900 dark:text-white",children:t.title}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:t.message}),e.jsxs("div",{className:"mt-4 flex items-center gap-4 text-xs text-slate-500 dark:text-slate-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(A,{className:"size-3"}),new Date(t.triggered_at).toLocaleString()]}),t.downtime&&e.jsxs("div",{children:["Downtime: ",t.downtime]})]}),t.acknowledged&&e.jsx("div",{className:"mt-3 rounded-lg bg-blue-50 p-3 dark:bg-blue-950/20",children:e.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:[e.jsx(L,{className:"inline size-4 mr-1"}),"Acknowledged by ",t.acknowledged_by,t.reason&&`: ${t.reason}`]})})]}),e.jsx("div",{className:"ml-4",children:e.jsx("span",{className:`inline-flex rounded-full px-3 py-1 text-xs font-medium ${t.status==="active"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":t.status==="acknowledged"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400"}`,children:t.status})})]})},t.id))})]})})}export{U as default};
